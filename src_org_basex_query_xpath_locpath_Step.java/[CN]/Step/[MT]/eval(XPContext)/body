{
  if (ctx.local.size == 0)   return ctx.local;
  result.reset();
  final Data data=ctx.local.data;
  final int[] nodes=ctx.local.nodes;
  if (simple) {
    for (    int n : nodes)     eval(data,n,result);
  }
 else   if (posPred != 0) {
    for (    int n : nodes)     pos(ctx,data,n);
  }
 else   if (early) {
    for (    int n : nodes)     early(ctx,data,n);
  }
 else {
    tmp.reset();
    for (    int n : nodes) {
      eval(data,n,tmp);
      preds.eval(ctx,tmp,result);
    }
  }
  return new NodeSet(result.finish(),ctx);
}
