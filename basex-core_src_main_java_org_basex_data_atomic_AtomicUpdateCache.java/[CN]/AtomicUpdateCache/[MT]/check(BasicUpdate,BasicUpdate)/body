{
  if (b.location < a.location)   throw Util.notExpected("Invalid order at location " + a.location);
  if (b.location == a.location) {
    if (b instanceof Insert || b instanceof InsertAttr)     if (a instanceof Delete)     throw Util.notExpected("Invalid sequence of delete, insert at location " + a.location);
 else     if (a instanceof Replace)     throw Util.notExpected("Invalid sequence of replace, insert at location " + a.location);
    if (b.destructive() && a.destructive())     throw Util.notExpected("Multiple deletes/replaces on node " + a.location);
    if (b instanceof Rename && a instanceof Rename)     throw Util.notExpected("Multiple renames on node " + a.location);
    if (b instanceof UpdateValue && a instanceof UpdateValue)     throw Util.notExpected("Multiple updates on node " + a.location);
    if (b.destructive() && !(a instanceof StructuralUpdate))     throw Util.notExpected("Invalid sequence of value update and destructive update at" + " location " + a.location);
  }
}
