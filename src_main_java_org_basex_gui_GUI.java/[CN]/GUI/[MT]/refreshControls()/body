{
  final Nodes marked=context.marked;
  if (marked != null)   setHits(marked.size());
  filter.setEnabled(marked != null && marked.size() != 0);
  final boolean inf=gprop.is(GUIProp.SHOWINFO);
  context.prop.set(Prop.QUERYINFO,inf);
  context.prop.set(Prop.XMLPLAN,inf);
  final Data data=context.data;
  final int t=mode.getSelectedIndex();
  final int s=data == null ? 2 : gprop.num(GUIProp.SEARCHMODE);
  input.help(s == 0 ? data.fs != null ? HELPSEARCHFS : HELPSEARCHXML : s == 1 ? HELPXPATH : HELPCMD);
  mode.setEnabled(data != null);
  go.setEnabled(s == 2 || !gprop.is(GUIProp.EXECRT));
  if (s != t) {
    mode.setSelectedIndex(s);
    input.setText("");
    input.requestFocusInWindow();
  }
  toolbar.refresh();
  menu.refresh();
  final int i=context.data == null ? 2 : gprop.num(GUIProp.SEARCHMODE);
  final String[] hs=i == 0 ? gprop.strings(GUIProp.SEARCH) : i == 1 ? gprop.strings(GUIProp.XQUERY) : gprop.strings(GUIProp.COMMANDS);
  hist.setEnabled(hs.length != 0);
}
