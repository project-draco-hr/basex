{
  final String in=input.getText().trim();
  final boolean cmd=mode.getSelectedIndex() == 2;
  if (cmd || in.startsWith("!")) {
    final int i=cmd ? 0 : 1;
    if (i == in.length())     return;
    try {
      execute(true,new CommandParser(in.substring(i),context).parse());
    }
 catch (    final QueryException ex) {
      if (!info.visible())       GUICommands.SHOWINFO.execute(this);
      info.setInfo(ex.getMessage(),null,null,false);
      info.reset();
    }
  }
 else   if (gprop.num(GUIProp.SEARCHMODE) == 1 || in.startsWith("/")) {
    xquery(in,true);
  }
 else {
    final String qu=Find.find(in,context,gprop.is(GUIProp.FILTERRT));
    execute(true,new XQuery(qu));
  }
}
