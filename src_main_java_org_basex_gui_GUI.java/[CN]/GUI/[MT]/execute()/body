{
  final String in=input.getText().trim();
  final boolean cmd=mode.getSelectedIndex() == 2;
  if (cmd || in.startsWith("!")) {
    final int i=cmd ? 0 : 1;
    if (i == in.length())     return;
    try {
      final PasswordReader pr=new PasswordReader(){
        @Override public String password() throws QueryException {
          final DialogPass dp=new DialogPass();
          return dp.ok() ? Token.md5(dp.pass()) : "";
        }
      }
;
      final CommandParser cp=new CommandParser(in.substring(i),context);
      cp.password(pr);
      execute(false,cp.parse());
    }
 catch (    final QueryException ex) {
      if (!info.visible())       GUICommands.C_SHOWINFO.execute(this);
      info.setInfo(ex.getMessage(),null,null,false);
      info.reset();
    }
  }
 else   if (gprop.num(GUIProp.SEARCHMODE) == 1 || in.startsWith("/")) {
    xquery(in,false);
  }
 else {
    final String qu=Find.find(in,context,gprop.is(GUIProp.FILTERRT));
    execute(false,new XQuery(qu));
  }
}
