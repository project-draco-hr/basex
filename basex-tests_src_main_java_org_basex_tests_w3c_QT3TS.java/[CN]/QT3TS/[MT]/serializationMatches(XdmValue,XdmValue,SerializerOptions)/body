{
  if (sprop.get(SerializerOptions.STANDALONE) == YesNoOmit.OMIT)   sprop.set(SerializerOptions.OMIT_XML_DECLARATION,YesNo.YES);
  try {
    final String flags=asString("@flags",expected);
    final XdmValue ret=XdmValue.get(Str.get(serialize(returned,sprop)));
    final String qu="declare variable $returned external;" + "declare variable $expected external;" + "matches($returned, string($expected), '" + flags + "')";
    return new XQuery(qu,ctx).bind("returned",ret).bind("expected",expected).value().getBoolean() ? null : expected.getString();
  }
 catch (  final Exception err) {
    return Util.info("% (found: %)",expected.getString(),err);
  }
}
