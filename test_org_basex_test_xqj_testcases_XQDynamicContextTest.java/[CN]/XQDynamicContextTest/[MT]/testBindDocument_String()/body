{
  XQPreparedExpression xqpe;
  xqpe=xqc.prepareExpression("declare variable $v external; $v");
  xqpe.close();
  try {
    xqpe.bindDocument(new QName("v"),"<e>Hello world!</e>",null,null);
    fail("A-XQDC-1.1: bindDocument() throws an XQException when the dynamic context is in closed state.");
  }
 catch (  XQException e) {
  }
  xqpe=xqc.prepareExpression("declare variable $v external; $v");
  try {
    xqpe.bindDocument(null,"<e>Hello world!</e>",null,null);
    fail("A-XQDC-1.2: null argument is invalid and throws an XQException.");
  }
 catch (  XQException e) {
  }
  xqpe.close();
  boolean bindFailed=false;
  xqpe=xqc.prepareExpression("declare variable $v external; $v");
  try {
    xqpe.bindDocument(new QName("v"),"<e>Hello world!</e>",null,xqc.createAtomicType(XQItemType.XQBASETYPE_BOOLEAN));
  }
 catch (  XQException e) {
    bindFailed=true;
  }
  if (!bindFailed) {
    XQSequence xqs=xqpe.executeQuery();
    xqs.next();
    if (xqs.getItemType().getItemKind() != XQItemType.XQITEMKIND_ATOMIC)     fail("A-XQDC-1.3: The conversion is subject to the following constraints. Either it fails with an XQException, either it is successful in which case it must result in an instance of XDT.");
    if (xqs.getItemType().getBaseType() != XQItemType.XQBASETYPE_BOOLEAN)     fail("A-XQDC-1.3: The conversion is subject to the following constraints. Either it fails with an XQException, either it is successful in which case it must result in an instance of XDT.");
  }
  xqpe.close();
  xqpe=xqc.prepareExpression("declare variable $v external; $v");
  try {
    xqpe.bindDocument(new QName("v"),"<e>",null,null);
    xqpe.executeQuery().getSequenceAsString(null);
    fail("A-XQDC-1.4: The conversion of the value to an XDM instance must fail.");
  }
 catch (  XQException e) {
  }
  xqpe.close();
  xqpe=xqc.prepareExpression("declare variable $v external; $v");
  try {
    xqpe.bindDocument(new QName("foo"),"<e>Hello world!</e>",null,null);
    fail("A-XQDC-1.5: The bound variable must be declared external in the prepared expression.");
  }
 catch (  XQException e) {
  }
  xqpe.close();
  xqpe=xqc.prepareExpression("declare variable $v as xs:decimal external; $v");
  try {
    xqpe.bindDocument(new QName("v"),"<e>Hello world!</e>",null,null);
    xqpe.executeQuery().getSequenceAsString(null);
    fail("A-XQDC-1.6: The dynamic type of the bound value is not compatible with the static type of the variable and must fail.");
  }
 catch (  XQException e) {
  }
  xqpe.close();
  xqpe=xqc.prepareExpression("declare variable $v external; $v");
  try {
    xqpe.bindDocument(new QName("v"),"<e>Hello world!</e>",null,null);
  }
 catch (  XQException e) {
    fail("A-XQDC-1.7: bindDocument() failed with message: " + e.getMessage());
  }
  String result=xqpe.executeQuery().getSequenceAsString(null);
  assertTrue("A-XQDC-1.7: Expects serialized result contains '<e>Hello world!</e>', but it is '" + result + "'",result.indexOf("<e>Hello world!</e>") != -1);
  xqpe.close();
}
