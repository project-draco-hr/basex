{
  final String in=input.getText().trim();
  final boolean cmd=mode.getSelectedIndex() == 2;
  final boolean exc=in.startsWith("!");
  if (cmd || exc) {
    try {
      final CommandParser cp=new CommandParser(in.substring(exc ? 1 : 0),context);
      cp.pwReader(READER);
      execute(false,cp.parse());
    }
 catch (    final QueryException ex) {
      if (!info.visible())       GUICommands.C_SHOWINFO.execute(this);
      info.setInfo(Util.message(ex),null,false,true);
    }
  }
 else   if (gopts.number(GUIOptions.SEARCHMODE) == 1 || in.startsWith("/")) {
    xquery(in,false);
  }
 else {
    execute(false,new Find(in,gopts.bool(GUIOptions.FILTERRT)));
  }
}
