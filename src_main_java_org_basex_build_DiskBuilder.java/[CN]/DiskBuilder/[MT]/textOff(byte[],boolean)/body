{
  long v=Token.toSimpleInt(value);
  if (v != Integer.MIN_VALUE)   return v | IO.OFFNUM;
  final byte[] cpr=comp.pack(value);
  if (text) {
    v=txtlen;
    txtlen+=xout.writeToken(cpr);
  }
 else {
    v=vallen;
    vallen+=vout.writeToken(cpr);
  }
  return cpr != value ? v | IO.OFFCOMP : v;
}
