{
  long v=Token.toSimpleInt(val);
  if (v != Integer.MIN_VALUE)   return v | IO.NUMOFF;
  final byte[] cpr=comp.pack(val);
  if (txt) {
    v=txtlen;
    txtlen+=xout.writeToken(cpr);
  }
 else {
    v=vallen;
    vallen+=vout.writeToken(cpr);
  }
  return (cpr != val) ? v | IO.CPROFF : v;
}
