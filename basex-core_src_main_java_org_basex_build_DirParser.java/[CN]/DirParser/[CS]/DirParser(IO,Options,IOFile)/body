{
  super(source,opts);
  final String parent=source.dirPath();
  root=parent.endsWith("/") ? parent : parent + '/';
  skipCorrupt=options.is(Options.SKIPCORRUPT);
  archives=options.is(Options.ADDARCHIVES);
  addRaw=options.is(Options.ADDRAW);
  dtd=options.is(Options.DTD);
  rawParser=options.get(Options.PARSER).toLowerCase(Locale.ENGLISH).equals(DataText.M_RAW);
  filter=!source.isDir() && !source.isArchive() ? null : Pattern.compile(IOFile.regex(opts.get(Options.CREATEFILTER)));
  rawPath=path != null && (addRaw || rawParser) ? new IOFile(path,M_RAW) : null;
}
