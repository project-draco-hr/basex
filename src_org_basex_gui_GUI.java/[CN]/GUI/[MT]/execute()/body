{
  String in=input.getText();
  final boolean db=context.data() != null;
  final boolean cmd=prop.num(GUIProp.SEARCHMODE) == 2 || !db;
  if (cmd || in.startsWith("!")) {
    final int i=cmd ? 0 : 1;
    if (in.length() > i) {
      try {
        for (        final Process p : new CommandParser(in.substring(i),context).parse()) {
          if (!exec(p,p instanceof XQuery))           break;
        }
      }
 catch (      final QueryException ex) {
        if (!prop.is(GUIProp.SHOWSTARTTEXT) && !db || !prop.is(GUIProp.SHOWTEXT) && db) {
          GUICommands.SHOWTEXT.execute(this);
        }
        text.setText(new TokenBuilder(ex.getMessage()).finish());
      }
    }
  }
 else {
    if (prop.num(GUIProp.SEARCHMODE) == 1 || in.startsWith("/")) {
      xquery(in,true);
    }
 else {
      in=Find.find(in,context,prop.is(GUIProp.FILTERRT));
      execute(new XQuery(in),true);
    }
  }
}
