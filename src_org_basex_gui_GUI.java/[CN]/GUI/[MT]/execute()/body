{
  final boolean cmd=GUIProp.searchmode == 2 || !context.db();
  final String in=input.getText();
  if (cmd || in.startsWith("!")) {
    final int i=cmd ? 0 : 1;
    if (in.length() > i) {
      try {
        for (        final Process p : new CommandParser(in.substring(i)).parse()) {
          if (!exec(p))           break;
        }
      }
 catch (      final QueryException ex) {
        final boolean db=context.db();
        if (!GUIProp.showstarttext && !db || !GUIProp.showtext && db) {
          GUICommands.SHOWTEXT.execute();
        }
        if (text.isValid()) {
          try {
            final CachedOutput out=new CachedOutput();
            out.println(ex.getMessage());
            text.setText(out.buffer(),out.size(),false);
          }
 catch (          final IOException e) {
            e.printStackTrace();
          }
        }
      }
    }
  }
 else {
    execute(new XPath(GUIProp.searchmode == 1 ? in : Find.find(in,context,GUIProp.filterrt)));
  }
}
