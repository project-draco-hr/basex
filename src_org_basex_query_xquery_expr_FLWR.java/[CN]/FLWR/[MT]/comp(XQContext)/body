{
  final Expr ex=super.comp(ctx);
  if (ex != this)   return ex;
  for (int f=0; f != fl.length; f++) {
    if (fl[f].var.expr != null) {
      ctx.compInfo(OPTVAR,fl[f].var);
      fl=Array.delete(fl,f--);
    }
  }
  if (fl.length == 0) {
    ctx.compInfo(OPTFLWOR);
    return where != null ? new If(where,expr,Seq.EMPTY) : expr;
  }
  final ForLet f=fl[fl.length - 1];
  final boolean pos=f instanceof For && ((For)f).pos != null;
  final boolean score=f instanceof For && ((For)f).score != null;
  if (where != null && !pos && !score && f instanceof For && f.expr instanceof AxisPath) {
    ctx.compInfo(OPTWHERE);
    f.expr=((AxisPath)f.expr).addPred(where.removeVar(f.var));
    where=null;
    return comp(ctx);
  }
  return this;
}
