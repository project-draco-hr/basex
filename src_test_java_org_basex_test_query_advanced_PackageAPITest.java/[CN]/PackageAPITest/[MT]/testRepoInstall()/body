{
  try {
    new RepoManager(ctx.repo).install("etc/pkg",null);
    fail("Not existing package not detected.");
  }
 catch (  final QueryException ex) {
    check(ex,Err.PKGNOTEXIST);
  }
  new RepoInstall(REPO + "pkg3.xar",null).execute(ctx);
  final String dirName=normalize("http://www.pkg3.com-10.0");
  assertTrue(dir(dirName));
  assertTrue(file(dirName + "/expath-pkg.xml"));
  assertTrue(dir(dirName + "/pkg3"));
  assertTrue(dir(dirName + "/pkg3/mod"));
  assertTrue(file(dirName + "/pkg3/mod/pkg3mod1.xql"));
  assertTrue(new IOFile(REPO,dirName).delete());
}
