{
  try {
    new RepoManager(ctx).install("etc/pkg",null);
    fail("Not existing package not detected.");
  }
 catch (  final QueryException ex) {
    check(ex,Err.PKGNOTEXIST);
  }
  new RepoInstall(REPO + "pkg3.xar",null).execute(ctx);
  assertTrue(dir("pkg3"));
  assertTrue(file("pkg3/expath-pkg.xml"));
  assertTrue(dir("pkg3/pkg3"));
  assertTrue(dir("pkg3/pkg3/mod"));
  assertTrue(file("pkg3/pkg3/mod/pkg3mod1.xql"));
  assertTrue(new IOFile(REPO,"pkg3").delete());
}
