{
  try {
    new RepoManager(ctx).install("etc/pkg",null);
    fail("Not existing package not detected.");
  }
 catch (  final QueryException ex) {
    check(ex,Err.PKGNOTEXIST);
  }
  new RepoInstall("etc/repo/pkg3.xar",null).execute(ctx);
  final File pkgDir=new File("etc/repo/pkg3");
  assertTrue(pkgDir.exists());
  assertTrue(pkgDir.isDirectory());
  final File pkgDesc=new File("etc/repo/pkg3/expath-pkg.xml");
  assertTrue(pkgDesc.exists());
  final File modDir1=new File("etc/repo/pkg3/pkg3");
  assertTrue(modDir1.exists());
  assertTrue(modDir1.isDirectory());
  final File modDir2=new File("etc/repo/pkg3/pkg3/mod");
  assertTrue(modDir2.exists());
  assertTrue(modDir2.isDirectory());
  final File modFile=new File("etc/repo/pkg3/pkg3/mod/pkg3mod1.xql");
  assertTrue(modFile.exists());
  new RepoDelete("pkg3",null).execute(ctx);
  assertTrue(ctx.repo.pkgDict().id(token("pkg3-10.0")) == 0);
  assertTrue(!pkgDir.exists());
}
