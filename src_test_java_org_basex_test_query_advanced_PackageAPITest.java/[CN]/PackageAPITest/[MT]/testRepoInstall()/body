{
  try {
    new RepoManager(ctx,null).installPackage("etc/pkg");
    fail("Not existing package not detected.");
  }
 catch (  QueryException ex) {
    assertTrue(indexOf(token(ex.getMessage()),token("PACK0001")) != -1);
  }
  new InstallPkg("etc/repo/pkg3.xar",ctx,null).execute(ctx);
  File pkgDir=new File("etc/repo/pkg3");
  assertTrue(pkgDir.exists());
  assertTrue(pkgDir.isDirectory());
  File pkgDesc=new File("etc/repo/pkg3/expath-pkg.xml");
  assertTrue(pkgDesc.exists());
  File modDir=new File("etc/repo/pkg3/pkg3");
  assertTrue(modDir.exists());
  assertTrue(modDir.isDirectory());
  File modFile=new File("etc/repo/pkg3/pkg3/pkg3mod1.xql");
  assertTrue(modFile.exists());
  modFile.delete();
  modDir.delete();
  pkgDesc.delete();
  pkgDir.delete();
}
