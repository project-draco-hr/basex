{
  final Nod nodes=item instanceof Nod ? (Nod)item : null;
  if (res == XPathConstants.NODESET || res == XPathConstants.NODE) {
    if (nodes == null)     throw new XPathExpressionException("Result can't be cast to a nodeset");
    if (nodes.size == 0)     return null;
    final Data data=nodes.data;
    return res == XPathConstants.NODESET ? new BXNList(nodes) : new DBNode(data,nodes.nodes[0]).java();
  }
  if (res == XPathConstants.NUMBER)   return Double.valueOf(item.num());
  if (res == XPathConstants.STRING)   return Token.string(item.str());
  if (res == XPathConstants.BOOLEAN)   return Boolean.valueOf(item.bool());
  throw new XPathExpressionException("Invalid type: " + res);
}
