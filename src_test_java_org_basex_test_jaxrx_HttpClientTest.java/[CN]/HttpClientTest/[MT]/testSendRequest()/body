{
  final Command put=new XQuery("http:send-request(" + "<http:request method='put' status-only='true'>" + "<http:body media-type='text/xml'>"+ "<books>"+ "<book id='1'>"+ "<name>Sherlock Holmes</name>"+ "<author>Doyle</author>"+ "</book>"+ "<book id='2'>"+ "<name>Winnetou</name>"+ "<author>May</author>"+ "</book>"+ "<book id='3'>"+ "<name>Tom Sawyer</name>"+ "<author>Twain</author>"+ "</book>"+ "</books>"+ "</http:body>"+ "</http:request>, 'http://localhost:8984/basex/jax-rx/books')");
  put.execute(context);
  checkResponse(put,HttpURLConnection.HTTP_CREATED,1);
  final Command postQuery=new XQuery("http:send-request(" + "<http:request method='post'>" + "<http:body media-type='application/query+xml'>"+ "<query xmlns='http://jax-rx.sourceforge.net'>"+ "<text>//book/name</text>"+ "</query>"+ "</http:body>"+ "</http:request>, 'http://localhost:8984/basex/jax-rx/books')");
  postQuery.execute(context);
  checkResponse(postQuery,HttpURLConnection.HTTP_OK,2);
  final Command postAdd=new XQuery("http:send-request(" + "<http:request method='post' status-only='true'>" + "<http:body media-type='text/xml'>"+ "<book id='4'>"+ "<name>The Celebrated Jumping Frog of Calaveras County</name>"+ "<author>Twain</author>"+ "</book>"+ "</http:body>"+ "</http:request>, 'http://localhost:8984/basex/jax-rx/books')");
  postAdd.execute(context);
  checkResponse(postAdd,HttpURLConnection.HTTP_CREATED,1);
  final Command get1=new XQuery("http:send-request(" + "<http:request method='get' " + "href='http://localhost:8984/basex/jax-rx/books'/>)");
  get1.execute(context);
  checkResponse(get1,HttpURLConnection.HTTP_OK,2);
  assertTrue(((ItemIter)get1.result()).item[1].type == Type.DOC);
  final Command get2=new XQuery("http:send-request(" + "<http:request method='get' override-media-type='text/plain'/>," + "'http://localhost:8984/basex/jax-rx/books')");
  get2.execute(context);
  checkResponse(get2,HttpURLConnection.HTTP_OK,2);
  assertTrue(((ItemIter)get2.result()).item[1].type == Type.STR);
  final Command get3=new XQuery("http:send-request(" + "<http:request method='get' status-only='true'/>," + "'http://localhost:8984/basex/jax-rx/books')");
  get3.execute(context);
  checkResponse(get3,HttpURLConnection.HTTP_OK,1);
  final Command delete=new XQuery("http:send-request(" + "<http:request method='delete' status-only='true'/>, " + "'http://localhost:8984/basex/jax-rx/books')");
  delete.execute(context);
  checkResponse(delete,HttpURLConnection.HTTP_OK,1);
}
