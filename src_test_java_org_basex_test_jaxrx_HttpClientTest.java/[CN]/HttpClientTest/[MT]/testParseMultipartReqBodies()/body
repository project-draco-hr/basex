{
  final byte[] multiReq=token("<http:request " + "xmlns:http=\"http://expath.org/ns/http\" " + "method='POST' href='http://www.basex.org'>"+ "<http:header name='hdr1' value='hdr1val'/>"+ "<http:header name='hdr2' value='hdr2val'/>"+ "<http:multipart media-type='multipart/mixed' boundary='xxxx'>"+ "<part>"+ "<http:header name='p1hdr1' value='p1hdr1val'/>"+ "<http:header name='p1hdr2' value='p1hdr2val'/>"+ "<http:body media-type='text/plain'/>"+ "</part>"+ "<part>"+ "<http:header name='p2hdr1' value='p2hdr1val'/>"+ "<http:body media-type='text/plain'/>"+ "</part>"+ "<part>"+ "<http:body media-type='text/plain'/>"+ "</part>"+ "</http:multipart>"+ "</http:request>");
  final IO io=new IOContent(multiReq);
  final Parser p=Parser.xmlParser(io,context.prop,"");
  final DBNode dbNode1=new DBNode(p,context.prop);
  final ItemCache bodies=new ItemCache();
  bodies.add(Str.get("Part1"));
  bodies.add(Str.get("Part2"));
  bodies.add(Str.get("Part3"));
  final Request r=RequestParser.parse(dbNode1.children().next(),bodies,null);
  assertTrue(r.attrs.size() == 2);
  assertTrue(r.headers.size() == 2);
  assertTrue(r.isMultipart);
  assertTrue(r.parts.size() == 3);
  final Iterator<Part> i=r.parts.iterator();
  Part part=null;
  part=i.next();
  assertTrue(part.headers.size() == 2);
  assertTrue(part.bodyContent.size() == 1);
  assertTrue(part.bodyAttrs.size() == 1);
  part=i.next();
  assertTrue(part.headers.size() == 1);
  assertTrue(part.bodyContent.size() == 1);
  assertTrue(part.bodyAttrs.size() == 1);
  part=i.next();
  assertTrue(part.headers.size() == 0);
  assertTrue(part.bodyContent.size() == 1);
  assertTrue(part.bodyAttrs.size() == 1);
}
