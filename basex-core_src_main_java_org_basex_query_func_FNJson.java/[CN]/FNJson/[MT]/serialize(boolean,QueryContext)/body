{
  final ANode node=checkNode(expr[0],ctx);
  final Item opt=expr.length > 1 ? expr[1].item(ctx,info) : null;
  final TokenMap map=new FuncParams(Q_OPTIONS,info).parse(opt);
  final SerializerProp props=new SerializerProp();
  props.set(S_METHOD,M_JSON);
  final JsonProp jprop=new JsonProp();
  final byte[] unesc=map.get(UNESCAPE);
  if (unesc != null)   jprop.set(JsonProp.UNESCAPE,Util.yes(string(unesc)));
  final byte[] spec=map.get(SPEC);
  if (spec != null)   jprop.set(JsonProp.SPEC,string(spec));
  jprop.set(JsonProp.FORMAT,map.contains(FORMAT) ? string(map.get(FORMAT)) : ml ? M_JSONML : M_JSON);
  props.set(S_JSON,jprop.toString());
  return Str.get(delete(serialize(node.iter(),props),'\r'));
}
