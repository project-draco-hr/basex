{
  final JDialog dialog=new JDialog(this,"Connection Properties",true);
  dialog.setSize(new Dimension(400,250));
  dialog.setLocationRelativeTo(this);
  dialog.setDefaultCloseOperation(WindowConstants.DISPOSE_ON_CLOSE);
  final BaseXBack connection=new BaseXBack();
  connection.setLayout(new TableLayout(7,2));
  final BaseXTextField sname=new BaseXTextField(Text.LOCALHOST,this);
  final BaseXTextField sport=new BaseXTextField("1984",this);
  final BaseXTextField suser=new BaseXTextField("admin",this);
  final BaseXPassword spw=new BaseXPassword(this);
  final BaseXLabel message=new BaseXLabel(" ");
  connection.border(8,8,8,8);
  connection.add(new BaseXLabel("Server: "));
  connection.add(sname);
  connection.add(new BaseXLabel("Port: "));
  connection.add(sport);
  connection.add(new BaseXLabel("Username: "));
  connection.add(suser);
  connection.add(new BaseXLabel("Password: "));
  connection.add(spw);
  final BaseXButton connect=new BaseXButton("Connect",this);
  connection.add(new BaseXLabel("       "));
  connection.add(connect);
  connection.add(new BaseXLabel("       "));
  connection.add(new BaseXLabel("       "));
  connection.add(new BaseXLabel(""));
  connection.add(message);
  connect.addActionListener(new ActionListener(){
    @Override public void actionPerformed(    final ActionEvent e){
      try {
        final int p=Integer.parseInt(sport.getText());
        client=new ClientSession(sname.getText(),p,suser.getText(),new String(spw.getPassword()));
        title="Server - " + suser.getText() + "@"+ sname.getText()+ ":"+ sport.getText();
      }
 catch (      final IOException e1) {
        message.setText("Connection failed.");
      }
catch (      final NumberFormatException ne) {
        message.setText("Port has to be a number.");
      }
      if (client != null) {
        dialog.dispose();
        try {
          addComponents();
        }
 catch (        final BaseXException ex) {
          ex.printStackTrace();
        }
      }
    }
  }
);
  dialog.getContentPane().add(connection);
  dialog.setVisible(true);
}
