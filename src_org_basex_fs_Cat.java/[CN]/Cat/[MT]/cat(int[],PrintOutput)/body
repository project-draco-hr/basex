{
  for (  final int pre : nodes) {
    if (fs.isDir(pre))     continue;
    final IO io=IO.get(Token.string(fs.path(pre)));
    int numberLines=1;
    if (io.exists()) {
      final byte[] content=io.content();
      byte lastChar=0;
      for (int i=0; i < content.length; ++i) {
        final byte c=content[i];
        if (fnumberLines || fnumberNonBlankLines) {
          if (fnumberNonBlankLines && lastChar == 0 && c != LF) {
            out.print(numberLines++ + " ");
            out.print((char)c);
            lastChar=c;
          }
 else           if (fnumberLines && numberLines == 1) {
            if (c == LF) {
              out.print(numberLines++ + " ");
              out.print((char)c);
              out.print(numberLines++ + " ");
            }
 else {
              out.print(numberLines++ + " ");
              out.print((char)c);
            }
          }
 else           if (fnumberNonBlankLines && lastChar == LF && c != LF) {
            out.print(numberLines++ + " ");
            out.print((char)c);
            lastChar=c;
          }
 else           if (fnumberLines && c == LF && i < content.length - 1) {
            out.print((char)c);
            out.print(numberLines++ + " ");
          }
 else {
            out.print((char)c);
            lastChar=c;
          }
        }
 else {
          out.print((char)c);
        }
      }
      out.print(NL);
    }
 else {
      error(io,2);
    }
  }
}
