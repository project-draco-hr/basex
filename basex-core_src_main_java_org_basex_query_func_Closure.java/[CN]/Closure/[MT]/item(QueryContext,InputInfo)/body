{
  final FuncType ft=(FuncType)seqType().type;
  final Expr body;
  if (!nonLocal.isEmpty()) {
    final LinkedList<GFLWOR.Clause> cls=new LinkedList<>();
    for (    final Entry<Var,Expr> e : nonLocal.entrySet())     cls.add(new Let(e.getKey(),e.getValue().value(qc),false,ii));
    body=new GFLWOR(ii,cls,expr);
  }
 else {
    body=expr;
  }
  final Expr checked=ret == null ? body : new TypeCheck(sc,info,body,ret,true).optimize(qc,scope);
  return new FuncItem(sc,ann,null,args,ft,checked,scope.stackSize());
}
