{
  String msg=null;
  try {
    if (BUTTONCHANGE.equals(cmd)) {
      for (      final Proc p : permps)       if (!sess.execute(p))       msg=sess.info();
      permps.clear();
      setData();
    }
 else     if (BUTTONCREATE.equals(cmd)) {
      final String u=user.getText();
      final String p=new String(pass.getPassword());
      if (!sess.execute(new CreateUser(u,p)))       msg=sess.info();
      user.setText("");
      pass.setText("");
      setData();
    }
 else     if (BUTTONDROP.equals(cmd)) {
      final String u=userco1.getSelectedItem().toString();
      if (Dialog.confirm(this,Main.info(DRQUESTION,u))) {
        if (!sess.execute(new DropUser(u)))         msg=sess.info();
      }
      setData();
    }
 else     if (BUTTONALTER.equals(cmd)) {
      final String u=userco2.getSelectedItem().toString();
      final String p=new String(newpass.getPassword());
      if (!sess.execute(new AlterUser(u,p)))       msg=sess.info();
      newpass.setText("");
      setData();
    }
 else     if ("Remove".equals(cmd)) {
      gui.context.data.meta.users.remove(gui.context.data.meta.users.get(userco3.getSelectedItem().toString()));
      setData();
    }
  }
 catch (  final IOException ex) {
    Main.debug(ex);
    if (ex instanceof BindException)     msg=SERVERBIND;
 else     if (ex instanceof LoginException)     msg=SERVERLOGIN;
 else     msg=ex.getMessage();
  }
  final boolean valuname=user.getText().matches("[\\w]*");
  final boolean valpass=new String(pass.getPassword()).matches("[\\w]*");
  final boolean valnewpass=new String(newpass.getPassword()).matches("[\\w]*");
  boolean disname=!user.getText().equals(ADMIN);
  for (int i=0; i < userco1.getItemCount(); i++) {
    disname&=!user.getText().equals(userco1.getItemAt(i).toString());
  }
  boolean warn=true;
  if (msg != null) {
    warn=false;
  }
 else   if (!(valuname && valpass && valnewpass&& disname)) {
    msg=!disname ? Main.info(USERKNOWN,user.getText()) : Main.info(INVALID,!valuname ? SERVERUSER : SERVERPW);
  }
  info.setError(msg,warn);
  alter.setEnabled(valnewpass && newpass.getPassword().length != 0 && userco2.getSelectedIndex() != -1);
  create.setEnabled(valuname && valpass && disname&& !user.getText().isEmpty()&& pass.getPassword().length != 0);
  drop.setEnabled(userco1.getSelectedIndex() != -1);
  remove.setEnabled(userco3.getSelectedIndex() != -1);
  change.setEnabled(false);
}
