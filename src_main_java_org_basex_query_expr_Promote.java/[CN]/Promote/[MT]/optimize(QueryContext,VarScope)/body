{
  final SeqType argType=expr.type();
  if (argType.instanceOf(type))   return expr;
  if (argType.type.instanceOf(type.type)) {
    final SeqType.Occ occ=argType.occ.intersect(type.occ);
    if (occ == null)     throw Err.XPTYPE.thrw(info,expr,type,argType);
switch (occ) {
case ZERO:
      break;
case ONE:
    return Function.EXACTLY_ONE.get(expr);
case ZERO_ONE:
  return Function.ZERO_OR_ONE.get(expr);
case ONE_MORE:
return Function.ONE_OR_MORE.get(expr);
case ZERO_MORE:
throw Util.notexpected(this);
}
}
return this;
}
