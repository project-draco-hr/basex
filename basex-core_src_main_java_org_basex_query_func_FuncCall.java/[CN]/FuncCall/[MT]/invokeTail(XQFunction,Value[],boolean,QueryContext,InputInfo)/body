{
  final int calls=ctx.tailCalls, max=ctx.maxCalls;
  if (max >= 0 && calls >= max) {
    ctx.registerTailCall(fun,arg);
    return itm ? null : Empty.SEQ;
  }
  ctx.tailCalls++;
  final int fp=ctx.stack.enterFrame(fun.stackFrameSize());
  try {
    return itm ? fun.invItem(ctx,ii,arg) : fun.invValue(ctx,ii,arg);
  }
 catch (  final QueryException ex) {
    ex.add(ii);
    throw ex;
  }
 finally {
    ctx.tailCalls=calls;
    ctx.stack.exitFrame(fp);
  }
}
