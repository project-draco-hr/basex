{
  skipWs();
  final int ip=pos;
  final Ann ann=curr('%') ? annotations() : null;
  if (wsConsume(FUNCTION) && wsConsume(PAR1)) {
    if (ann != null) {
      if (ann.contains(Ann.Q_PRIVATE) || ann.contains(Ann.Q_PUBLIC))       throw error(INVISIBLE);
    }
    final HashMap<Var,Expr> nonLocal=new HashMap<>();
    pushVarContext(nonLocal);
    final Var[] args=paramList();
    wsCheck(PAR2);
    final SeqType type=optAsType();
    final Expr body=enclosed(NOFUNBODY);
    final VarScope scope=popVarContext();
    return new Closure(info(),type,args,body,ann,nonLocal,sc,scope);
  }
  if (ann != null)   throw error(NOANN);
  pos=ip;
  final QNm name=eQName(null,sc.funcNS);
  if (name != null && consume('#')) {
    if (keyword(name))     throw error(RESERVED,name.local());
    final Expr ex=numericLiteral(true);
    if (!(ex instanceof Int))     return ex;
    final long card=((ANum)ex).itr();
    final Expr lit=Functions.getLiteral(name,(int)card,ctx,sc,info());
    return lit != null ? lit : FuncLit.unknown(name,card,ctx,sc,info());
  }
  pos=ip;
  return null;
}
