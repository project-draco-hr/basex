{
  int i=localVars.size();
  Var var=null;
  while (--i >= 0) {
    var=localVars.get(i).stack.get(name);
    if (var != null)     break;
  }
  if (var == null)   return null;
  while (++i < localVars.size()) {
    final VarContext vctx=localVars.get(i);
    final Var local=vctx.addVar(var.name,var.type(),false);
    vctx.scope.closure().put(local,new VarRef(ii,var));
    var=local;
  }
  return new VarRef(ii,var);
}
