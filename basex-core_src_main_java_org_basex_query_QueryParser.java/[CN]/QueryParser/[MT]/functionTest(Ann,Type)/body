{
  if (wsConsume(ASTERISK)) {
    wsCheck(PAR2);
    return t;
  }
  if (t instanceof MapType) {
    final Type key=itemType().type;
    if (!key.instanceOf(AtomType.AAT))     throw error(MAPTAAT,key);
    wsCheck(COMMA);
    final MapType tp=MapType.get((AtomType)key,sequenceType());
    wsCheck(PAR2);
    return tp;
  }
  if (t instanceof ArrayType) {
    final ArrayType tp=ArrayType.get(sequenceType());
    wsCheck(PAR2);
    return tp;
  }
  SeqType[] args={};
  if (!wsConsume(PAR2)) {
    do     args=Array.add(args,sequenceType());
 while (wsConsume(COMMA));
    wsCheck(PAR2);
  }
  wsCheck(AS);
  final SeqType st=sequenceType();
  return FuncType.get(ann,st,args);
}
