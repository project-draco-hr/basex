{
  final int buffered=buf.remaining();
  if (rem < n - buffered)   throw new EOFException(f.getAbsolutePath());
  if (buffered < n) {
    if (n > buf.capacity())     return false;
    buf.compact();
    final int readBytes=fc.read(buf);
    if (readBytes + buffered < n || readBytes == -1)     throw new EOFException(f.getAbsolutePath());
    rem-=readBytes;
    buf.flip();
  }
  return true;
}
