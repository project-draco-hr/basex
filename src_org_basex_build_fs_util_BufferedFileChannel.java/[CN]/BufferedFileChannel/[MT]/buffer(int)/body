{
  final int buffered=buf.remaining();
  if (rem < n - buffered)   throw new EOFException(f.getAbsolutePath());
  if (buffered < n) {
    if (n > buf.capacity())     return false;
    buf.compact();
    rem-=fc.read(buf);
    buf.flip();
  }
  return true;
}
