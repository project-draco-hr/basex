{
  final Expr fn=expr[expr.length - 1];
  final FItem f=(FItem)checkType(fn.item(ctx,ii),FuncType.ANY_FUN);
  final FuncType ft=(FuncType)f.type;
  final int arity=expr.length + holes.length - 1;
  if (f.arity() != arity)   throw Err.INVARITY.thrw(ii,f,arity);
  final Expr[] args=new Expr[arity];
  final VarScope scp=new VarScope();
  final Var[] vars=new Var[holes.length];
  int p=-1;
  for (int i=0; i < holes.length; i++) {
    while (++p < holes[i])     args[p]=expr[p - i].value(ctx);
    vars[i]=scp.uniqueVar(ctx,ft.args[p],true);
    args[p]=new VarRef(info,vars[i]);
  }
  while (++p < args.length)   args[p]=expr[p - holes.length].value(ctx);
  final Expr call=new DynFuncCall(info,f,args).optimize(ctx,scp);
  final InlineFunc i=new InlineFunc(info,ft.ret,vars,call,new Ann(),ctx.sc,scp);
  return i.optimize(ctx,null).item(ctx,ii);
}
