{
  final XQuery query=new XQuery("let $r := serialize-json((0,0,map{false():=map{false():=\"ok\"}}), \n" + "           map{\"fallback\":=function($v){\n" + "                 if ($v instance of map(xs:boolean, item()*)) \n"+ "                 then map:new(for $k in map:keys($v) return map:entry(string($k), map:get($v, $k)))  \n"+ "                 else $v}})\n"+ "        return translate($r,' \t\n"+ "\r', '')",ctx);
  final QT3Result res=result(query);
  result=res;
  test(assertStringValue(false,"[0,0,{\"false\":{\"false\":\"ok\"}}]"));
}
