{
  final XQuery query=new XQuery("let $r := serialize-json(map{\"a\":=doc($uri)}, map{\"fallback\":=function($v){serialize($v)}})\n" + "        return translate($r,' \t\n" + "\r', '')",ctx);
  try {
    query.addDocument("http://www.w3.org/fots/serialize-json/doc001.xml",file("fn/serialize-json/doc001.xml"));
    query.bind("uri",new XQuery("'http://www.w3.org/fots/serialize-json/doc001.xml'",ctx).value());
    result=new QT3Result(query.value());
  }
 catch (  final Throwable trw) {
    result=new QT3Result(trw);
  }
 finally {
    query.close();
  }
  test(assertStringValue(false,"{\"a\":\"<?xmlversion=\\\"1.0\\\"encoding=\\\"UTF-8\\\"?><a>text</a>\"}"));
}
