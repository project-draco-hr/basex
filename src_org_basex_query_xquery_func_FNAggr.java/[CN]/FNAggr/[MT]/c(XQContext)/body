{
switch (func) {
case AVG:
    return args[0].e() ? Seq.EMPTY : this;
case COUNT:
  if (args[0].i())   return Itr.get(1);
if (!(args[0] instanceof Path)) return this;
final Path path=(Path)args[0];
if (path.expr.length != 1) return this;
if (!(path.expr[0] instanceof Step)) return this;
final Step s=(Step)path.expr[0];
if (s.axis != Axis.DESC) return this;
if (s.test.kind != Test.Kind.STD) return this;
if (ctx.item == null) return this;
if (ctx.item.type != Type.DOC) return this;
if (!(ctx.item instanceof DNode)) return this;
final Data data=((DNode)ctx.item).data;
if (!data.tags.uptodate) return this;
final byte[] nm=((NameTest)s.test).ln;
final int id=data.tagID(nm);
final int c=data.tags.counter(id);
return Itr.get(c);
default :
return this;
}
}
