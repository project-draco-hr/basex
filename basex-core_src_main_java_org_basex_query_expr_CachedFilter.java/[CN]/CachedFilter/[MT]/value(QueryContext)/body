{
  Value val=root.value(qc);
  final Value cv=qc.value;
  final long cs=qc.size, cp=qc.pos;
  try {
    final ItemList buffer=new ItemList();
    Expr pred=preds[0];
    long vs=val.size();
    qc.size=vs;
    qc.pos=1;
    final boolean scoring=qc.scoring;
    for (int s=0; s < vs; s++) {
      final Item item=val.itemAt(s);
      qc.value=item;
      final Item test=pred.test(qc,info);
      if (test != null) {
        if (scoring)         item.score(test.score());
        buffer.add(item);
      }
      qc.pos++;
    }
    val=null;
    final int pl=preds.length;
    for (int i=1; i < pl; i++) {
      vs=buffer.size();
      pred=preds[i];
      qc.size=vs;
      qc.pos=1;
      int c=0;
      for (int s=0; s < vs; ++s) {
        final Item item=buffer.get(s);
        qc.value=item;
        final Item test=pred.test(qc,info);
        if (test != null) {
          if (scoring)           item.score(test.score());
          buffer.set(c++,item);
        }
        qc.pos++;
      }
      buffer.size(c);
    }
    return buffer.value();
  }
  finally {
    qc.value=cv;
    qc.size=cs;
    qc.pos=cp;
  }
}
