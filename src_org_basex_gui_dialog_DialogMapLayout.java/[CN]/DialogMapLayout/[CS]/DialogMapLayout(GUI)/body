{
  super(main,MAPLAYOUTTITLE,false);
  final BaseXBack p=new BaseXBack();
  p.setLayout(new TableLayout(9,1,0,5));
  choice=new BaseXListChooser(this,MAPLAYOUTCHOICE,HELPMAPLAYOUT);
  choice.setSize(200,110);
  choice.setIndex(GUIProp.maplayout);
  p.add(choice);
  final boolean fs=gui.context.data().fs != null;
  atts=new BaseXCheckBox(MAPATTS,HELPMAPATTS,GUIProp.mapatts,this);
  if (fs)   atts.setEnabled(false);
  p.add(atts);
  BaseXBack tmpback=new BaseXBack();
  tmpback.setLayout(new TableLayout(1,2,3,5));
  BaseXLabel label=new BaseXLabel(MAPPROPALGO);
  tmpback.add(label);
  propalgo=new BaseXCombo(new String[]{"SplitLayout","SliceAndDice Layout","SquarifiedLayout","StripLayout"},HELPMODE,false);
  propalgo.setSelectedIndex(GUIProp.mapalgo);
  propalgo.addActionListener(new ActionListener(){
    public void actionPerformed(    final ActionEvent e){
      final int s=propalgo.getSelectedIndex();
      if (s == GUIProp.mapalgo || !propalgo.isEnabled())       return;
      action(null);
    }
  }
);
  tmpback.add(propalgo);
  p.add(tmpback);
  propLabel=new BaseXLabel(MAPPROP);
  p.add(propLabel);
  prop=new BaseXSlider(gui,-234,248,GUIProp.mapprop,HELPMAPALIGN,this);
  BaseXLayout.setWidth(prop,p.getPreferredSize().width);
  p.add(prop);
  set(p,BorderLayout.CENTER);
  sizeLabel=new BaseXLabel(MAPSIZE);
  sizeSlider=new BaseXSlider(gui,0,100,GUIProp.sizep,HELPMAPSIZE,this);
  BaseXLayout.setWidth(sizeSlider,p.getPreferredSize().width);
  if (fs) {
    p.add(sizeLabel);
    p.add(sizeSlider);
  }
  set(p,BorderLayout.CENTER);
  finish(GUIProp.maplayoutloc);
  action(null);
}
