{
  checkWrite(ctx);
  final Data data=data(0,ctx);
  final byte[] trg=path(checkStr(expr[1],ctx));
  final Item doc=checkItem(expr[2],ctx);
  final IntList old=data.doc(string(trg));
  if (old.size() > 0) {
    final int pre=old.get(0);
    if (old.size() > 1 || !eq(data.text(pre,true),trg))     DOCTRGMULT.thrw(input);
    ctx.updates.add(new DeleteNode(pre,data,input),ctx);
  }
  final byte[] trgname;
  final byte[] trgpath;
  final int p=lastIndexOf(trg,'/');
  if (p < 0) {
    trgname=trg;
    trgpath=null;
  }
 else {
    trgname=subtoken(trg,p + 1);
    trgpath=subtoken(trg,0,p);
  }
  final ArrayList<Item> docs=new ArrayList<Item>(1);
  docs.add(doc);
  final Add add=new Add(data,input,docs,trgname,trgpath,ctx.context);
  ctx.updates.add(add,ctx);
  return null;
}
