{
  checkWrite(ctx);
  final Data data=data(0,ctx);
  final String path=path(1,ctx);
  final Item doc=checkItem(expr[2],ctx);
  final int pre=data.doc(path);
  if (pre != -1) {
    if (data.docs(path).size() != 1)     DOCTRGMULT.thrw(input);
    ctx.updates.add(new DeleteNode(pre,data,input),ctx);
  }
  final TokenList raw=Delete.files(data,path);
  ctx.updates.add(new DBDelete(data,raw,input),ctx);
  ctx.updates.add(new DBAdd(data,input,doc,path,ctx.context),ctx);
  final IOFile file=data.meta.binary(path);
  if (file != null && file.exists() && !file.isDir()) {
    final byte[] val=checkBin(doc,ctx);
    ctx.updates.add(new DBStore(data,token(path),val,input),ctx);
  }
  return null;
}
