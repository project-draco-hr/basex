{
  if (is == null)   return null;
  final String id=is.getSystemId();
  if (!Prop.gui || is.getByteStream() != null || id == null || id.isEmpty())   return is;
  length=IO.get(id).length();
  final FileInputStream fis=new FileInputStream(io.path()){
    @Override public int read(    final byte[] b,    final int off,    final int len) throws IOException {
      final int i=super.read(b,off,len);
      for (int o=off; o < len; o++)       if (b[off + o] == '\n')       line++;
      counter+=i;
      return i;
    }
  }
;
  final InputSource input=new InputSource(fis);
  source.setInputSource(input);
  return input;
}
