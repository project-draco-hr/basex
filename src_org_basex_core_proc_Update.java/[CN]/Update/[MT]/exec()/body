{
  final boolean gui=args[args.length - 1] == null;
  final Data data=context.data();
  if (data.ns.size() != 0)   return error(UPDATENS);
  final CmdUpdate type=getType();
  final Nodes nodes=gui ? context.marked() : query(args[type == CmdUpdate.PI || type == CmdUpdate.ATTRIBUTE ? 2 : 1],null);
  if (nodes == null)   return false;
  boolean ok=false;
switch (type) {
case ATTRIBUTE:
    ok=attr(data,nodes);
  break;
default :
ok=node(data,nodes);
break;
}
if (!ok) return false;
data.flush();
context.update();
return Prop.info ? info(UPDATEINFO,nodes.size(),perf.getTimer()) : true;
}
