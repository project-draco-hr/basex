{
  final int tl=term.length;
  if (tl == 0 && text)   return test == null ? BasicNodeIter.EMPTY : scanEmpty();
  final Data data=ictx.data;
  final IndexIterator ii=(text ? data.meta.textindex : tokenize ? data.meta.tokenindex : data.meta.attrindex) && tl > 0 && tl <= data.meta.maxlen ? data.iter(new StringToken(text,term)) : scan(term);
  final int kind=text ? Data.TEXT : Data.ATTR;
  final DBNode tmp=new DBNode(data,0,test == null ? kind : Data.ELEM);
  return new BasicNodeIter(){
    @Override public ANode next(){
      while (ii.more()) {
        if (test == null) {
          tmp.pre(ii.pre());
        }
 else {
          tmp.pre(data.parent(ii.pre(),kind));
          if (!test.eq(tmp))           continue;
        }
        return tmp.finish();
      }
      return null;
    }
  }
;
}
