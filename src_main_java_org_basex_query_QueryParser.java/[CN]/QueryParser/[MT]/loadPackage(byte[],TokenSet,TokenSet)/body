{
  if (pkgsLoaded.id(pkgName) != 0)   return;
  final byte[] pkgDir=ctx.context.repo.pkgDict().get(pkgName);
  if (pkgDir == null)   error(PKGNOTINSTALLED);
  final File pkgDesc=new File(new File(ctx.context.prop.get(Prop.REPOPATH),string(pkgDir)),PkgText.DESCRIPTOR);
  if (!pkgDesc.exists())   Util.errln(PkgText.NOTEXP,string(pkgName));
  final Package pkg=new PkgParser(ctx.context,input()).parse(new IOFile(pkgDesc));
  final File jarDesc=new File(new File(ctx.context.prop.get(Prop.REPOPATH),string(pkgDir)),PkgText.JARDESC);
  if (jarDesc.exists())   loadJars(jarDesc,pkgDir,pkg.abbrev);
  if (pkg.dep.size() != 0)   pkgsToLoad.add(pkgName);
  for (  final Dependency d : pkg.dep) {
    if (d.pkg != null) {
      final byte[] depPkg=new PkgValidator(ctx.context,input()).getDepPkg(d);
      if (depPkg == null) {
        error(PKGNOTINSTALLED,string(d.pkg));
      }
 else {
        if (pkgsToLoad.id(depPkg) != 0)         error(CIRCMODULE);
        loadPackage(depPkg,pkgsToLoad,pkgsLoaded);
      }
    }
  }
  for (  final Component comp : pkg.comps) {
    final byte[] path=token(new File(new File(new File(ctx.context.prop.get(Prop.REPOPATH),string(pkgDir)),string(pkg.abbrev)),string(comp.file)).toString());
    module(path,Uri.uri(comp.uri));
  }
  if (pkgsToLoad.id(pkgName) != 0)   pkgsToLoad.delete(pkgName);
  pkgsLoaded.add(pkgName);
}
