{
  skipWS();
  final InputInfo ii=input();
  final QNm name=new QNm(qName(FUNCNAME));
  name.uri(name.ns() ? ctx.ns.uri(name.pref(),false,input()) : ctx.nsFunc);
  if (module != null && !name.uri().eq(module.uri()))   error(MODNS,name);
  wsCheck(PAR1);
  final int s=ctx.vars.size();
  final Var[] args=paramList();
  wsCheck(PAR2);
  final UserFunc func=new UserFunc(ii,name,args,optAsType(),true);
  func.updating=up;
  ctx.funcs.add(func,this);
  if (!wsConsumeWs(EXTERNAL))   func.expr=enclosed(NOFUNBODY);
  ctx.vars.reset(s);
}
