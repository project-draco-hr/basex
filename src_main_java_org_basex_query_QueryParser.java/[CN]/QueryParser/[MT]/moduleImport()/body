{
  byte[] ns=EMPTY;
  if (wsConsumeWs(NSPACE)) {
    ns=ncName(XPNAME);
    wsCheck(IS);
    if (ctx.sc.ns.staticURI(ns) != null)     error(DUPLNSDECL,ns);
  }
  final byte[] uri=trim(stringLiteral());
  if (uri.length == 0)   error(NSMODURI);
  if (!Uri.uri(uri).isValid())   error(INVURI,uri);
  if (modules.contains(uri))   error(DUPLMODULE,uri);
  modules.add(uri);
  if (ns != EMPTY)   ctx.sc.ns.add(ns,uri,info());
  try {
    if (wsConsumeWs(AT)) {
      do {
        module(stringLiteral(),uri);
      }
 while (wsConsumeWs(COMMA));
      return;
    }
    final byte[] path=ctx.modDeclared.get(uri);
    if (path != null) {
      module(path,uri);
      return;
    }
    for (    final byte[] u : Function.URIS.values())     if (eq(uri,u))     return;
    if (ctx.modules.addImport(uri,info(),this))     return;
    error(NOMODULE,uri);
  }
 catch (  final StackOverflowError ex) {
    Util.debug(ex);
    error(CIRCMODULE);
  }
}
