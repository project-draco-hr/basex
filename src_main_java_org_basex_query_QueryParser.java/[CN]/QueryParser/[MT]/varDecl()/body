{
  final Var v=typedVar();
  if (module != null && !v.name.uri().eq(module.uri()))   error(MODNS,v);
  final Var old=ctx.vars.get(v.name);
  if (old != null && old.declared)   error(VARDEFINE,old);
  (old != null ? old : v).declared=true;
  if (wsConsumeWs(EXTERNAL)) {
    if (old != null && v.type != null)     old.reset(v.type);
    if (ctx.xquery3 && wsConsumeWs(ASSIGN)) {
      v.bind(check(single(),NOVARDECL),ctx);
    }
  }
 else {
    wsCheck(ASSIGN);
    v.bind(check(single(),NOVARDECL),ctx);
  }
  if (old == null)   ctx.vars.setGlobal(v);
}
