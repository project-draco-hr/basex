{
  file(ctx.sc.baseIO(),ctx.context);
  checkValidChars();
  try {
    versionDecl();
    String doc=xqdoc.toString();
    wsCheck(MODULE);
    wsCheck(NSPACE);
    skipWS();
    final byte[] pref=ncName(NONAME);
    wsCheck(IS);
    final byte[] uri=stringLiteral();
    if (uri.length == 0)     error(NSMODURI);
    module=new QNm(pref,uri);
    ctx.sc.ns.add(pref,uri,info());
    namespaces.add(pref,uri);
    wsCheck(";");
    skipWS();
    if (doc.equals(xqdoc.toString()))     xqdoc.setLength(0);
 else     doc=xqdoc.toString();
    prolog1();
    prolog2();
    finish(null,check);
    return new LibraryModule(module,doc.equals(xqdoc.toString()) ? null : new StringBuilder(doc));
  }
 catch (  final QueryException ex) {
    mark();
    ex.pos(this);
    throw ex;
  }
}
