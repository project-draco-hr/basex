{
  Expr[] pragmas=pragma();
  if (pragmas.length > 0) {
    check(BRACE1);
    final FTExpr e=ftSelection(true);
    check(BRACE2);
    return new FTExtensionSelection(pragmas,e);
  }
  if (consumeWS(PAR1)) {
    final FTExpr e=ftSelection(false);
    check(PAR2);
    return e;
  }
  skipWS();
  final Expr e=curr('{') ? enclosed(NOENCLEXPR) : quote(curr()) ? literal() : null;
  if (e == null)   error(prg ? NOPRAGMA : NOENCLEXPR);
  FTMode mode=FTMode.ANY;
  if (consumeWS(ALL)) {
    mode=consumeWS(WORDS) ? FTMode.ALLWORDS : FTMode.ALL;
  }
 else   if (consumeWS(ANY)) {
    mode=consumeWS(WORD) ? FTMode.ANYWORD : FTMode.ANY;
  }
 else   if (consumeWS(PHRASE)) {
    mode=FTMode.PHRASE;
  }
  Expr[] occ=null;
  if (consumeWS(OCCURS)) {
    occ=ftRange();
    if (occ == null)     error(FTRANGE);
    check(TIMES);
  }
  return new FTWords(e,mode,occ);
}
