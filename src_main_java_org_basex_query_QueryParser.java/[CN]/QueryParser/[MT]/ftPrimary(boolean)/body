{
  final Expr[] pragmas=pragma();
  if (pragmas.length != 0) {
    wsCheck(BRACE1);
    final FTExpr e=ftSelection(true);
    wsCheck(BRACE2);
    return new FTExtensionSelection(input(),pragmas,e);
  }
  if (wsConsumeWs(PAR1)) {
    final FTExpr e=ftSelection(false);
    wsCheck(PAR2);
    return e;
  }
  skipWS();
  final Expr e=curr('{') ? enclosed(NOENCLEXPR) : quote(curr()) ? literal() : null;
  if (e == null)   error(prg ? NOPRAGMA : NOENCLEXPR);
  FTMode mode=FTMode.M_ANY;
  if (wsConsumeWs(ALL)) {
    mode=wsConsumeWs(WORDS) ? FTMode.M_ALLWORDS : FTMode.M_ALL;
  }
 else   if (wsConsumeWs(ANY)) {
    mode=wsConsumeWs(WORD) ? FTMode.M_ANYWORD : FTMode.M_ANY;
  }
 else   if (wsConsumeWs(PHRASE)) {
    mode=FTMode.M_PHRASE;
  }
  Expr[] occ=null;
  if (wsConsumeWs(OCCURS)) {
    occ=ftRange();
    if (occ == null)     error(FTRANGE);
    wsCheck(TIMES);
  }
  return new FTWords(input(),e,mode,occ);
}
