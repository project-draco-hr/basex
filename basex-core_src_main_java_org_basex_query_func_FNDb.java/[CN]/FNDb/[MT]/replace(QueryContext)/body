{
  final Data data=checkData(ctx);
  final String path=path(1,ctx);
  final NewInput input=checkInput(checkItem(expr[2],ctx),token(path));
  final Options opts=checkOptions(3,Q_OPTIONS,new Options(),ctx);
  final Resources res=data.resources;
  final IntList pre=res.docs(path,true);
  for (int p=0; p < pre.size(); p++) {
    ctx.updates.add(new DeleteNode(pre.get(p),data,info),ctx);
  }
  final IOFile bin=data.inMemory() ? null : data.meta.binary(path);
  if (bin != null) {
    if (bin.exists()) {
      if (bin.isDir())       throw BXDB_DIR.get(info,path);
      ctx.updates.add(new DBStore(data,path,input,info),ctx);
    }
 else {
      ctx.updates.add(new DBAdd(data,input,opts,ctx,info),ctx);
    }
  }
  return null;
}
