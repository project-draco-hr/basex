{
  final Data data=checkData(qc);
  final String path=path(1,qc);
  final NewInput input=checkInput(checkItem(exprs[2],qc),token(path));
  final Options opts=checkOptions(3,Q_OPTIONS,new Options(),qc);
  final Resources res=data.resources;
  final IntList pre=res.docs(path,true);
  final Updates updates=qc.resources.updates();
  for (int p=0; p < pre.size(); p++) {
    updates.add(new DeleteNode(pre.get(p),data,info),qc);
  }
  final IOFile bin=data.inMemory() ? null : data.meta.binary(path);
  if (bin != null) {
    if (bin.exists()) {
      if (bin.isDir())       throw BXDB_DIR.get(info,path);
      updates.add(new DBStore(data,path,input,info),qc);
    }
 else {
      updates.add(new DBAdd(data,input,opts,qc,info),qc);
    }
  }
  return null;
}
