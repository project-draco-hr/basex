{
  final int l=stack[spos - 1];
  if (z[l + 1] != 0) {
    int n=z[l + 1];
    push(n);
    while (z[n] != 0) {
      n=z[n];
      push(n);
    }
  }
 else {
    int c=l;
    int n=ppeek();
    while (n != 0 && c == z[n + 1]) {
      c=n;
      n=ppeek();
    }
  }
  return l >>> 1;
}
