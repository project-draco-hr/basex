{
  builder.startElem(TEXT,atts);
  final BufferInput bi=new BufferInput(file.path());
  bi.encoding();
  final TokenBuilder tb=new TokenBuilder();
  while (true) {
    final int ch=bi.readChar();
    if (ch == 0)     break;
    if (ch == 0x0A && lines) {
      builder.startElem(LINE,atts);
      builder.text(tb);
      builder.endElem(LINE);
      tb.reset();
    }
 else     if (ch != 0x0D) {
      tb.add(ch);
    }
  }
  bi.close();
  if (!lines)   builder.text(tb);
  builder.endElem(TEXT);
}
