{
  super.paintComponent(g);
  pars.reset();
  init(g,scroll.pos());
  int oldL=0;
  while (more(g)) {
    if (line != oldL && y >= 0) {
      drawLineNumber(g);
      oldL=line;
    }
    write(g);
  }
  if (x == offset)   markLine(g);
  if (line != oldL)   drawLineNumber(g);
  wordWidth=0;
  final int s=text.size();
  if (cursor && s == text.getCaret())   drawCursor(g,x);
  if (s == text.error())   drawError(g);
  drawLinesSep(g);
}
