{
  final WebDAVQuery query=new WebDAVQuery(_DB_LIST_DETAILS.args("$db","$path") + " ! (" + "string(@raw), string(@content-type), string(@modified-date), string(@size),"+ SUBSTRING_AFTER.args("text()","$path")+ ')');
  query.bind("db",db);
  query.bind("path",path);
  final StringList result=execute(query);
  final int rs=result.size();
  final HashSet<String> paths=new HashSet<>();
  final List<T> ch=new ArrayList<>(rs / 5);
  for (int r=0; r < rs; r+=5) {
    final boolean raw=Boolean.parseBoolean(result.get(r));
    final MediaType ctype=new MediaType(result.get(r + 1));
    final long mod=DateTime.parse(result.get(r + 2));
    final Long size=raw ? Long.valueOf(result.get(r + 3)) : null;
    final String pth=stripLeadingSlash(result.get(r + 4));
    final int ix=pth.indexOf(SEP);
    if (ix < 0) {
      if (!pth.equals(DUMMY))       ch.add(factory.file(this,new ResourceMetaData(db,path + SEP + pth,mod,raw,ctype,size)));
    }
 else {
      final String dir=path + SEP + pth.substring(0,ix);
      if (paths.add(dir))       ch.add(factory.folder(this,new ResourceMetaData(db,dir,mod)));
    }
  }
  return ch;
}
