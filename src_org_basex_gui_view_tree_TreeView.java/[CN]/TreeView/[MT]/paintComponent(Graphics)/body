{
  if (opened == null) {
    refreshInit();
    return;
  }
  super.paintComponent(g);
  if (opened == null)   return;
  BaseXLayout.antiAlias(g);
  painting=true;
  startY=-scroll.pos();
  totalW=getWidth() - (treeH > getHeight() ? scroll.getWidth() : 0);
  mpos=0;
  final TreeIterator it=new TreeIterator(this,startY + 5,getHeight());
  final Data data=GUI.context.data();
  while (it.more()) {
    final int kind=data.kind(it.pre);
    final boolean elem=kind == Data.ELEM || kind == Data.DOC;
    final int x=8 + it.level * (lineH >> 2) + (elem ? lineH : boxW);
    drawString(g,it.pre,x,it.y + boxW);
  }
  painting=false;
}
