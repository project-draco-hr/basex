{
  final Data data=gui.context.data();
  final int l=parentList.size;
  final IntList temp=new IntList();
  int sumNodeSize=0;
  int nCount=0;
  for (int i=0; i < l; i++) {
    final int p=parentList.list[i];
    if (p == -1) {
      continue;
    }
    final ChildIterator iterator=new ChildIterator(data,p);
    if (i > 0) {
      temp.add(-1);
    }
    while (iterator.more()) {
      final int pre=iterator.next();
      if (!onlyElementNodes || data.kind(pre) == Data.ELEM) {
        temp.add(pre);
        ++nCount;
      }
      sumNodeSize+=data.size(pre,data.kind(pre));
    }
  }
  nodeCount=nCount;
  parentList=temp;
  sumNodeSizeInLine=sumNodeSize;
}
