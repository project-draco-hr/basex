{
  if (w < minSpace)   return;
  final Data data=gui.context.data();
  String s="";
switch (nodeKind) {
case Data.ELEM:
    s=Token.string(data.tag(pre));
  g.setColor(Color.BLACK);
break;
case Data.COMM:
s=Token.string(data.text(pre));
g.setColor(Color.GREEN);
break;
case Data.PI:
s=Token.string(data.text(pre));
g.setColor(Color.PINK);
break;
case Data.DOC:
s=Token.string(data.text(pre));
g.setColor(Color.BLACK);
break;
default :
s=Token.string(data.text(pre));
g.setColor(textColor);
}
Token.string(data.text(pre));
int textWidth=0;
while ((textWidth=BaseXLayout.width(g,s)) + 4 > w) {
s=s.substring(0,s.length() / 2).concat("*");
}
g.drawString(s,boxMiddle - textWidth / 2,y + fontHeight - 2);
}
