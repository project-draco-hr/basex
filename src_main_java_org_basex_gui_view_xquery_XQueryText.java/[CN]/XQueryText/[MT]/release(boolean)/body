{
  final byte[] qu=getText();
  final boolean module=isModule(qu);
  final boolean diff=!Token.eq(qu,last);
  view.modified(view.modified || diff,false);
  if (force || gui.prop.is(GUIProp.EXECRT) && !module && diff) {
    query(qu,true);
  }
 else {
    try {
      last=qu;
      final String xq=qu.length == 0 ? "." : Token.string(qu);
      final QueryContext ctx=new QueryContext(gui.context);
      if (module)       ctx.module(xq);
 else       ctx.parse(xq);
      view.info("",true);
    }
 catch (    final QueryException ex) {
      view.info(ex.getMessage(),false);
    }
  }
}
