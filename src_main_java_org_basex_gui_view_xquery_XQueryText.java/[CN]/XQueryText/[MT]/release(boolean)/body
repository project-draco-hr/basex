{
  final byte[] qu=getText();
  final boolean module=module(qu);
  final boolean eq=Token.eq(qu,last);
  if (eq && !force)   return;
  view.modified(view.modified || !eq,false);
  view.pos.setText(pos());
  if (force || gui.gprop.is(GUIProp.EXECRT) && !module) {
    view.waitInfo();
    query(qu,true);
  }
 else {
    try {
      last=qu;
      final String xq=qu.length == 0 ? "." : Token.string(qu);
      final QueryContext ctx=new QueryContext(gui.context);
      if (module)       ctx.module(xq);
 else       ctx.parse(xq);
      view.info("",true);
    }
 catch (    final QueryException ex) {
      view.info(ex.getMessage(),false);
    }
  }
}
