{
  String plan=null;
  try {
    try (QueryProcessor qp=new QueryProcessor(query,context)){
      final String string=qp.execute().serialize();
      if (result != null)       assertEquals(result,normNL(string));
      plan=qp.plan().serialize().toString();
    }
     try (QueryProcessor qp=new QueryProcessor(plan + "/descendant-or-self::*" + "[self::"+ Util.className(ValueAccess.class)+ "|self::"+ Util.className(FTIndexAccess.class)+ ']',context)){
      final String string=qp.execute().serialize();
      assertFalse("No index used:\n- Query: " + query + "\n- Plan: "+ plan+ "\n- "+ qp.info().trim(),string.isEmpty());
    }
   }
 catch (  final QueryException ex) {
    fail(Util.message(ex) + "\n- Query: " + query+ "\n- Plan: "+ plan);
  }
catch (  final IOException ex) {
    fail(Util.message(ex));
  }
}
