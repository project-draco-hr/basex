{
  super.comp(ctx);
  final int ar=expr.length - 1;
  final Expr f=expr[ar];
  final Type t=f.type().type;
  if (t instanceof FuncType) {
    final FuncType ft=(FuncType)t;
    if (ft.args != null && ft.args.length != ar)     throw INVARITY.thrw(input,f,ar);
    if (ft.ret != null)     type=ft.ret;
  }
  if (values() && f instanceof Map)   return optPre(value(ctx),ctx);
  return this;
}
