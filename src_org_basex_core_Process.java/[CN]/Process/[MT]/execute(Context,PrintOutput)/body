{
  perf=new Performance();
  context=ctx;
  prop=ctx.prop;
  final Data data=context.data();
  if (data()) {
    if (data == null)     return error(PROCNODB);
    if (write() && (prop.is(Prop.TABLEMEM) || prop.is(Prop.MAINMEM)))     return error(PROCMM);
  }
  User user=context.user;
  CmdPerm perm=null;
  if (admin() && !user.perm(User.ADMIN)) {
    perm=CmdPerm.ADMIN;
  }
 else   if (create() && !user.perm(User.CREATE)) {
    perm=CmdPerm.CREATE;
  }
 else {
    if (data != null) {
      final User us=data.meta.users.get(user.name);
      if (us != null)       user=us;
    }
    if (write() && !user.perm(User.WRITE)) {
      perm=CmdPerm.WRITE;
    }
 else     if (read() && !user.perm(User.READ)) {
      perm=CmdPerm.READ;
    }
  }
  if (perm != null)   return error(PERMNO,perm);
  try {
    return exec(out);
  }
 catch (  final Throwable ex) {
    ex.printStackTrace();
    if (ex instanceof OutOfMemoryError) {
      Performance.gc(2);
      return error(PROCOUTMEM);
    }
    return error(PROCERR,this,ex.toString());
  }
}
