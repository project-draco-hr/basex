{
  context=ctx;
  if (data() && context.data() == null) {
    return error(PROCNODB);
  }
  if (context.data() != null && context.data().isLocked()) {
    new Thread(){
      @Override public void run(){
        while (context.data().isLocked()) {
          Performance.sleep(1000);
        }
      }
    }
;
  }
  if (updating()) {
    if (Prop.mainmem || Prop.onthefly)     return error(PROCMM);
    if (context.data().ns.size() != 0)     return error(UPDATENS);
  }
  try {
    if (context.data() != null) {
      context.data().setLocked(true);
    }
    final boolean ok=exec();
    if (updating())     context.update();
    if (context.data() != null) {
      context.data().setLocked(false);
    }
    return ok;
  }
 catch (  final Throwable ex) {
    ex.printStackTrace();
    if (ex instanceof OutOfMemoryError) {
      Performance.gc(2);
      return error(PROCOUTMEM);
    }
    return error(PROCERR,this,ex.toString());
  }
}
