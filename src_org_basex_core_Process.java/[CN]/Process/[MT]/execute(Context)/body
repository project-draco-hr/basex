{
  context=ctx;
  final Data data=context.data();
  if (data() && data == null)   return error(PROCNODB);
  if (data != null) {
    while (data.getLock() == 2)     Performance.sleep(50);
    if (updating()) {
      if (Prop.tablemem || Prop.mainmem)       return error(PROCMM);
      while (data.getLock() != 0)       Performance.sleep(50);
    }
  }
  try {
    if (data != null)     data.setLock(updating() ? 2 : 1);
    final boolean ok=exec();
    if (data != null && !printing())     data.setLock(0);
    return ok;
  }
 catch (  final Throwable ex) {
    if (data != null)     data.setLock(0);
    ex.printStackTrace();
    if (ex instanceof OutOfMemoryError) {
      Performance.gc(2);
      return error(PROCOUTMEM);
    }
    return error(PROCERR,this,ex.toString());
  }
}
