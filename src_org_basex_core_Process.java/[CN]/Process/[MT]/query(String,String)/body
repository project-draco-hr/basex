{
  try {
    final XPathProcessor qu=new XPathProcessor(q == null ? "" : q);
    progress(qu);
    final Nodes nodes=qu.queryNodes(context.current());
    if (err != null) {
      final Data data=context.data();
      for (int i=nodes.size - 1; i >= 0; i--) {
        if (data.kind(nodes.pre[i]) != Data.ELEM) {
          error(err);
          return null;
        }
      }
    }
    return nodes;
  }
 catch (  final QueryException ex) {
    BaseX.debug(ex);
    error(ex.getMessage());
    return null;
  }
}
