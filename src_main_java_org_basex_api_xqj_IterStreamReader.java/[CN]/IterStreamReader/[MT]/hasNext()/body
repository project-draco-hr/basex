{
  if (next)   return true;
  next=true;
  atts=null;
  try {
    if (read != null) {
      if (read.hasNext()) {
        read.next();
      }
 else {
        read=null;
        kind=END_DOCUMENT;
        return true;
      }
    }
    if (read == null) {
      final Item it=result.next();
      if (it == null)       return false;
      if (!(it instanceof ANode))       throw new XMLStreamException();
      node=(ANode)it;
      read=it instanceof DBNode ? new DBNodeReader() : new FNodeReader();
    }
  }
 catch (  final QueryException ex) {
    throw new XMLStreamException(ex);
  }
  return node != null;
}
