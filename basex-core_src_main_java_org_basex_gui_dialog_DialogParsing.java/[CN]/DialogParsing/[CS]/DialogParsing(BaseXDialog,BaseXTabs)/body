{
  main=new BaseXBack(new TableLayout(2,1)).border(8);
  gui=d.gui;
  tabs=t;
  label=new BaseXLabel(" ").border(0,0,12,0).large();
  final MainOptions opts=gui.context.options;
  try {
    topts=new TextOptions(opts.get(MainOptions.TEXTPARSER));
  }
 catch (  final IOException ex) {
    topts=new TextOptions();
  }
  try {
    copts=new CsvOptions(opts.get(MainOptions.CSVPARSER));
  }
 catch (  final IOException ex) {
    copts=new CsvOptions();
  }
  try {
    jopts=new JsonOptions(opts.get(MainOptions.JSONPARSER));
  }
 catch (  final IOException ex) {
    jopts=new JsonOptions();
  }
  intparse=new BaseXCheckBox(INT_PARSER,opts.get(MainOptions.INTPARSE),0,d);
  dtd=new BaseXCheckBox(PARSE_DTDS,opts.get(MainOptions.DTD),0,d);
  chopWS=new BaseXCheckBox(CHOP_WS,opts.get(MainOptions.CHOP),0,d);
  stripNS=new BaseXCheckBox(STRIP_NS,opts.get(MainOptions.STRIPNS),0,d);
  cfile=new BaseXTextField(opts.get(MainOptions.CATFILE),d);
  browsec=new BaseXButton(BROWSE_D,d);
  usecat=new BaseXCheckBox(USE_CATALOG_FILE,!opts.get(MainOptions.CATFILE).isEmpty(),0,d);
  jsonenc=DialogExport.encoding(d,jopts.get(JsonOptions.ENCODING));
  StringList sl=new StringList();
  final JsonFormat[] formats=JsonFormat.values();
  final int fl=formats.length - 1;
  for (int f=0; f < fl; f++)   sl.add(formats[f].toString());
  String[] sa=sl.toArray();
  jsonformat=new BaseXCombo(d,sa);
  String s=jopts.get(JsonOptions.FORMAT);
  if (Token.eq(s,sa))   jsonformat.setSelectedItem(s);
  html=new BaseXTextField(opts.get(MainOptions.HTMLPARSER),d);
  textenc=DialogExport.encoding(d,topts.get(TextOptions.ENCODING));
  lines=new BaseXCheckBox(SPLIT_INPUT_LINES,topts.get(TextOptions.LINES),0,d);
  csven=DialogExport.encoding(d,copts.get(CsvOptions.ENCODING));
  header=new BaseXCheckBox(FIRST_LINE_HEADER,copts.get(CsvOptions.HEADER),0,d);
  separator=new BaseXBack().layout(new TableLayout(1,2,6,0));
  sl=new StringList();
  for (  final CsvSep cs : CsvSep.values())   sl.add(cs.toString());
  sa=sl.toArray();
  sepcombo=new BaseXCombo(d,sl.add("").toArray());
  separator.add(sepcombo);
  String f="";
  s=copts.get(CsvOptions.SEPARATOR);
  if (Token.eq(s,sa)) {
    sepcombo.setSelectedItem(s);
  }
 else {
    sepcombo.setSelectedIndex(sa.length);
    final int ch=Token.toInt(s);
    f=ch > 0 ? String.valueOf((char)ch) : "";
  }
  sepchar=new BaseXTextField(f,d);
  separator.add(sepchar);
  BaseXLayout.setWidth(sepchar,35);
  xmlopts=new BaseXBack(new TableLayout(9,1));
  htmlopts=new BaseXBack(new TableLayout(2,1,0,8));
  jsonopts=new BaseXBack(new TableLayout(2,1,0,8));
  csvopts=new BaseXBack(new TableLayout(2,1,0,8));
  textopts=new BaseXBack(new TableLayout(2,1,0,8));
  createOptionsPanels();
  setLayout(new TableLayout(1,1));
  add(main);
}
