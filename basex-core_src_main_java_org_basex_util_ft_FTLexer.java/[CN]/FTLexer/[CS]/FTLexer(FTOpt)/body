{
  this.ftopt=ftoptions;
  Language lang=ftoptions != null ? ftoptions.ln : null;
  if (lang == null)   lang=Language.def();
  Tokenizer tk=Tokenizer.IMPL.getFirst();
  for (  final Tokenizer t : Tokenizer.IMPL) {
    if (t.supports(lang)) {
      tk=t;
      break;
    }
  }
  tok=tk.get(ftoptions);
  iter=tok;
  if (ftoptions != null && ftoptions.is(FTFlag.ST)) {
    if (ftoptions.sd == null) {
      Stemmer st=Stemmer.IMPL.getFirst();
      for (      final Stemmer stem : Stemmer.IMPL) {
        if (stem.supports(lang)) {
          st=stem;
          break;
        }
      }
      iter=st.get(lang,iter);
    }
 else {
      iter=new DictionaryStemmer(ftoptions.sd,iter);
    }
  }
}
