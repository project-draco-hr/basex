{
  this.ftopt=ftopt;
  Language lang=ftopt != null ? ftopt.ln : null;
  if (lang == null)   lang=Language.def();
  Tokenizer tk=Tokenizer.IMPL.get(0);
  for (  final Tokenizer t : Tokenizer.IMPL) {
    if (t.supports(lang)) {
      tk=t;
      break;
    }
  }
  tok=tk.get(ftopt);
  iter=tok;
  if (ftopt != null && ftopt.is(FTFlag.ST)) {
    if (ftopt.sd == null) {
      Stemmer st=Stemmer.IMPL.get(0);
      for (      final Stemmer stem : Stemmer.IMPL) {
        if (stem.supports(lang)) {
          st=stem;
          break;
        }
      }
      iter=st.get(lang,iter);
    }
 else {
      iter=new DictionaryStemmer(ftopt.sd,iter);
    }
  }
}
