{
  final Atts ns=new Atts();
  Node n=elem;
  while (n != null && n instanceof Element) {
    final NamedNodeMap atts=n.getAttributes();
    for (int i=0, len=atts.getLength(); i < len; i++) {
      final Attr a=(Attr)atts.item(i);
      final byte[] name=token(a.getName());
      final byte[] pref=Token.eq(name,XMLNS) ? EMPTY : ln(name);
      if (!ns.contains(pref))       ns.add(pref,token(a.getValue()));
    }
    n=n.getParentNode();
  }
  return ns;
}
