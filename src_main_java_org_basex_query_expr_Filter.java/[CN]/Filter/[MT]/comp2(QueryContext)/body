{
  final SeqType t=root.type();
  type=SeqType.get(t.type,t.zeroOrOne() ? SeqType.Occ.ZO : SeqType.Occ.ZM);
  if (!super.uses(Use.POS))   return new IterFilter(this);
  if (pred.length == 1 && (last || pos != null)) {
    if (root.value() && t.one() && (last || pos.min == 1 && pos.max == 1)) {
      return optPre(root,ctx);
    }
  }
  if (iterable())   return new IterPosFilter(this);
  off=pred.length == 1 && pred[0].type().num() && !pred[0].uses(Use.CTX);
  return this;
}
