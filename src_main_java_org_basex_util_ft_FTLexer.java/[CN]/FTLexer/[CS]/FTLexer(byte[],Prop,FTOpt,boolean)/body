{
  fto=opt;
  text=txt;
  Language lang=opt != null ? opt.ln : pr != null ? Language.get(pr.get(Prop.LANGUAGE)) : null;
  if (lang == null)   lang=Language.DEFAULT;
  Tokenizer tk=Tokenizer.IMPL.getFirst();
  if (lang != null) {
    for (    final Tokenizer t : Tokenizer.IMPL) {
      if (t.supports(lang)) {
        tk=t;
        break;
      }
    }
  }
  tok=tk.get(txt,pr,opt,sc);
  iter=tok.iter();
  if (opt != null ? opt.is(FTFlag.ST) : pr != null && pr.is(Prop.STEMMING)) {
    if (opt == null || opt.sd == null) {
      Stemmer st=Stemmer.IMPL.getFirst();
      for (      final Stemmer stem : Stemmer.IMPL) {
        if (stem.supports(lang)) {
          st=stem;
          break;
        }
      }
      iter=st.get(lang).iter(iter);
    }
 else {
      iter=new DictStemmer(opt.sd).iter(iter);
    }
  }
}
