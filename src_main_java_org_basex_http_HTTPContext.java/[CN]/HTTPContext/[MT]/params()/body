{
  final Map<String,String[]> params=new HashMap<String,String[]>();
  try {
    final Map<?,?> map=req.getParameterMap();
    for (    final Entry<?,?> s : map.entrySet()) {
      final String key=s.getKey().toString();
      final String[] vals=s.getValue() instanceof String[] ? (String[])s.getValue() : new String[]{s.getValue().toString()};
      params.put(key,vals);
    }
  }
 catch (  final IllegalArgumentException ex) {
    HTTPErr.INVALID_PARAM_X.thrw(req.getQueryString());
  }
  return params;
}
