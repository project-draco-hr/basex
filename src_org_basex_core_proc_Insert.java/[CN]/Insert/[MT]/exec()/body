{
  if (!checkDB())   return false;
  final CmdUpdate type=getType();
  if (type == null)   return false;
  final Data data=context.data();
  Nodes nodes;
  if (gui) {
    nodes=context.marked();
    context.copy(null);
  }
 else {
    nodes=query(args[1],null);
    if (nodes == null)     return false;
  }
  boolean ok=false;
switch (type) {
case ATTRIBUTE:
    ok=attr(data,nodes);
  break;
case FRAGMENT:
ok=frag(data,nodes);
break;
default :
ok=node(data,nodes);
break;
}
if (!ok) return false;
data.flush();
context.update();
return info(INSERTINFO,nodes.size(),perf.getTimer());
}
