{
  final XQuery query=new XQuery("\n" + "               <result>{\n" + "                 for $book in $books-doc/*/book\n"+ "                 for $author in $book/author\n"+ "                 group by $author\n"+ "                 order by $author\n"+ "                 return\n"+ "                 <author name=\"{$author}\">{\n"+ "                   for $b in $book\n"+ "                   order by $b/title\n"+ "                   return\n"+ "                     <title> {fn:data($b/title)} </title>\n"+ "                 }</author>\n"+ "               }</result>\n"+ "      ",ctx);
  query.bind("$products-doc",node(file("prod/GroupByClause/products.xml")));
  query.bind("$sales-records-doc",node(file("prod/GroupByClause/sales-records.xml")));
  query.bind("$stores-doc",node(file("prod/GroupByClause/stores.xml")));
  query.bind("$books-doc",node(file("prod/GroupByClause/books.xml")));
  final QT3Result res=result(query);
  result=res;
  test(assertSerialization("<result><author name=\"Alan Simon\"><title>SQL:1999</title><title>Strategic Database Technology</title></author><author name=\"Andrew Eisenberg\"><title>Understanding SQL and Java Together</title></author><author name=\"Jim Melton\"><title>Advanced SQL:1999</title><title>Querying XML</title><title>SQL:1999</title><title>Understanding SQL and Java Together</title></author><author name=\"Stephen Buxton\"><title>Querying XML</title></author></result>",false));
}
