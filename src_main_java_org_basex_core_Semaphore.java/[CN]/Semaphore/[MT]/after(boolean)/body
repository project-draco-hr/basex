{
  if (w) {
    if (waiting.size() > 0) {
      notifyNext();
    }
 else {
      state=State.IDLE;
    }
  }
 else {
    if (--activeR == 0) {
      if (waiting.size() > 0) {
        notifyNext();
      }
 else {
        state=State.IDLE;
      }
    }
  }
}
