{
  if (waiting.size() > 0) {
    final Lock eldest=waiting.remove(0);
synchronized (eldest) {
      eldest.notifyAll();
    }
    if (eldest.writer) {
      state=2;
    }
 else {
      state=1;
      activeR=eldest.waitingReaders;
    }
  }
}
