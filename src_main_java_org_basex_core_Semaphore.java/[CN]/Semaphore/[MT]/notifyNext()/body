{
  final Lock eldest=waiting.remove(0);
synchronized (eldest) {
    eldest.notifyAll();
  }
  if (eldest.writer) {
    state=State.WRITE;
  }
 else {
    state=State.READ;
    activeR=eldest.waitingReaders;
  }
}
