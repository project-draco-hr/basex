{
  if (waiting.size() > 0) {
    Lock l=waiting.removeFirst();
synchronized (l) {
      l.valid=true;
      l.notify();
    }
  }
 else {
    state=State.IDLE;
  }
}
