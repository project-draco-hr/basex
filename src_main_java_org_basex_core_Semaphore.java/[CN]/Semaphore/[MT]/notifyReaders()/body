{
  while (waiting.size() > 0) {
    if (waiting.getFirst().writer)     break;
    Lock l=waiting.removeFirst();
synchronized (l) {
      l.valid=true;
      l.notify();
    }
  }
}
