{
  final int l=tok.length;
  final byte[] tmp=new byte[l];
  int c=0;
  for (int i=0; i < l; i++) {
    final byte b=tok[i];
    int j=-1;
    while (++j < srch.length && b != srch[j])     ;
    if (j < srch.length) {
      if (j >= rep.length)       continue;
      tmp[c++]=rep[j];
    }
 else {
      tmp[c++]=tok[i];
    }
  }
  return c == l ? tmp : Array.finish(tmp,c);
}
