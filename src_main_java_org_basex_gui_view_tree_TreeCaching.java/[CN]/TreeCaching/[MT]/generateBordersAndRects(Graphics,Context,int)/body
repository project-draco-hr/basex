{
  final Data d=c.current.data;
  final int[] roots=c.current.nodes;
  final int rl=roots.length;
  if (rl == 0)   return -1;
  final TreeBorder[][] bo=new TreeBorder[rl][];
  final double w=sw / (double)rl;
  if (w == 0)   return -1;
  rects=new TreeRect[rl][][];
  for (int i=0; i < rl; i++) {
    bo[i]=generateSubtreeBorders(d,roots[i]);
    generateRects(g,i,c,bo[i],w);
  }
  border=bo;
  return w;
}
