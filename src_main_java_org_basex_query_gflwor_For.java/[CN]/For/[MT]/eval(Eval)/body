{
  return new Eval(){
    /** 
 * Expression iterator. 
 */
    private Iter iter;
    /** 
 * Current position. 
 */
    private long p;
    @Override public boolean next(    final QueryContext ctx) throws QueryException {
      while (true) {
        final Item it=iter == null ? null : iter.next();
        if (it != null) {
          ++p;
          ctx.set(var,it,info);
          if (pos != null)           ctx.set(pos,Int.get(p),info);
          if (score != null)           ctx.set(score,Dbl.get(it.score()),info);
          return true;
        }
 else         if (empty && iter != null && p == 0) {
          ctx.set(var,Empty.SEQ,info);
          if (pos != null)           ctx.set(pos,Int.get(p),info);
          if (score != null)           ctx.set(score,Dbl.get(0),info);
          iter=null;
          return true;
        }
 else         if (!sub.next(ctx)) {
          return false;
        }
        iter=expr.iter(ctx);
        p=0;
      }
    }
  }
;
}
