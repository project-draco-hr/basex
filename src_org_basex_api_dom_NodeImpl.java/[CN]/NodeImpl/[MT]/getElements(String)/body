{
  final int t=tag.equals("*") ? -1 : data.tags.id(Token.token(tag));
  final NodeBuilder nb=new NodeBuilder();
  final int s=pre + data.size(pre,kind);
  int p=pre + data.attSize(pre,kind);
  while (p != s) {
    if (data.kind(p) == Data.ELEM) {
      if (t == -1 || data.tagID(p) == t)       nb.add(p);
      p+=data.attSize(p,kind);
    }
  }
  return new NodeListImpl(data,nb.finish(),nb.size);
}
