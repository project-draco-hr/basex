{
  return type != null ? type : expr != null ? expr.type() : ret;
}
