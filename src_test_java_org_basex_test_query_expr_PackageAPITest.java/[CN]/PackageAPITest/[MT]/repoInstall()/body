{
  try {
    new RepoManager(context).install(token("src/test/resources/pkg"));
    fail("Not existing package not detected.");
  }
 catch (  final QueryException ex) {
    check(ex,Err.BXRE_WHICH);
  }
  new RepoInstall(REPO + "pkg3.xar",null).execute(context);
  final String dir=normalize(PKG3ID);
  assertTrue(dir(dir));
  assertTrue(file(dir + "/expath-pkg.xml"));
  assertTrue(dir(dir + "/pkg3"));
  assertTrue(dir(dir + "/pkg3/mod"));
  assertTrue(file(dir + "/pkg3/mod/pkg3mod1.xql"));
  assertTrue(new IOFile(REPO,dir).delete());
}
