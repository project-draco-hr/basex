{
  if (painter == null)   return;
  painter.reset();
  layout=new MapLayout(nodes.data,textLen);
  layout.makeMap(rect,new MapList(nodes.nodes),0,nodes.size(),0);
  mainRects=(ArrayList<MapRect>)layout.rectangles.clone();
  painter.init(mainRects);
  drawMap(map,layout.rectangles);
  focus();
}
