{
  if (painter == null)   return;
  painter.reset();
  final int w=getWidth(), h=getHeight();
  final MapRect rect=new MapRect(0,0,w,h,0,0);
  final Performance p=new Performance();
  calc(rect,gui.context.current(),mainMap);
  if (GUIProp.mapinfo) {
    final double aar=MapLayout.aar(mainRects);
    mapInfo.setValues(mainRects.size(),rect,aar,p.getTimer());
  }
  repaint();
}
