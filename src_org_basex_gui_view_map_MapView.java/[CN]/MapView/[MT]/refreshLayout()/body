{
  final int w=getWidth(), h=getHeight();
  final MapRect rect=new MapRect(0,0,w,h,0,0);
  mainRects=new ArrayList<MapRect>();
  final Nodes nodes=gui.context.current();
  final Performance p=new Performance();
  if (gui.context.current().data.fs == null && GUIProp.usetextlength)   initLen();
  calc(rect,nodes,mainMap);
  if (GUIProp.mapinfo) {
    final double aar=MapLayout.aar(mainRects);
    mapInfo.setValues(mainRects.size(),rect,aar,p.getTimer());
  }
  repaint();
}
