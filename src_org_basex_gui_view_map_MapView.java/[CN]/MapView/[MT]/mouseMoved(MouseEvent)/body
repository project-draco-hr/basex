{
  if (gui.updating)   return;
  super.mouseMoved(e);
  mouseX=e.getX();
  mouseY=e.getY();
  if (GUIProp.mapinteraction && e.isControlDown() && mapdist) {
    mapdist=true;
    Graphics g=mainMap.getGraphics();
    g.setColor(Color.black);
    g.fillRect(0,0,getWidth(),getHeight());
    MapRects distRects=new MapRects();
    for (    MapRect r : mainRects) {
      int x=(int)transferFunction(r.x,mouseX,getWidth());
      int y=(int)transferFunction(r.y,mouseY,getHeight());
      int w=(int)transferFunction(r.x + r.w,mouseX,getWidth()) - x;
      int h=(int)transferFunction(r.y + r.h,mouseY,getHeight()) - y;
      distRects.add(new MapRect(x,y,w,h,r.pre,r.level));
    }
    mainMap.flush();
    painter.init(distRects);
    drawMap(mainMap,distRects,1);
    repaint();
  }
 else   if (focus()) {
    if (!(mouseX > tinyx && mouseX < tinyx + tinyw && mouseY > tinyy && mouseY < tinyy + tinyh)) {
      thumbMap=false;
    }
    repaint();
  }
 else   if (GUIProp.mapinteraction && e.isControlDown() && GUIProp.mapdist) {
    mapdist=true;
    repaint();
  }
 else   if (GUIProp.mapinteraction && e.isControlDown()) {
    constMag=true;
    repaint();
  }
 else   if (GUIProp.mapinteraction && !e.isControlDown()) {
    constMag=false;
    mapdist=false;
    refreshMark();
  }
}
