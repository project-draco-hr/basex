{
  int ns=0;
  final int pc=text.cursor();
  final int ts=text.size();
  final byte[] old=text.text();
  boolean eq=true;
  for (int r=0; r < s; ++r) {
    final byte b=t[r];
    if (b >= ' ' || b <= TokenBuilder.MARK || b == 0x09 || b == 0x0A)     t[ns++]=t[r];
    eq&=ns < ts && ns < s && t[ns] == old[ns];
  }
  eq&=ns == ts;
  if (!eq)   text.text(Arrays.copyOf(t,ns));
  if (hist != null)   hist.store(t.length != ns ? Arrays.copyOf(t,ns) : t,pc,0);
  componentResized(null);
}
