{
  super(source,pr);
  final ParserProp props=new ParserProp(pr.get(Prop.PARSEROPT));
  row=props.is(ParserProp.HEADER) ? 0 : 1;
  String val=props.get(ParserProp.SEPARATOR).toLowerCase(Locale.ENGLISH);
  int s=-1;
  for (int i=0; i < SEPARATORS.length && s == -1; i++) {
    if (val.equals(SEPARATORS[i]))     s=SEPMAPPINGS[i];
  }
  if (s == -1) {
    final int i=toInt(token(val));
    if (XMLToken.valid(i))     s=i;
 else     throw new BaseXException(INVALID_VALUE_X_X,ParserProp.SEPARATOR[0],val);
  }
  separator=s;
  val=props.get(ParserProp.FORMAT).toLowerCase(Locale.ENGLISH);
  simple=val.equals(FORMATS[0]);
  if (!simple && !val.equals(FORMATS[1]))   throw new BaseXException(INVALID_VALUE_X_X,ParserProp.FORMAT[0],val);
  encoding=props.get(ParserProp.ENCODING);
}
