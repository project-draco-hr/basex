{
  final TokenSet pkgs=context.repo.nsDict().get(uri);
  if (pkgs != null) {
    Version ver=null;
    byte[] nm=null;
    for (    final byte[] name : pkgs) {
      final Version v=new Version(Package.version(name));
      if (ver == null || v.compareTo(ver) > 0) {
        ver=v;
        nm=name;
      }
    }
    if (nm != null) {
      addRepo(nm,new TokenSet(),new TokenSet(),ii,qp);
      return true;
    }
  }
  final boolean java=startsWith(uri,JAVAPREF);
  String uriPath=uri2path(string(java ? substring(uri,JAVAPREF.length) : uri));
  if (uriPath == null)   return false;
  if (!java) {
    final String path=context.globalopts.get(GlobalOptions.REPOPATH) + uriPath;
    for (    final String suf : IO.XQSUFFIXES) {
      if (addModule(new IOFile(path + suf),uri,qp))       return true;
    }
  }
  uriPath=capitalize(uriPath);
  final String path=context.globalopts.get(GlobalOptions.REPOPATH) + uriPath;
  final IOFile file=new IOFile(path + IO.JARSUFFIX);
  if (file.exists())   addURL(file);
  addJava(uriPath,uri,ii);
  return true;
}
