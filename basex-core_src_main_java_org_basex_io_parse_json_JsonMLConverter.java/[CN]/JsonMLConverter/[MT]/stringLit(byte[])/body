{
  if (attName == null && elem != null && stack.peek() == null) {
    stack.pop();
    stack.push(elem);
    elem=null;
  }
  if (elem == null) {
    final FElem e=stack.isEmpty() ? null : stack.peek();
    if (e == null)     elem=new FElem(check(val));
 else     e.add(new FTxt(val));
  }
 else   if (attName != null) {
    elem.add(attName,val);
    attName=null;
  }
 else {
    error("No string allowed at this stage");
  }
}
