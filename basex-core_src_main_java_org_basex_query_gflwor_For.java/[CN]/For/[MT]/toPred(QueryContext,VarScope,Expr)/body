{
  if (empty || !(vars.length == 1 && ex.uses(var) && ex.removable(var)))   return false;
  final Value cv=qc.value;
  Expr pred=ex;
  try {
    qc.value=null;
    final Context c=new Context(info);
    c.seqType(expr.seqType().type.seqType());
    final Expr r=ex.inline(qc,scp,var,c);
    if (r != null)     pred=r;
  }
  finally {
    qc.value=cv;
  }
  if (pred.seqType().mayBeNumber())   pred=Function.BOOLEAN.get(null,info,pred);
  if (expr instanceof AxisPath) {
    expr=((Path)expr).addPreds(qc,scp,pred);
  }
 else   if (expr instanceof Filter) {
    expr=((Filter)expr).addPred(qc,scp,pred);
  }
 else {
    expr=Filter.get(info,expr,pred).optimize(qc,scp);
  }
  return true;
}
