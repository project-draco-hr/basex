{
  int s=0;
  for (int p=ps - 1; p >= 0; p--) {
    final byte b=text[p];
    if (b == '\n')     break;
    if (b == '\t') {
      s+=EditorText.TAB;
    }
 else     if (b == ' ') {
      s++;
    }
 else {
      s=0;
    }
  }
  for (int p=0; p < s; p++)   sb.append(' ');
  final int l=ps > 0 ? text[ps - 1] : 0;
  if (l == '(' || l == '{' || l == '[') {
    for (int p=0; p < EditorText.TAB; p++)     sb.append(' ');
  }
}
