{
  QNm n=null;
  if (i.type == Type.QNM) {
    n=(QNm)i;
  }
 else {
    final byte[] nm=i.atom();
    if (!XMLToken.isQName(nm)) {
      (i.str() || i.unt() ? INVNAME : INVQNAME).thrw(input,nm);
    }
    n=new QNm(nm);
  }
  if (!n.hasUri()) {
    n.uri(att && !n.ns() ? EMPTY : ctx.ns.uri(n.pref(),n != i,input));
  }
  return n;
}
