{
  QNm n=null;
  final Type ip=it.type;
  if (ip == AtomType.QNM) {
    n=(QNm)it;
  }
 else {
    final byte[] nm=it.string(ii);
    if (!XMLToken.isQName(nm)) {
      (ip.isString() || ip.isUntyped() ? INVNAME : INVQNAME).thrw(input,nm);
    }
    n=new QNm(nm);
  }
  if (!n.hasUri()) {
    n.uri(att && !n.ns() ? EMPTY : ctx.ns.uri(n.pref(),n != it,input));
  }
  return n;
}
