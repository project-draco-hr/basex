{
  QNm name=null;
  if (i.type == Type.QNM) {
    name=(QNm)i;
  }
 else {
    final byte[] nm=i.atom();
    if (contains(nm,' '))     Err.or(input,INVAL,nm);
    if (!XMLToken.isQName(nm))     Err.or(input,NAMEWRONG,nm);
    name=new QNm(nm);
  }
  if (name.uri == Uri.EMPTY) {
    name.uri=Uri.uri(ctx.ns.uri(name.pref(),name != i,input));
  }
  return name;
}
