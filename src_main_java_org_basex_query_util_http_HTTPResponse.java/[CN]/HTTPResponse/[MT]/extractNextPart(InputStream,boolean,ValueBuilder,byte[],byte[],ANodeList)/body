{
  String partCType=MimeTypes.TEXT_PLAIN;
  String charset=null;
  final byte[] firstLine=readLine(io);
  if (firstLine == null || eq(firstLine,end))   return false;
  if (firstLine.length == 0) {
    final byte[] p=extractPartPayload(io,sep,end,null);
    if (!status)     payloads.add(interpretPayload(p,partCType));
  }
 else {
    byte[] nextHdr=firstLine;
    while (nextHdr != null && nextHdr.length > 0) {
      if (startsWith(lc(nextHdr),CONTENT_TYPE_LC))       charset=extractCharset(string(nextHdr));
      final int pos=indexOf(nextHdr,':');
      if (pos > 0) {
        final byte[] name=substring(nextHdr,0,pos);
        if (pos + 1 < nextHdr.length) {
          final byte[] value=trim(substring(nextHdr,pos + 1,nextHdr.length));
          final FElem hdr=new FElem(Q_HTTP_HEADER);
          hdr.add(Q_NAME,name);
          hdr.add(Q_VALUE,value);
          nl.add(hdr);
          if (eq(lc(name),CONTENT_TYPE_LC))           partCType=string(value);
        }
      }
      nextHdr=readLine(io);
    }
    final byte[] p=extractPartPayload(io,sep,end,charset);
    if (!status)     payloads.add(interpretPayload(p,partCType));
  }
  nl.add(createBody(partCType));
  return true;
}
