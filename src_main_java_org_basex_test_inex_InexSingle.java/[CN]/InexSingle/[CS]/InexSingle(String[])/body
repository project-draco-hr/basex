{
  final Performance p=new Performance();
  Main.outln(Main.name(InexSingle.class));
  if (!parseArguments(args))   return;
  final BufferedReader br=new BufferedReader(new FileReader(QUERIES));
  String l;
  int c=0;
  String query="";
  while ((l=br.readLine()) != null) {
    if (++c == quindex) {
      query=l.substring(l.lastIndexOf(';') + 1).replaceAll("\"","'");
    }
  }
  br.close();
  final TokenBuilder qu=new TokenBuilder();
  qu.add("let $hits := (for $i score $s in(\n");
  int d=0;
  for (  final String s : List.list(ctx)) {
    if (s.startsWith(DBPREFIX)) {
      if (d++ != 0)       qu.add(",\n");
      final String doc="doc('" + s + "')";
      qu.add(doc + query.replaceAll("\\| ","| " + doc));
    }
  }
  qu.add(")\n" + "order by $s descending\n" + "return <result score='{ $s }' "+ "file='{ replace(base-uri($i), '.*/', '') }'>{ $i }</result>)"+ "\n"+ "return <results query=\"" + query + "\">{ $hits }</results>\n");
  String file=Integer.toString(quindex) + ".xml";
  while (file.length() < 7)   file="0" + file;
  final OutputStream out=quiet ? new NullOutput() : new PrintOutput(file);
  final boolean ok=session.execute(new XQuery(qu.toString()),out);
  out.close();
  if (ok) {
    Main.outln("- " + query);
    Main.outln("Result saved to % in %",file,p);
  }
 else {
    Main.outln(session.info());
  }
}
