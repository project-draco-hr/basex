{
  final XQuery query=new XQuery("\n" + "<result>{\n" + "        for tumbling window $w in ./stream/event[direction eq \"in\"]\n"+ "                start  $x when $x/person = (\"Barbara\", \"Anton\")\n"+ "                end next $y when xs:dateTime($y/@time) - xs:dateTime($x/@time) gt xs:dayTimeDuration(\"PT30M\")\n"+ "        where $w[person eq \"Anton\"] and $w[person eq \"Barbara\"]\n"+ "        return\n"+ "                <alert time=\"{ xs:dateTime($y/@time) }\">Anton and Barbara just arrived</alert>\n"+ "}</result>\n"+ "      ",ctx);
  try {
    query.context(node(file("prod/WindowClause/person_events.xml")));
    result=new QT3Result(query.value());
  }
 catch (  final Throwable trw) {
    result=new QT3Result(trw);
  }
 finally {
    query.close();
  }
  test(assertSerialization("<result><alert time=\"2006-01-01T11:15:00Z\">Anton and Barbara just arrived</alert></result>",false));
}
