{
  final int c=token.get(key);
  token.set(key,-1);
  if (c > 0 && freq != null) {
    final int f=freq.get(key);
    if (f > 0) {
      return (int)(Math.log(1313 / f) * c * 1000 / max);
    }
  }
  return c == 0 ? 0 : c * 1000 / max;
}
