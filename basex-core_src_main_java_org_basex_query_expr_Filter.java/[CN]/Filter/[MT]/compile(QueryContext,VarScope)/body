{
  root=root.compile(qc,scp);
  final Value init=qc.value;
  qc.value=Path.initial(qc,root);
  try {
    super.compile(qc,scp);
  }
  finally {
    qc.value=init;
  }
  return optimize(qc,scp);
}
