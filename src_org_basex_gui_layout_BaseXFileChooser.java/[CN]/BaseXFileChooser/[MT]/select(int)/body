{
  mode=type;
  if (fd != null) {
    fd.setVisible(true);
    return fd.getFile() != null;
  }
  int state=0;
switch (type) {
case 0:
    state=fc.showOpenDialog(parent);
  break;
case 1:
state=fc.showSaveDialog(parent);
break;
case 2:
fc.setFileSelectionMode(JFileChooser.DIRECTORIES_ONLY);
state=fc.showDialog(parent,null);
break;
}
return state == JFileChooser.APPROVE_OPTION;
}
