{
  final String str=string(string);
  final StringBuilder sb=new StringBuilder();
  boolean nl=true;
  for (int l=0; l < str.length(); l++) {
    final char c=str.charAt(l);
    if (nl) {
      nl=c >= 0 && c <= ' ';
    }
 else {
      nl=c == '\r' || c == '\n';
      if (nl) {
        while (sb.charAt(sb.length() - 1) <= ' ')         sb.deleteCharAt(sb.length() - 1);
        if (sb.charAt(sb.length() - 1) != '>')         sb.append(' ');
      }
    }
    if (!nl)     sb.append(c);
  }
  return sb.toString().trim();
}
