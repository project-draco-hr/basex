{
  if (user.equals(ADMIN))   return !info(ADMIN_STATIC_X);
  if (db == null) {
    context.users.get(user).perm=perm;
    context.users.write();
    return info(GRANTED_X_X,args[0],user);
  }
  final Data data;
  try {
    data=Open.open(db,context);
  }
 catch (  final IOException ex) {
    return !info(Util.message(ex));
  }
  if (!data.startUpdate())   return !info(DB_PINNED_X,data.meta.name);
  User u=data.meta.users.get(user);
  if (u == null) {
    u=context.users.get(user).copy();
    data.meta.users.create(u);
  }
  u.perm=perm;
  data.meta.dirty=true;
  data.finishUpdate();
  Close.close(data,context);
  return info(GRANTED_ON_X_X_X,args[0],user,db);
}
