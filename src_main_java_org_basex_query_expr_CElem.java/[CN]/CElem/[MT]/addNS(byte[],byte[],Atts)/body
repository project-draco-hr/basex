{
  final byte[] u=ns.value(pref);
  if (u == null) {
    ns.add(pref,uri);
  }
 else   if (!eq(u,uri)) {
    byte[] apref=null;
    for (int c=0; c < ns.size(); c++) {
      if (eq(ns.value(c),uri))       apref=ns.name(c);
    }
    if (apref == null) {
      int i=1;
      do {
        apref=concat(pref,new byte[]{'_'},token(i++));
      }
 while (ns.contains(apref));
      ns.add(apref,uri);
    }
    return apref;
  }
  return null;
}
