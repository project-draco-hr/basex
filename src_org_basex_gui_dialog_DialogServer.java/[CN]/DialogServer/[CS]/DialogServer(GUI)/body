{
  super(main,GUISERVER);
  final BaseXBack db=dbsP.getTablePanel();
  db.setBorder(8,8,8,8);
  tabs=new BaseXTabs(this);
  tabs.add("Server",conn);
  tabs.add(USERS,user);
  tabs.add(DATABASES,db);
  tabs.add(SESSIONS,sess);
  tabs.add(LOGS,logs);
  conn.setLayout(new TableLayout(6,1,0,4));
  conn.setBorder(8,8,8,8);
  conn.add(new BaseXLabel(LOCALSERVER + COLS,false,true));
  start=new BaseXButton(BUTTONSTART,this);
  stop=new BaseXButton(BUTTONSTOP,this);
  connect=new BaseXButton(BUTTONCONNECT,this);
  disconnect=new BaseXButton(BUTTONDISCONNECT,this);
  host=new BaseXTextField(ctx.prop.get(Prop.HOST),this);
  host.addKeyListener(keys);
  ports=new BaseXTextField(Integer.toString(ctx.prop.num(Prop.SERVERPORT)),this);
  ports.addKeyListener(keys);
  portc=new BaseXTextField(Integer.toString(ctx.prop.num(Prop.PORT)),this);
  portc.addKeyListener(keys);
  loguser=new BaseXTextField(gui.prop.get(GUIProp.SERVERUSER),this);
  loguser.addKeyListener(keys);
  logpass=new JPasswordField(gui.prop.get(GUIProp.SERVERPASS));
  logpass.addKeyListener(keys);
  BaseXLayout.setWidth(logpass,BaseXTextField.TWIDTH);
  infoC=new BaseXLabel(" ");
  infoC.setBorder(8,0,0,0);
  BaseXBack p=new BaseXBack();
  p.setLayout(new TableLayout(2,2,8,2));
  p.setBorder(0,0,0,0);
  p.add(new BaseXLabel(PORT + COLS));
  p.add(ports);
  p.add(new BaseXLabel(" "));
  BaseXBack pp=new BaseXBack();
  pp.setLayout(new TableLayout(1,2,2,2));
  pp.add(start);
  pp.add(stop);
  p.add(pp);
  conn.add(p);
  conn.add(new BaseXLabel(" "));
  conn.add(new BaseXLabel("Administrator " + LOGIN + " (local or remote)"+ COLS,false,true));
  p=new BaseXBack();
  p.setLayout(new TableLayout(5,2,8,2));
  p.add(new BaseXLabel(SERVERUSER + COLS));
  p.add(loguser);
  p.add(new BaseXLabel(SERVERPW + COLS));
  p.add(logpass);
  p.add(new BaseXLabel(HOST + COLS));
  p.add(host);
  p.add(new BaseXLabel(PORT + COLS));
  p.add(portc);
  p.add(new BaseXLabel(" "));
  pp=new BaseXBack();
  pp.setLayout(new TableLayout(1,2,2,2));
  pp.add(connect);
  pp.add(disconnect);
  p.add(pp);
  conn.add(p);
  conn.add(infoC);
  sess.setLayout(new BorderLayout());
  sess.setBorder(8,8,8,8);
  sese=new BaseXText(false,this);
  sese.setFont(getFont());
  sese.setBorder(new EmptyBorder(5,5,5,5));
  sedb=new BaseXText(false,this);
  sedb.setFont(getFont());
  sedb.setBorder(new EmptyBorder(5,5,5,5));
  refreshSess=new BaseXButton(BUTTONREFRESH,this);
  p=new BaseXBack();
  p.setLayout(new GridLayout(2,1,0,2));
  pp=new BaseXBack();
  pp.setLayout(new BorderLayout());
  pp.add(new BaseXLabel(SESSIONS + COLS,false,true),BorderLayout.NORTH);
  pp.add(sese,BorderLayout.CENTER);
  p.add(pp);
  pp=new BaseXBack();
  pp.setLayout(new BorderLayout());
  pp.add(new BaseXLabel(DATABASES + COLS,false,true),BorderLayout.NORTH);
  pp.add(sedb,BorderLayout.CENTER);
  p.add(pp);
  sess.add(p,BorderLayout.CENTER);
  p=new BaseXBack();
  p.setLayout(new BorderLayout(0,0));
  p.add(refreshSess,BorderLayout.EAST);
  sess.add(p,BorderLayout.SOUTH);
  logs.setLayout(new BorderLayout());
  logs.setBorder(8,8,8,8);
  delete=new BaseXButton(BUTTONDELETE,this);
  deleteAll=new BaseXButton(BUTTONDELALL,this);
  logc=new BaseXCombo(true,new String[]{},this);
  logt=new BaseXText(false,this);
  logt.setFont(getFont());
  logt.setBorder(new EmptyBorder(5,5,5,5));
  infoL=new BaseXLabel(" ");
  infoL.setBorder(8,0,0,0);
  refreshLog=new BaseXButton(BUTTONREFRESH,this);
  p=new BaseXBack();
  p.setLayout(new BorderLayout());
  pp=new BaseXBack();
  pp.add(logc);
  pp.add(delete);
  pp.add(deleteAll);
  p.add(pp,BorderLayout.WEST);
  logs.add(p,BorderLayout.NORTH);
  logs.add(logt,BorderLayout.CENTER);
  p=new BaseXBack();
  p.setLayout(new BorderLayout(8,0));
  p.add(infoL,BorderLayout.WEST);
  p.add(refreshLog,BorderLayout.EAST);
  logs.add(p,BorderLayout.SOUTH);
  set(tabs,BorderLayout.CENTER);
  running=ping(true);
  tabs.addChangeListener(new ChangeListener(){
    public void stateChanged(    final ChangeEvent evt){
      final BaseXTabs pane=(BaseXTabs)evt.getSource();
      tab=pane.getSelectedIndex();
      final Object o=pane.getSelectedComponent();
      if (o == logs)       refreshLog();
    }
  }
);
  refreshLog();
  action(null);
  setResizable(true);
  finish(null);
}
