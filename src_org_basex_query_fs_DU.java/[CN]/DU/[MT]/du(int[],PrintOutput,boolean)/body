{
  long size=0;
  for (  final int pre : sources) {
    if (FSUtils.isFile(data,pre)) {
      if (!fSum || top)       print(out,Token.toLong(FSUtils.getSize(data,pre)),Token.concat(FSUtils.getRelativePath(data,pre,curPre),FSUtils.getName(data,pre)));
    }
 else {
      final DirIterator it=new DirIterator(data,pre);
      long sz=Token.toLong(FSUtils.getSize(data,pre));
      while (it.more()) {
        final int n=it.next();
        if (FSUtils.isDir(data,n)) {
          sz+=du(new int[]{n},out,false);
        }
 else {
          final long s=Token.toLong(FSUtils.getSize(data,n));
          if (fPrintAll && (!fSum || top)) {
            print(out,s,Token.concat(FSUtils.getRelativePath(data,pre,curPre),Token.token('/'),FSUtils.getName(data,n)));
          }
          sz+=s;
        }
      }
      if (!fSum || top)       print(out,sz,FSUtils.getRelativePath(data,pre,curPre));
      size+=sz;
    }
  }
  return size;
}
