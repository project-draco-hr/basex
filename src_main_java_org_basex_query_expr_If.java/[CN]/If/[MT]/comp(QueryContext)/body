{
  for (int e=0; e != expr.length; e++)   expr[e]=expr[e].comp(ctx);
  checkUp(ctx,expr[1],expr[2]);
  Expr e=this;
  if (checkUp(expr[0],ctx).item()) {
    e=expr[((Item)expr[0]).bool(input) ? 1 : 2];
  }
 else   if (expr[1].empty() && expr[2].empty()) {
    e=Seq.EMPTY;
  }
  return optPre(e,ctx);
}
