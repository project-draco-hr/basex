{
  checkAdmin(qc);
  final Map<String,Job> active=qc.context.jobs.active;
  final Set<String> set=exprs.length == 0 ? active.keySet() : Collections.singleton(Token.string(toToken(exprs[0],qc)));
  final int ml=qc.context.soptions.get(StaticOptions.LOGMSGMAXLEN);
  final ValueBuilder vb=new ValueBuilder();
  for (  final String key : set) {
    final Job job=active.get(key);
    if (job == null)     continue;
    final JobContext jc=job.job();
    final FElem elem=new FElem(JOB);
    elem.add(ID,key);
    elem.add(TYPE,jc.type());
    if (jc.performance != null) {
      final long ms=(System.nanoTime() - jc.performance.start()) / 1000000;
      elem.add(DURATION,new DTDur(ms).string(info));
    }
    elem.add(STATE,job.state.toString().toLowerCase(Locale.ENGLISH));
    elem.add(USER,jc.context.user().name());
    elem.add(chop(normalize(token(jc.toString())),ml));
    vb.add(elem);
  }
  return vb.value();
}
