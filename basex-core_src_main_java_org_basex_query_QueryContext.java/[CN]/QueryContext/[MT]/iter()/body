{
  compile();
  try {
    if (!updating)     return root.iter(this);
    ItemList cache=root.cache(this);
    final Updates updates=resources.updates;
    if (updates != null) {
      if (qcParent == null) {
        final ItemList output=resources.output;
        final HashSet<Data> datas=updates.prepare(this);
        final StringList dbs=updates.databases();
        copy(cache,datas,dbs);
        copy(output,datas,dbs);
        if (context.data() != null)         context.invalidate();
        updates.apply(this);
        if (output.size() != 0) {
          if (cache.size() == 0)           cache=output;
 else           cache.add(output.value());
        }
      }
    }
    return cache.iter();
  }
 catch (  final StackOverflowError ex) {
    Util.debug(ex);
    throw BASX_STACKOVERFLOW.get(null);
  }
}
