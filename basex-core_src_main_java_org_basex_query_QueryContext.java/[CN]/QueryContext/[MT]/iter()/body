{
  compile();
  try {
    if (!updating)     return root.iter(this);
    ItemList results=root.cache(this);
    final Updates updates=resources.updates;
    if (updates != null) {
      if (qcParent == null) {
        final ItemList cache=resources.cache;
        final HashSet<Data> datas=updates.prepare(this);
        final StringList dbs=updates.databases();
        check(results,datas,dbs);
        check(cache,datas,dbs);
        if (context.data() != null)         context.invalidate();
        updates.apply(this);
        if (!cache.isEmpty()) {
          if (results.isEmpty())           results=cache;
 else           results.add(cache.value());
        }
      }
    }
    return results.iter();
  }
 catch (  final StackOverflowError ex) {
    Util.debug(ex);
    throw BASX_STACKOVERFLOW.get(null);
  }
}
