{
  if (!(node instanceof DBNode))   return;
  final MemData m=buildDB();
  final DBNode n=(DBNode)node;
  final int p=n.pre + add;
  final Data d=n.data;
  if (m == null) {
    d.delete(p);
    return;
  }
  final int k=Nod.kind(n.type);
  final int par=d.parent(p,k);
  final int s=m.size(0,Data.DOC) - 1;
  if (a)   UpdateFunctions.insertAttributes(p,par,d,m);
 else   d.insertSeq(p + d.size(p,k),par,m);
  d.delete(p + (a ? s : 0));
}
