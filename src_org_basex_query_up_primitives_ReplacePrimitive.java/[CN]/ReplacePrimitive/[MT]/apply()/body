{
  if (!(node instanceof DBNode))   return;
  final MemData m=buildDB();
  final DBNode n=(DBNode)node;
  final Data d=n.data;
  if (m == null) {
    d.delete(n.pre);
    return;
  }
  final int k=Nod.kind(n.type);
  final int par=d.parent(n.pre,d.kind(n.pre));
  final int s=m.size(0,Data.DOC) - 1;
  if (a)   UpdateFunctions.insertAttributes(n.pre,par,d,m);
 else   d.insertSeq(n.pre + d.size(n.pre,k),par,m);
  d.delete(n.pre + (a ? s : 0));
}
