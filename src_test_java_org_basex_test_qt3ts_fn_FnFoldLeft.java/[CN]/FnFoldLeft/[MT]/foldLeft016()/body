{
  final XQuery query=new XQuery("\n" + "let $html := <html>\n" + "  <body>\n"+ "\t<div id=\"main\">\n"+ "\t  <p class=\"para\">Hello World!</p>\t\n"+ "\t</div>\n"+ "\t<p class=\"para\">Goodbye!</p>\t\n"+ "  </body>\n"+ "</html>\n"+ "let $css-selectors := <selectors>\n"+ "  <id>main</id>\n"+ "  <class>para</class>\n"+ "</selectors>/*\n"+ "let $interpreter  := function($ctx, $selector){\n"+ "  typeswitch($selector)\n"+ "    case $a as element(id) return $ctx//*[@id = $a/text()]\n"+ "    case $a as element(class) return $ctx//*[@class = $a/text()]\n"+ "  default return ()\n"+ "}\n"+ "let $result := fold-left($interpreter, $html, $css-selectors)\n"+ "return\n"+ "  $result/text()\n"+ "\t ",ctx);
  try {
    result=new QT3Result(query.value());
  }
 catch (  final Throwable trw) {
    result=new QT3Result(trw);
  }
 finally {
    query.close();
  }
  test(assertStringValue(false,"Hello World!"));
}
