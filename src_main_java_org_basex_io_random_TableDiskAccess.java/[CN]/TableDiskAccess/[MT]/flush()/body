{
  for (  final Buffer b : bm.all())   if (b.dirty)   writeBlock(b);
  if (!dirty)   return;
  final DataOutput out=new DataOutput(meta.dbfile(pref + 'i'));
  out.writeNum(allBlocks);
  out.writeNum(blocks);
  out.writeNums(fpres);
  out.writeNums(pages);
  out.writeLongs(pagemap.toArray());
  out.close();
  dirty=false;
}
