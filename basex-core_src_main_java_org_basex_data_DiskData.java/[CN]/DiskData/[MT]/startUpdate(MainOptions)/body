{
  if (!table.lock(true))   throw new BaseXException(DB_PINNED_X,meta.name);
  if (opts.get(MainOptions.AUTOFLUSH)) {
    final IOFile uf=meta.updateFile();
    if (uf.exists())     throw new BaseXException(DB_UPDATED_X,meta.name);
    if (!uf.touch())     throw Util.notExpected("%: could not create lock file.",meta.name);
  }
}
