{
  final Expr e=args.length != 0 ? args[0] : checkCtx(ctx);
switch (func) {
case POS:
    return Itr.get(ctx.pos);
case LAST:
  return Itr.get(ctx.size);
case STRING:
Item it=e.atomic(ctx);
return it == null ? Str.ZERO : it.s() && !it.u() ? it : Str.get(it.str());
case NUMBER:
final Iter ir=ctx.iter(e);
it=ir.next();
return it == null || ir.next() != null ? Dbl.NAN : number(it);
case STRLEN:
return Itr.get(len(checkStr(e,ctx)));
case NORM:
return Str.get(norm(checkStr(e,ctx)));
case URIQNAME:
it=e.atomic(ctx);
if (it == null) return null;
return ((QNm)check(it,Type.QNM)).uri;
default :
return super.atomic(ctx);
}
}
