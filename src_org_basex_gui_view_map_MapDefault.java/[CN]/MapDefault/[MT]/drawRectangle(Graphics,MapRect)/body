{
  rect.x+=3;
  rect.w-=3;
  final int pre=rect.pre;
  final Context context=view.gui.context;
  final Data data=context.data();
  final Nodes current=context.current();
  final int kind=data.kind(pre);
  if (kind == Data.ELEM || kind == Data.DOC) {
    final byte[] name=kind == Data.DOC ? ViewData.content(data,pre,true) : current.size() == 1 && pre != 0 && pre == current.nodes[0] ? ViewData.path(data,pre) : ViewData.tag(data,pre);
    g.setColor(Color.black);
    g.setFont(font);
    BaseXLayout.chopString(g,name,rect.x,rect.y,rect.w);
  }
 else {
    g.setColor(COLORS[Math.min(255,rect.level * 2 + 8)]);
    g.setFont(mfont);
    final byte[] text=ViewData.content(data,pre,false);
    rect.thumb=MapRenderer.calcHeight(g,rect,text) >= rect.h;
    if (rect.thumb) {
      MapRenderer.drawThumbnails(g,rect,text);
    }
 else {
      MapRenderer.drawText(g,rect,text);
    }
  }
  rect.x-=3;
  rect.w+=3;
  return true;
}
