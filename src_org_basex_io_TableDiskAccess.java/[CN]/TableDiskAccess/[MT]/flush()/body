{
  for (  final Buffer b : bm.all())   if (b.dirty)   writeBlock(b);
  if (dirty) {
    final DataOutput out=new DataOutput(prop.dbfile(db,pref + 'i'));
    out.writeNum(allBlocks);
    out.writeNum(blocks);
    out.writeNum(size);
    out.writeNums(firstPres);
    out.writeNums(blockIndex);
    out.close();
    dirty=false;
  }
}
