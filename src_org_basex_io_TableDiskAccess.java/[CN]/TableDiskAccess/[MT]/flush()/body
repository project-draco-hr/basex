{
  for (  final Buffer b : bm.all())   if (b.dirty)   writeBlock(b);
  if (dirty) {
    final DataOutput out=new DataOutput(db,pref + 'i');
    out.writeNum(nrBlocks);
    out.writeNum(indexSize);
    out.writeNum(count);
    out.writeNums(firstPres);
    out.writeNums(blocks);
    out.close();
    dirty=false;
  }
}
