{
  final XQuery query=new XQuery("\n" + "        declare function local:compare($arg1 as xs:string, $arg2 as xs:string) { \n" + "            let $cps1 := string-to-codepoints($arg1), \n"+ "            $cps2 := string-to-codepoints($arg2) \n"+ "            return abs(count($cps1) - count($cps2)) + sum(for $x in 1 to min((count($cps1), count($cps2))) \n"+ "                                                          return if ($cps1[$x] ne $cps2[$x]) then 1 else ()) }; \n"+ "        local:compare(\"\", \"\"), \n"+ "        local:compare(\"a\", \"\"), \n"+ "        local:compare(\"\", \"a\"), \n"+ "        local:compare(\"a\", \"a\"), \n"+ "        local:compare(\"\", \"aa\"), \n"+ "        local:compare(\"aa\", \"ab\"), \n"+ "        local:compare(\"ba\", \"ba\"), \n"+ "        local:compare(\"bab\", \"bbb\"), \n"+ "        local:compare(\"aba\", \"bab\")\n"+ "     ",ctx);
  try {
    result=new QT3Result(query.value());
  }
 catch (  final Throwable trw) {
    result=new QT3Result(trw);
  }
 finally {
    query.close();
  }
  test(assertStringValue(false,"0 1 1 0 2 1 0 1 3"));
}
