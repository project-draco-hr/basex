{
  final TokenBuilder tb=new TokenBuilder();
  tb.add(text,0,ps);
  int cc=0;
  final int cl=str.length();
  for (int c=0; c < cl; ++c) {
    int ch=str.charAt(c);
    if (ch == '\r')     continue;
    if (ch < ' ' && !ws(ch))     ch='\n';
    tb.add(ch);
    ++cc;
  }
  tb.add(text,ps,text.length);
  text=tb.finish();
  for (int c=0; c < cc; ++c)   next();
}
