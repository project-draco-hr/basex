{
  if (root instanceof AxisPath) {
    Expr[] st=((Path)root).steps;
    root=((Path)root).root;
    for (    final Expr s : steps)     st=Array.add(st,s);
    steps=st;
    ctx.compInfo(OPTMERGE);
    ctx.value=initial(ctx);
  }
  voidStep(steps,ctx);
  for (int s=0; s < steps.length; s++) {
    final Expr e=steps[s].compile(ctx,scp);
    if (!(e instanceof Step))     return e;
    steps[s]=e;
  }
  optSteps(ctx);
  return optimize(ctx,scp);
}
