{
  final XQuery qdoc=new XQuery("doc(' " + PATH + '/'+ name+ "')",ctx);
  final XQValue doc=qdoc.value();
  final XQuery qset=new XQuery("*:test-set",ctx).context(doc);
  final XQValue set=qset.value();
  base=IO.get(doc.getBaseURI()).dir();
  qdoc.close();
  if (supported(set)) {
    final XQuery qenv=new XQuery("*:environment",ctx).context(set);
    final ObjList<QT3Env> envs=new ObjList<QT3Env>();
    for (    final XQItem ienv : qenv)     envs.add(new QT3Env(ctx,ienv));
    qenv.close();
    final XQuery qts=new XQuery("*:test-case",ctx).context(set);
    for (    final XQItem its : qts) {
      try {
        testCase(its,envs);
      }
 catch (      final IOException ex) {
        Util.debug(ex);
      }
    }
    qts.close();
  }
  qset.close();
}
