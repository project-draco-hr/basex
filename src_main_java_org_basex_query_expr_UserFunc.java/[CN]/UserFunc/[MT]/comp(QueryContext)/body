{
  if (compiled)   return this;
  compiled=true;
  final int s=ctx.vars.size();
  for (  final Var v : args)   ctx.vars.add(v);
  expr=expr.comp(ctx);
  ctx.vars.size(s);
  if (tco())   expr=expr.markTailCalls();
  if (ret != null && (ret.type == AtomType.BLN || ret.type == AtomType.FLT || ret.type == AtomType.DBL || ret.type == AtomType.QNM || ret.type == AtomType.URI) && ret.eq(expr.type())) {
    ctx.compInfo(OPTCAST,ret);
    cast=false;
  }
  return this;
}
