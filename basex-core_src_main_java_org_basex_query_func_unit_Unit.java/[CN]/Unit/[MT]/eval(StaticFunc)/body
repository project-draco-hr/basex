{
  current=func;
  try (final QueryContext qctx=new QueryContext(ctx)){
    qctx.listen=proc.listen;
    qctx.parse(input,file.path(),null);
    qctx.mainModule(new MainModule(find(qctx,func),new Expr[0]));
    qctx.compile();
    final Iter iter=qctx.iter();
    if (iter.next() != null)     throw UNIT_EMPTY_X.get(null,func.name.local());
  }
  finally {
    proc.proc(null);
  }
}
