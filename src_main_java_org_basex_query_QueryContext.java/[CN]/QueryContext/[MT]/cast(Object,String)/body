{
  if (type == null || type.isEmpty()) {
    return val instanceof Expr ? (Expr)val : JavaMapping.toValue(val);
  }
  if (type.equalsIgnoreCase(JSONSTR)) {
    return JsonMapConverter.parse(token(val.toString()),null);
  }
  if (type.equalsIgnoreCase(XMLSTR)) {
    try {
      return new DBNode(new IOContent(val.toString()),context.prop);
    }
 catch (    final IOException ex) {
      throw SAXERR.thrw(null,ex);
    }
  }
  final QNm nm=new QNm(token(type),this);
  if (!nm.hasURI() && nm.hasPrefix())   NOURI.thrw(null,nm);
  final Type typ=AtomType.find(nm,false);
  if (typ == null)   NOTYPE.thrw(null,nm);
  return typ.cast(val,null);
}
