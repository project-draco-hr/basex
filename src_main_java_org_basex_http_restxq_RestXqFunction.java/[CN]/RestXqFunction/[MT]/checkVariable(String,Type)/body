{
  final Var[] args=function.args;
  final Matcher m=TEMPLATE.matcher(tmp);
  if (!m.find())   error(INV_TEMPLATE,tmp);
  final byte[] vn=token(m.group(1));
  if (!XMLToken.isQName(vn))   error(INV_VARNAME,vn);
  final QNm qnm=new QNm(vn,context);
  int r=-1;
  while (++r < args.length && !args[r].name.eq(qnm))   ;
  if (r == args.length)   error(UNKNOWN_VAR,vn);
  if (args[r].declared)   error(VAR_ASSIGNED,vn);
  final SeqType st=args[r].type;
  if (st != null && !st.type.instanceOf(type))   error(INV_VARTYPE,vn,type);
  args[r].declared=true;
  return qnm;
}
