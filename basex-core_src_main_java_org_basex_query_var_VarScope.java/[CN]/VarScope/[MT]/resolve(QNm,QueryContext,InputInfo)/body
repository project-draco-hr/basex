{
  final Var v=current.get(name);
  if (v != null)   return new VarRef(ii,v);
  if (parent == null)   return null;
  final VarRef nonLocal=parent.resolve(name,ctx,ii);
  if (nonLocal == null)   return null;
  final Var local=add(new Var(ctx,sc,name,nonLocal.type()));
  closure.put(local,nonLocal);
  return new VarRef(ii,local);
}
