{
  final TokenBuilder tb=new TokenBuilder();
  final TextInput ti=new TextInput(in);
  try {
    if (enc != null)     ti.encoding(enc);
    for (int ch; (ch=ti.next()) != -1; ) {
      if (ch == '\r') {
        if (ti.next() != '\n')         ti.prev(1);
        ch='\n';
      }
      tb.add(ch);
    }
  }
  finally {
    ti.close();
  }
  return tb;
}
