{
switch (kind(pre)) {
case TEXT:
case COMM:
    return text(pre,true);
case ATTR:
  return text(pre,false);
case PI:
final byte[] txt=text(pre,true);
final int i=indexOf(txt,' ');
return i == -1 ? EMPTY : substring(txt,i + 1);
default :
final TokenBuilder tb=new TokenBuilder();
int p=pre;
final int s=p + size(p,kind(p));
while (p != s) {
final int k=kind(p);
if (k == TEXT) tb.add(text(p,true));
p+=attSize(p,k);
}
return tb.finish();
}
}
