{
  final int size=data.size(pre,data.kind(pre));
  final MemData tmp=new MemData(size,data.tags,data.atts,data.ns);
  for (int p=pre; p < pre + size; p++) {
    final int k=data.kind(p);
    final int d=p - data.parent(p,k);
switch (k) {
case Data.DOC:
      tmp.addDoc(data.text(p),data.size(p,k));
    break;
case Data.ELEM:
  tmp.addElem(data.tagID(p),data.tagNS(p),d,data.attSize(p,k),data.size(p,k));
break;
case Data.ATTR:
tmp.addAtt(data.attNameID(p),data.attNS(p),data.attValue(p),d,k);
break;
case Data.TEXT:
case Data.COMM:
case Data.PI:
tmp.addText(data.text(p),d,k);
break;
}
}
return tmp;
}
