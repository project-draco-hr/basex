{
  optarg=null;
  if (optindex >= args.length) {
    return -1;
  }
  String arg=args[optindex];
  int argLength=arg.length();
  if (arg.startsWith("-") && argLength > 1) {
    int optPos=optString.indexOf(args[optindex].charAt(multipleOptIndex));
    if (optPos > -1) {
      if (optString.length() - 1 > optPos && optString.charAt(optPos + 1) == ':') {
        optopt=args[optindex].charAt(multipleOptIndex);
        if (argLength > multipleOptIndex + 1) {
          optarg=arg.substring(multipleOptIndex + 1,argLength);
          ++optindex;
        }
 else {
          if (args.length > optindex + 1) {
            optindex+=2;
            optarg=args[optindex - 1];
          }
 else {
            optindex+=2;
            optarg=":";
          }
        }
        return optopt;
      }
 else {
        if (argLength == multipleOptIndex + 1) {
          ++optindex;
          int tmp=multipleOptIndex;
          multipleOptIndex=1;
          optopt=args[optindex - 1].charAt(tmp);
          return optopt;
        }
 else {
          ++multipleOptIndex;
          optopt=args[optindex].charAt(multipleOptIndex - 1);
          return optopt;
        }
      }
    }
 else {
      if (argLength == multipleOptIndex + 1) {
        ++optindex;
        multipleOptIndex=1;
      }
 else {
        ++multipleOptIndex;
      }
      return '?';
    }
  }
 else {
    if (args.length > 0 && args[optindex].length() > 0) {
      path=args[optindex];
      foundArgs.add(args[optindex]);
    }
    if (optindex + 1 == args.length) {
      return -1;
    }
 else {
      ++optindex;
      return getopt();
    }
  }
}
