{
  super(true,true,args);
  if (!ok)   return;
  Runtime.getRuntime().addShutdownHook(new Thread(){
    @Override public void run(){
      for (      final Session s : context.sessions)       s.core.stop();
      context.close();
    }
  }
);
  new Thread(){
    @Override public void run(){
      try {
        final ServerSocket ss=new ServerSocket(context.prop.num(Prop.PORT));
        while (running) {
          try {
            final Socket s=ss.accept();
            if (running)             context.add(new Session(s,BaseXServer.this));
          }
 catch (          final IOException ex) {
            Main.error(ex,false);
          }
        }
      }
 catch (      final Exception ex) {
        Main.error(ex,true);
      }
    }
  }
.start();
  outln(CONSOLE,SERVERMODE,console ? CONSOLE2 : SERVERSTART);
  if (console)   quit(console());
}
