{
  final long[] tok=cps(checkEStr(expr[0],ctx));
  final long[] srch=cps(checkStr(expr[1],ctx));
  final long[] rep=cps(checkStr(expr[2],ctx));
  final TokenBuilder tmp=new TokenBuilder(tok.length);
  for (int i=0; i < tok.length; ++i) {
    int j=-1;
    while (++j < srch.length && tok[i] != srch[j])     ;
    if (j < srch.length) {
      if (j >= rep.length)       continue;
      tmp.add((int)rep[j]);
    }
 else {
      tmp.add((int)tok[i]);
    }
  }
  return Str.get(tmp.finish());
}
