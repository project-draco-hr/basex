{
  final String doc="<n1>" + "<n2>T3</n2>T4<n5/>T6<n7/>" + "</n1>";
  final AtomicUpdateCache l=atomics(doc);
  final MemData m=new MemData(l.data);
  l.addInsert(3,2,clipT(m,"Tx0"),false);
  l.addDelete(3);
  l.addInsert(4,2,clipT(m,"Tx01"),false);
  l.addDelete(5);
  l.addReplace(6,clipT(m,"T6new"));
  l.addInsert(8,7,clipT(m,"Tx1"),false);
  l.addInsert(8,7,clipT(m,"Tx2"),false);
  l.addInsert(8,1,clipT(m,"Tx3"),false);
  l.execute(true);
  checkTextAdjacency(l.data,new byte[][]{token("Tx0Tx01"),token("T4T6new"),token("Tx1Tx2"),token("Tx3")});
}
