{
  final Constr c=new Constr(ii,sc);
  final FDoc doc=new FDoc(c.children,Token.EMPTY);
  c.add(ctx,expr);
  if (c.errAtt || !c.atts.isEmpty())   throw DOCATTS.get(ii);
  if (c.errNS || !c.nspaces.isEmpty())   throw DOCNS.get(ii);
  return doc.optimize();
}
