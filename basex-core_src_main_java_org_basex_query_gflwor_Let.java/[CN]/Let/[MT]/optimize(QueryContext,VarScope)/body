{
  if (!score && expr instanceof TypeCheck) {
    final TypeCheck tc=(TypeCheck)expr;
    if (tc.isRedundant(var) || var.adoptCheck(tc.seqType,tc.promote)) {
      qc.compInfo(OPTCAST,tc.seqType);
      expr=tc.expr;
    }
  }
  seqType=score ? SeqType.DBL : expr.seqType();
  var.refineType(seqType,qc,info);
  if (var.checksType() && expr.isValue()) {
    expr=var.checkType((Value)expr,qc,info,true);
    var.refineType(expr.seqType(),qc,info);
  }
  size=score ? 1 : expr.size();
  var.size=size;
  return this;
}
