{
  final XQuery query=new XQuery("\n" + "      \tfor $b in //book \n" + "      \tlet $e := $b/*[contains(string(.), \"Suciu\") and ends-with(local-name(.), \"or\")] \n"+ "      \twhere exists($e) \n"+ "      \treturn <book> { $b/title } { $e } </book>\n"+ "      ",ctx);
  try {
    query.context(node(file("docs/bib.xml")));
    result=new QT3Result(query.value());
  }
 catch (  final Throwable trw) {
    result=new QT3Result(trw);
  }
 finally {
    query.close();
  }
  test(assertSerialization("<book><title>Data on the Web</title><author><last>Suciu</last><first>Dan</first></author></book>",false));
}
