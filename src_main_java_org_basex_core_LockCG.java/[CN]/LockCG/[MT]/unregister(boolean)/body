{
synchronized (mutex) {
    if (w) {
      writer=false;
      mutex.notifyAll();
    }
 else {
      if (--readers == 0)       mutex.notifyAll();
    }
  }
}
