{
  final int h=xc.getHour() == UNDEF ? 0 : xc.getHour();
  final int m=xc.getMinute() == UNDEF ? 0 : xc.getMinute();
  final int s=xc.getSecond() == UNDEF ? 0 : xc.getSecond();
  int z=xc.getTimezone();
  if (z == UNDEF) {
    final long ms=System.currentTimeMillis();
    z=Calendar.getInstance().getTimeZone().getOffset(ms) / 60000;
  }
  BigDecimal bd=xc.getFractionalSecond();
  if (bd == null)   bd=BigDecimal.valueOf(0);
  return bd.add(BigDecimal.valueOf(h * 3600 + m * 60 - z * 60 + s));
}
