{
  meta=new MetaData(pr);
  table=new TableMemAccess(meta);
  if (meta.updindex) {
    idmap=new IdPreMap(meta.lastid);
    txtindex=txt == null ? new UpdatableMemValues(this) : txt;
    atvindex=atv == null ? new UpdatableMemValues(this) : atv;
  }
 else {
    txtindex=txt == null ? new MemValues(this) : txt;
    atvindex=atv == null ? new MemValues(this) : atv;
  }
  tagindex=tag == null ? new Names(meta) : tag;
  atnindex=att == null ? new Names(meta) : att;
  paths=ps == null ? new PathSummary(this) : ps;
  nspaces=ns == null ? new Namespaces() : ns;
}
