{
  if (!(visitor.visitAll(copies) && visitor.visitAll(expr)))   return false;
  for (int i=copies.length; --i >= 0; )   if (!visitor.undeclared(copies[i].var))   return false;
  return true;
}
