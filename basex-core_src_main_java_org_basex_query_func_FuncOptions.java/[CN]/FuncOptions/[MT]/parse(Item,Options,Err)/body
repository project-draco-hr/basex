{
  if (item == null)   return;
  try {
    if (item instanceof Map) {
      final Map map=(Map)item;
      for (      final Item it : map.keys()) {
        if (!(it instanceof AStr))         FUNCMP.thrw(info,map.description(),AtomType.STR,it.type);
        final Value val=map.get(it,info);
        if (!val.isItem())         FUNCMP.thrw(info,map.description(),AtomType.ITEM,val);
        options.assign(string(it.string(null)),value(val));
      }
    }
 else {
      if (!test.eq(item))       ELMMAPTYPE.thrw(info,root,item.type);
      final AxisIter ai=((ANode)item).children();
      for (ANode n; (n=ai.next()) != null; ) {
        if (n.type != NodeType.ELM)         continue;
        final QNm qn=n.qname();
        final String name=string(qn.local());
        if (eq(qn.uri(),root.uri())) {
          final byte[] val=n.attribute(VALUE);
          options.assign(name,string(val == null ? n.string() : val));
        }
      }
    }
  }
 catch (  final BaseXException ex) {
    error.thrw(info,ex);
  }
}
