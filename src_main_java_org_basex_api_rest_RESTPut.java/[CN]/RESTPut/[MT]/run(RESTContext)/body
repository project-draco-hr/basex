{
  final Map<?,?> map=ctx.req.getParameterMap();
  if (map.size() != 0)   throw new RESTException(SC_BAD_REQUEST,ERR_NOPARAM);
  final Session session=ctx.session;
  if (ctx.depth() == 0)   throw new RESTException(SC_NOT_FOUND,ERR_NOPATH);
  final String ct=ctx.req.getContentType();
  final boolean xml=ct == null || MimeTypes.APP_XML.equals(ct);
  if (ctx.depth() == 1) {
    if (xml) {
      session.create(ctx.db(),ctx.in);
    }
 else {
      session.create(ctx.db(),new ArrayInput(""));
      session.store(ctx.db(),ctx.in);
    }
  }
 else {
    open(ctx);
    if (xml) {
      session.replace(ctx.dbpath(),ctx.in);
    }
 else {
      session.store(ctx.dbpath(),ctx.in);
    }
  }
  throw new RESTException(SC_CREATED,session.info());
}
