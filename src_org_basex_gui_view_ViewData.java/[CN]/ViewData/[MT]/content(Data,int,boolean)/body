{
switch (data.kind(p)) {
case Data.ELEM:
    return data.tag(p);
case Data.DOC:
  return data.text(p);
case Data.TEXT:
return s ? TEXT : data.text(p);
case Data.COMM:
return s ? COMM : data.text(p);
case Data.PI:
return s ? PI : data.text(p);
}
final TokenBuilder tb=new TokenBuilder();
tb.add(ATT);
tb.add(data.attName(p));
if (!s) {
tb.add(ATT1);
tb.add(data.attValue(p));
tb.add(ATT2);
}
return tb.finish();
}
