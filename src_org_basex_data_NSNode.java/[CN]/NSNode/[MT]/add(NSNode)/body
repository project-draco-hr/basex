{
  int s=ch.length;
  while (--s >= 0 && n.pre < ch[s].pre)   ;
  if (s >= 0 && n.pre == ch[s].pre) {
    for (int v=0; v < n.vals.length; v+=2) {
      ch[s].add(n.vals[v],n.vals[v + 1]);
    }
  }
 else {
    final NSNode[] tmp=new NSNode[ch.length + 1];
    tmp[++s]=n;
    System.arraycopy(ch,0,tmp,0,s);
    System.arraycopy(ch,s,tmp,s + 1,ch.length - s);
    ch=tmp;
  }
}
