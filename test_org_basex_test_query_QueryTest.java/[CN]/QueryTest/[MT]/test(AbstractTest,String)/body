{
  final String file=test.doc.replaceAll("\\\"","\\\\\"");
  final String name=BaseX.name(test);
  Process proc=new CreateDB(file,name);
  boolean ok=proc.execute(context);
  if (ok) {
    for (    final Object[] qu : test.queries) {
      final boolean correct=qu.length == 3;
      final String query=qu[correct ? 2 : 1].toString();
      final String cmd=qu[0] + ": " + query;
      if (VERBOSE)       err(cmd,ext);
      proc=new XQuery(query);
      counter++;
      if (proc.execute(context)) {
        final Result val=proc.result();
        final Result cmp=correct ? (Result)qu[1] : null;
        if (val instanceof Nodes && cmp instanceof Nodes) {
          ((Nodes)cmp).data=((Nodes)val).data;
        }
        if (!correct || !val.same(cmp)) {
          err(cmd,"  Right: " + (correct ? qu[1] : "error") + "\n  Found: "+ val+ (ext != null ? "\n  Flags: " + ext : ""));
          ok=false;
          wrong++;
          continue;
        }
      }
 else       if (correct) {
        err(qu[0].toString(),proc.info() + (ext != null ? "\n  Flags: " + ext : ""));
        wrong++;
        ok=false;
      }
    }
  }
 else {
    err(proc.info(),null);
    wrong++;
  }
  new DropDB(name).execute(context);
  return ok;
}
