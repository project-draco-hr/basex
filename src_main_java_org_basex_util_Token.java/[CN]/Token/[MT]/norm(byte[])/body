{
  final int l=token.length;
  final byte[] tmp=new byte[l];
  int c=0;
  boolean ws1=true;
  for (int i=0; i < l; i++) {
    final boolean ws2=ws(token[i]);
    if (ws2 && ws1)     continue;
    tmp[c++]=ws2 ? (byte)' ' : token[i];
    ws1=ws2;
  }
  if (c > 0 && ws(tmp[c - 1]))   c--;
  return c == l ? tmp : Arrays.copyOf(tmp,c);
}
