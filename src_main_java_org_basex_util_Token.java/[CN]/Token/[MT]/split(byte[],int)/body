{
  final int l=token.length;
  final byte[][] split=new byte[l][];
  int s=0;
  final TokenBuilder tb=new TokenBuilder();
  for (int i=0; i < l; i+=cl(token,i)) {
    final int c=cp(token,i);
    if (c == sep) {
      if (tb.size() != 0) {
        split[s++]=tb.finish();
        tb.reset();
      }
    }
 else {
      tb.add(c);
    }
  }
  if (tb.size() != 0)   split[s++]=tb.finish();
  return Array.copyOf(split,s);
}
