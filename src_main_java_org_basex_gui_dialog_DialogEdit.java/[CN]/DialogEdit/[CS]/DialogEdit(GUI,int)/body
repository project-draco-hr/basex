{
  super(main,EDIT_DATA);
  pre=p;
  BaseXBack pp=new BaseXBack(new BorderLayout());
  final Context context=gui.context;
  final Data data=context.data();
  kind=data.kind(pre);
  final String title=Util.info(EDIT_X,NODE_KINDS[kind]);
  final BaseXLabel label=new BaseXLabel(title,true,true);
  pp.add(label,BorderLayout.NORTH);
  if (kind == Data.ELEM) {
    old1=string(data.name(pre,kind));
  }
 else   if (kind == Data.DOC) {
    old1=string(data.text(pre,true));
  }
 else   if (kind == Data.TEXT || kind == Data.COMM) {
    old3=data.atom(pre);
  }
 else   if (kind == Data.ATTR) {
    old1=string(data.name(pre,kind));
    old2=string(data.atom(pre));
  }
 else {
    old1=string(data.name(pre,kind));
    old3=data.atom(pre);
  }
  final BaseXBack b=new BaseXBack(new BorderLayout(0,4));
  if (old1 != null) {
    input1=new BaseXTextField(old1,this);
    input1.addKeyListener(keys);
    BaseXLayout.setWidth(input1,320);
    b.add(input1,BorderLayout.NORTH);
  }
  if (old2 != null) {
    input2=new BaseXTextField(old2,this);
    input2.addKeyListener(keys);
    b.add(input2,BorderLayout.CENTER);
  }
  if (old3 != null) {
    input3=new BaseXEditor(true,this);
    input3.setText(old3);
    input3.addKeyListener(keys);
    input3.setPreferredSize(new Dimension(320,200));
    b.add(input3,BorderLayout.CENTER);
    setResizable(true);
  }
  pp.add(b,BorderLayout.CENTER);
  set(pp,BorderLayout.CENTER);
  pp=new BaseXBack(new BorderLayout());
  info=new BaseXLabel(" ").border(8,0,2,0);
  pp.add(info,BorderLayout.WEST);
  buttons=okCancel();
  pp.add(buttons,BorderLayout.EAST);
  set(pp,BorderLayout.SOUTH);
  finish(null);
}
