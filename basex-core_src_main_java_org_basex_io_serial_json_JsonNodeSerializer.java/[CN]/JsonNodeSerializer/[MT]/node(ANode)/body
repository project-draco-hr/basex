{
  final boolean doc=node.type == NodeType.DOC;
  final boolean elm=node.type == NodeType.ELM && eq(JSON,node.name());
  if (custom || doc || elm) {
    final boolean c=custom;
    if (!custom)     custom=elm;
    super.node(node);
    custom=c;
  }
 else   if (adaptive != null && node.type == NodeType.ATT || node.type == NodeType.NSP) {
    adaptive.serialize((Value)node);
  }
 else {
    try (final Serializer ser=nodeSerializer()){
      ser.serialize(node);
      ser.reset();
    }
     string(cache.toArray());
    cache.reset();
  }
}
