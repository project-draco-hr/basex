{
  final int nsl=sl + size;
  if (nsl > stack.length) {
    int len=stack.length;
    do     len*=2;
 while (nsl > len);
    final Value[] nst=new Value[len];
    System.arraycopy(stack,0,nst,0,sl);
    stack=nst;
  }
  final int ret=fp;
  fp=sl;
  sl=nsl;
  return ret;
}
