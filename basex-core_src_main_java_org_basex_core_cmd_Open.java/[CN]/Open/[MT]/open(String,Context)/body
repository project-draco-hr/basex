{
synchronized (ctx.dbs) {
    Data data=ctx.dbs.pin(name);
    if (data != null) {
      if (!ctx.perm(Perm.READ,data.meta)) {
        ctx.dbs.unpin(data);
        throw new BaseXException(PERM_REQUIRED_X,Perm.READ);
      }
    }
 else {
      if (!ctx.soptions.dbexists(name))       throw new BaseXException(dbnf(name));
      final MetaData meta=new MetaData(name,ctx);
      if (meta.updateFile().exists())       throw new BaseXException(Text.DB_UPDATED_X,meta.name);
      meta.users.read();
      if (!ctx.perm(Perm.READ,meta))       throw new BaseXException(PERM_REQUIRED_X,Perm.READ);
      data=new DiskData(meta);
      ctx.dbs.add(data);
    }
    return data;
  }
}
