{
  final XQuery query=new XQuery("\n" + "        for $a in (/) return \n" + "        for $b in $a/child::site return \n"+ "        for $c in $b/child::people return \n"+ "        for $d in $c/child::person return \n"+ "            if ((some $id in $d/attribute::id satisfies \n"+ "                    typeswitch ($id)\n"+ "                     case $n as node() return $id = \"person0\"\n"+ "                     default $d return ())) \n"+ "            then $d/child::name \n"+ "            else (), \n"+ "        for $b in /site/people/person where $b/@id=\"person0\" return $b/name, \n"+ "        /site/people/person[@id eq \"person0\"]/name",ctx);
  try {
    query.context(node(file("app/XMark/XMarkAuction.xml")));
    result=new QT3Result(query.value());
  }
 catch (  final Throwable trw) {
    result=new QT3Result(trw);
  }
 finally {
    query.close();
  }
  test(assertSerialization("<name>Seongtaek Mattern</name><name>Seongtaek Mattern</name><name>Seongtaek Mattern</name>",false));
}
