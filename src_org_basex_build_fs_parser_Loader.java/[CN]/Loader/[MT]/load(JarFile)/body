{
  Enumeration<JarEntry> e=jar.entries();
  ArrayList<Class<?>> foundClasses=new ArrayList<Class<?>>();
  ArrayList<JarEntry> subClasses=new ArrayList<JarEntry>();
  ArrayList<JarEntry> subSubClasses=new ArrayList<JarEntry>();
  while (e.hasMoreElements()) {
    JarEntry entry=e.nextElement();
    String name=entry.getName();
    if (entry.isDirectory() || name.endsWith("MANIFEST.MF")) {
      continue;
    }
    if (name.contains("$")) {
      if (name.indexOf("$") != name.lastIndexOf("$")) {
        subSubClasses.add(entry);
        continue;
      }
      subClasses.add(entry);
      continue;
    }
    Class<?> c=load(jar,entry);
    foundClasses.add(c);
  }
  for (  JarEntry entry : subClasses)   load(jar,entry);
  for (  JarEntry entry : subSubClasses)   load(jar,entry);
  int counter=initializeClasses(foundClasses);
  jar.close();
  String[] classNames=new String[counter];
  for (int i=0; i < counter; i++) {
    classNames[i]=foundClasses.get(i).getName();
  }
  return classNames;
}
