{
  final Enumeration<JarEntry> e=jar.entries();
  final ArrayList<Class<?>> foundClasses=new ArrayList<Class<?>>();
  final ArrayList<JarEntry> subClasses=new ArrayList<JarEntry>();
  final ArrayList<JarEntry> subSubClasses=new ArrayList<JarEntry>();
  try {
    while (e.hasMoreElements()) {
      final JarEntry entry=e.nextElement();
      final String name=entry.getName();
      if (entry.isDirectory() || name.endsWith("MANIFEST.MF")) {
        continue;
      }
      if (name.contains("$")) {
        if (name.indexOf("$") != name.lastIndexOf("$")) {
          subSubClasses.add(entry);
          continue;
        }
        subClasses.add(entry);
        continue;
      }
      final Class<?> c=load(jar,entry);
      foundClasses.add(c);
    }
    for (    final JarEntry entry : subClasses)     load(jar,entry);
    for (    final JarEntry entry : subSubClasses)     load(jar,entry);
  }
 catch (  final IOException ex) {
    throw ex;
  }
catch (  final Throwable t) {
    BaseX.errln("Failed to load class (%)",t.getMessage());
  }
  final int counter=initializeClasses(foundClasses);
  jar.close();
  return foundClasses.subList(0,counter).toArray(new Class<?>[counter]);
}
