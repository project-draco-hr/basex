{
  final Auth a=HttpManager.request().getAuthorization();
  final String user=a != null ? a.getUser() : null;
  final String pass=a != null ? a.getPassword() : null;
  final HTTPSession session=new HTTPSession(http,user,pass);
  if (session.user == null)   return NOAUTH;
  final Path path=Path.path(dbpath);
  if (path.isRoot())   return new BXAllDatabasesResource(session);
  final String db=path.getFirst();
  try {
    final Session s=session.login();
    try {
      return path.getLength() == 1 ? listDbs(s).contains(db) ? new BXDatabase(db,session) : null : resource(s,db,path.getStripFirst().toString(),session);
    }
  finally {
      s.close();
    }
  }
 catch (  final Exception ex) {
    handle(ex);
  }
  return null;
}
