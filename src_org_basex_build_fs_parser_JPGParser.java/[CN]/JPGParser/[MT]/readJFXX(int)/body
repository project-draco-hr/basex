{
  final long pos=bfc.position();
  if (!checkNextBytes(HEADER_JFXX)) {
    bfc.position(pos + size);
    return;
  }
  int s=size - HEADER_JFXX.length - 1;
  int width=0;
  int height=0;
switch (bfc.get()) {
case 0x10:
    fsparser.fileStartEvent("Thumbnail","jpg",bfc.absolutePosition());
  fsparser.metaEvent(new Metadata(MetaType.IMAGE));
fsparser.metaEvent(new Metadata(MimeType.JPG.get()));
break;
case 0x11:
width=bfc.get();
height=bfc.get();
s-=2;
fsparser.fileStartEvent("Thumbnail",null,bfc.absolutePosition());
fsparser.metaEvent(new Metadata(MetaType.IMAGE));
fsparser.metaEvent(meta.setString(StringField.DESCRIPTION,"Thumbnail coded using 1 byte/pixel."));
break;
case 0x13:
width=bfc.get();
height=bfc.get();
s-=2;
fsparser.fileStartEvent("Thumbnail",null,bfc.absolutePosition());
fsparser.metaEvent(new Metadata(MetaType.IMAGE));
fsparser.metaEvent(meta.setString(StringField.DESCRIPTION,"Thumbnail coded using 3 bytes/pixel."));
break;
default :
BaseX.debug("JPGParser: Illegal or unsupported JFIF header (%)",bfc.getFileName());
}
fsparser.metaEvent(meta.setInt(IntField.PIXEL_WIDTH,width));
fsparser.metaEvent(meta.setInt(IntField.PIXEL_HEIGHT,height));
fsparser.fileEndEvent(s);
bfc.skip(s);
}
