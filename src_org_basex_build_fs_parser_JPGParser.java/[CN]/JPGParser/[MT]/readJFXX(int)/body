{
  final long pos=bfc.position();
  if (!checkNextBytes(HEADER_JFXX)) {
    bfc.position(pos + size);
    return;
  }
  int s=size - HEADER_JFXX.length - 1;
  int width=0;
  int height=0;
switch (bfc.get()) {
case 0x10:
    fsparser.startContent(bfc.absolutePosition(),s);
  fsparser.metaEvent(meta.setMetaType(MetaType.PICTURE));
fsparser.metaEvent(meta.setMimeType(MimeType.JPG));
fsparser.metaEvent(meta.setString(StringField.TITLE,"Thumbnail"));
break;
case 0x11:
width=bfc.get();
height=bfc.get();
s-=2;
fsparser.startContent(bfc.absolutePosition(),s);
fsparser.metaEvent(meta.setMetaType(MetaType.PICTURE));
fsparser.metaEvent(meta.setString(StringField.TITLE,"Thumbnail"));
fsparser.metaEvent(meta.setString(StringField.DESCRIPTION,"Thumbnail coded using 1 byte/pixel."));
break;
case 0x13:
width=bfc.get();
height=bfc.get();
s-=2;
fsparser.startContent(bfc.absolutePosition(),s);
fsparser.metaEvent(meta.setMetaType(MetaType.PICTURE));
fsparser.metaEvent(meta.setString(StringField.TITLE,"Thumbnail"));
fsparser.metaEvent(meta.setString(StringField.DESCRIPTION,"Thumbnail coded using 3 bytes/pixel."));
break;
default :
BaseX.debug("JPGParser: Illegal or unsupported JFIF header (%)",bfc.getFileName());
}
fsparser.metaEvent(meta.setInt(IntField.PIXEL_WIDTH,width));
fsparser.metaEvent(meta.setInt(IntField.PIXEL_HEIGHT,height));
fsparser.endContent();
bfc.skip(s);
}
