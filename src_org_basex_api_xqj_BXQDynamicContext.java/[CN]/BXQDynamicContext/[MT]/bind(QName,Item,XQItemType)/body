{
  opened();
  valid(var,QName.class);
  final QNm name=new QNm(Token.token(var.getLocalPart()));
  Var v=new Var(name,true);
  if (this instanceof BXQPreparedExpression) {
    v=query.ctx.vars.get(v);
    if (v == null)     throw new BXQException(VAR,var);
  }
 else {
    query.ctx.vars.addGlobal(v);
  }
  try {
    final Type tt=check(it.type,t);
    v.bind(tt == it.type ? it : tt.e(it,null),null);
  }
 catch (  final QueryException ex) {
    throw new BXQException(ex);
  }
}
