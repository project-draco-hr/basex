{
  final Matcher matcher=uriRef.matcher(uri);
  if (!matcher.matches())   return ParsedUri.invalid;
  final String scheme=matcher.group("scheme");
  final String authority=matcher.group("authority");
  final String userInfo=matcher.group("userinfo");
  final String host=matcher.group("host");
  final String port=matcher.group("port");
  final String query=matcher.group("query");
  final String fragment=matcher.group("fragment");
  String path=matcher.group("pathAbempty");
  if (path == null) {
    path=matcher.group("pathAbsolute");
    if (path == null) {
      path=matcher.group("pathRootless");
      if (path == null) {
        path=matcher.group("pathNoScheme");
      }
    }
  }
  return new ParsedUri.Builder().valid(true).scheme(scheme).authority(authority).userInfo(userInfo).host(host).port(port == null ? -1 : Integer.parseInt(port)).path(path).query(query).fragment(fragment).build();
}
