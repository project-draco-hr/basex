{
  final String src=general.input();
  final String trg=target.getText().trim();
  if (comp == add) {
    general.setOptions();
    final GUIThread run=new GUIThread(){
      @Override public void run(){
        dialog.resources.refreshNewFolder(trg);
      }
    }
;
    DialogProgress.execute(dialog,run,new Add(trg,src));
  }
 else   if (comp == optimize) {
    DialogProgress.execute(dialog,new Optimize());
  }
 else   if (comp == optimizeAll) {
    DialogProgress.execute(dialog,new OptimizeAll());
  }
 else {
    boolean ok=general.action(comp,false);
    if (comp == general.browse || comp == general.input)     target.setText(general.dbname);
    final String inf;
    if (ok) {
      ok=MetaData.normPath(trg) != null;
      inf=ok ? null : Util.info(INVALID_X,TARGET_PATH);
    }
 else {
      inf=RES_NOT_FOUND;
    }
    general.info.setText(inf,Msg.ERROR);
    add.setEnabled(ok);
    optimize.setEnabled(!dialog.gui.context.data().meta.uptodate);
  }
}
