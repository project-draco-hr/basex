{
  checkUp(expr,ctx);
  super.comp(ctx);
  Expr e=this;
  if (expr.value()) {
    e=preEval(ctx);
  }
 else   if (type.type == Type.BLN || type.type == Type.FLT || type.type == Type.DBL || type.type == Type.QNM || type.type == Type.URI) {
    final SeqType t=expr.type();
    if (t.eq(type))     e=expr;
 else     if (t.type == type.type && t.one() && type.zeroOrOne())     e=expr;
    if (e != this)     optPre(e,ctx);
  }
  return e;
}
