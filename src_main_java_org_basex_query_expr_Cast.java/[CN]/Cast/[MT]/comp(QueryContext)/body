{
  checkUp(expr,ctx);
  super.comp(ctx);
  Expr e=this;
  if (expr.value()) {
    e=preEval(ctx);
  }
 else   if (type.type == AtomType.BLN || type.type == AtomType.FLT || type.type == AtomType.DBL || type.type == AtomType.QNM || type.type == AtomType.URI) {
    final SeqType t=expr.type();
    if (t.eq(type))     e=expr;
 else     if (t.type == type.type && t.one() && type.zeroOrOne())     e=expr;
    if (e != this)     optPre(e,ctx);
  }
  return e;
}
