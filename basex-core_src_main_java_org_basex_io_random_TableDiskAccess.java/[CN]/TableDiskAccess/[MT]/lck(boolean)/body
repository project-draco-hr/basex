{
  if (fl != null && shared == fl.isShared())   return true;
  if (fl != null)   fl.release();
  fl=file.getChannel().tryLock(0,Long.MAX_VALUE,shared);
  return fl != null;
}
