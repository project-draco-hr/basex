{
  if (rep || del) {
    final PrimitiveType dominantOp=rep ? REPLACENODE : DELETENODE;
    final List<Primitive> up=new ArrayList<Primitive>(prim.size());
    for (    final Primitive p : prim) {
      final PrimitiveType t=p.type();
      if (t == INSERTBEFORE || t == INSERTAFTER || t == dominantOp)       up.add(p);
    }
    prim=up;
  }
}
