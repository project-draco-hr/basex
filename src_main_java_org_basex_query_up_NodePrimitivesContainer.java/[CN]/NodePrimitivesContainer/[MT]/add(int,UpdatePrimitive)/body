{
  final PrimitiveType pt=p.type();
  del|=pt == DELETE;
  rep|=pt == REPLACENODE;
  textAdjacency=del || rep || pt == INSERTBEFORE || pt == INSERTAFTER;
  if (i < primitives.size()) {
    final UpdatePrimitive a=primitives.get(i);
    if (a != null && a.type() == p.type())     a.merge(p);
 else     primitives.add(i,p);
  }
 else {
    primitives.add(p);
  }
}
