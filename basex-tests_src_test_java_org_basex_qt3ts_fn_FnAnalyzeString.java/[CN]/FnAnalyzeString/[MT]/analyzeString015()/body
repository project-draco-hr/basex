{
  final XQuery query=new XQuery("let $in := \n" + "\"Mary had a little lamb,\n" + "it's fleece was black as soot,\n"+ "and everywhere that Mary went,\n"+ "it put its sooty foot.\"\n"+ "            return analyze-string($in, \"^.+$\", \"m\")",ctx);
  try {
    result=new QT3Result(query.value());
  }
 catch (  final Throwable trw) {
    result=new QT3Result(trw);
  }
 finally {
    query.close();
  }
  test((assertSerialization("<fn:analyze-string-result xmlns:fn=\"http://www.w3.org/2005/xpath-functions\"><fn:match>Mary had a little lamb,</fn:match><fn:non-match>\n</fn:non-match><fn:match>it's fleece was black as soot,</fn:match><fn:non-match>\n</fn:non-match><fn:match>and everywhere that Mary went,</fn:match><fn:non-match>\n</fn:non-match><fn:match>it put its sooty foot.</fn:match></fn:analyze-string-result>",true)));
}
