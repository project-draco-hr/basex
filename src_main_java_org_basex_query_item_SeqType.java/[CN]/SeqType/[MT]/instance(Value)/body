{
  final long size=val.size();
  if (occ.min > size || size > occ.max)   return false;
  if (size == 0)   return true;
  final MapType mt=type.map() ? (MapType)type : null;
  for (long i=0; i < size; i++) {
    final Item it=val.itemAt(i);
    if (!(mt != null ? it.map() && ((Map)it).hasType(mt) : it.type.instance(type) && checkExt(it)))     return false;
    if (i == 0 && val.homogenous())     return true;
  }
  return true;
}
