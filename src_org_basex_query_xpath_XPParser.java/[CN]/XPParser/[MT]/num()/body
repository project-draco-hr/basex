{
  tk.reset();
  boolean dot=true;
  boolean exp=true;
  char c=curr();
  while (c != 0 && (digit(c) || dot && exp && c == '.' || exp && (c == 'E' || c == 'e'))) {
    if (c == '.') {
      dot=false;
    }
 else     if (c == 'e' || c == 'E') {
      exp=false;
    }
    tk.add(consume());
    c=curr();
  }
  return toDouble(tk.finish());
}
