{
  tk.reset();
  boolean dot=true;
  boolean exp=true;
  char curr=curr();
  while (curr != 0 && (digit(curr) || dot && exp && curr == '.' || exp && (curr == 'E' || curr == 'e'))) {
    if (curr == '.') {
      dot=false;
    }
 else     if (curr == 'e' || curr == 'E') {
      exp=false;
    }
    tk.add(consume());
    curr=curr();
  }
  return toDouble(tk.finish());
}
