{
  int bufSize=fcLimit < Metadata.DEFAULT_BUFFER_SIZE ? (int)fcLimit : Metadata.DEFAULT_BUFFER_SIZE;
  buf=ByteBuffer.allocateDirect(bufSize);
  buf.position(buf.limit());
  int size=readID3v2Header();
  int remainingFrames=Frame.values().length;
  while (size > MINIMAL_FRAME_SIZE) {
    if (remainingFrames == 0)     break;
    int res=readID3v2Frame();
    if (res > 0) {
      size-=res;
      remainingFrames--;
    }
 else     size+=res;
  }
}
