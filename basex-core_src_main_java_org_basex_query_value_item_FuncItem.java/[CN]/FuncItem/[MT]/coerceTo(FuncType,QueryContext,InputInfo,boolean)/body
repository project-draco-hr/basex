{
  if (params.length != ft.argTypes.length)   throw castError(ii,this,ft);
  final FuncType tp=funcType();
  if (tp.instanceOf(ft))   return this;
  final VarScope vsc=new VarScope(sc);
  final Var[] vs=new Var[params.length];
  final Expr[] refs=new Expr[vs.length];
  for (int i=vs.length; i-- > 0; ) {
    vs[i]=vsc.newLocal(qc,params[i].name,ft.argTypes[i],true);
    refs[i]=new VarRef(ii,vs[i]);
  }
  final Expr e=new DynFuncCall(ii,sc,false,this,refs);
  final Expr optimized=opt ? e.optimize(qc,vsc) : e, checked;
  if (ft.retType == null || tp.retType != null && tp.retType.instanceOf(ft.retType)) {
    checked=optimized;
  }
 else {
    final TypeCheck tc=new TypeCheck(sc,ii,optimized,ft.retType,true);
    checked=opt ? tc.optimize(qc,vsc) : tc;
  }
  checked.markTailCalls(null);
  return new FuncItem(sc,ann,name,vs,ft,checked,vsc.stackSize());
}
