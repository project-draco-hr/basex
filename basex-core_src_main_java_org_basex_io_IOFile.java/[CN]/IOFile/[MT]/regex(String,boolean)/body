{
  final StringBuilder sb=new StringBuilder();
  for (  final String g : glob.split(",")) {
    final String gl=g.trim();
    if (sb.length() != 0)     sb.append('|');
    boolean suf=false;
    for (int f=0; f < gl.length(); f++) {
      char ch=gl.charAt(f);
      if (ch == '*') {
        suf=true;
        sb.append(gl.endsWith(".") ? "[^.]" : ".");
      }
 else       if (ch == '?') {
        ch='.';
        suf=true;
      }
 else       if (ch == '.') {
        suf=true;
        if (f + 1 == gl.length())         break;
        sb.append('\\');
      }
 else       if (!Character.isLetterOrDigit(ch)) {
        sb.append('\\');
      }
      sb.append(ch);
    }
    if (!suf && sub)     sb.append(".*");
  }
  return Prop.CASE ? sb.toString() : sb.toString().toLowerCase(Locale.ENGLISH);
}
