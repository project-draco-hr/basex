{
  if (super.comp(ctx) != this)   return Seq.EMPTY;
  root=root.comp(ctx);
  if (root.e()) {
    ctx.compInfo(OPTPRE,this);
    return Seq.EMPTY;
  }
  if (pred.length == 0)   return root;
  final Expr p=pred[0];
  final Pos pos=p instanceof Pos ? (Pos)p : null;
  final boolean last=p instanceof Fun && ((Fun)p).func == FunDef.LAST;
  if (pred.length > 1 || !last && pos == null && uses(Use.POS,ctx))   return this;
  return new IterPred(root,pred,pos,last);
}
