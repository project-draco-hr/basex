{
  final byte[] filterPath=TreeNode.preparePath(token(filterText.getText()));
  if (eq(filterPath,SLASH)) {
    refreshFolder(root);
    return;
  }
  final Data data=dialog.gui.context.data();
  root.removeAllChildren();
  int cmax=TreeFolder.MAXC;
  if (data.resources.isDir(filterPath)) {
    root.add(new TreeFolder(TreeFolder.name(filterPath),TreeFolder.path(filterPath),tree,data));
    cmax--;
  }
  final byte[] name=TreeFolder.name(filterPath);
  final byte[] sub=TreeFolder.path(filterPath);
  final TreeFolder f=new TreeFolder(TreeFolder.name(sub),TreeFolder.path(sub),tree,data);
  cmax=f.addLeaves(name,cmax,root);
  if (cmax <= 0)   root.add(new TreeLeaf(token("..."),sub,false,true,tree,data));
  ((DefaultTreeModel)tree.getModel()).nodeStructureChanged(root);
}
