{
  final XQuery query=new XQuery("\n" + "        <result> { \n" + "            for $item in $items//item_tuple \n"+ "            let $b := $bids//bid_tuple[itemno = $item/itemno] \n"+ "            let $z := max($b/bid) \n"+ "            where exactly-one($item/reserve_price) * 2 < $z \n"+ "            return <successful_item> { $item/itemno } { $item/description } { $item/reserve_price } \n"+ "                    <high_bid>{$z }</high_bid> \n"+ "                   </successful_item> \n"+ "        } </result>\n"+ "      ",ctx);
  try {
    query.bind("$users",node(file("docs/users.xml")));
    query.bind("$items",node(file("docs/items.xml")));
    query.bind("$bids",node(file("docs/bids.xml")));
    result=new QT3Result(query.value());
  }
 catch (  final Throwable trw) {
    result=new QT3Result(trw);
  }
 finally {
    query.close();
  }
  test(assertSerialization("<result><successful_item><itemno>1002</itemno><description>Motorcycle</description><reserve_price>500</reserve_price><high_bid>1200</high_bid></successful_item><successful_item><itemno>1004</itemno><description>Tricycle</description><reserve_price>15</reserve_price><high_bid>40</high_bid></successful_item></result>",false));
}
