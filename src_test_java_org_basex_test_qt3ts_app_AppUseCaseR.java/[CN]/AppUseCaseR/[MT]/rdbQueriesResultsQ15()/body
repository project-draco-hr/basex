{
  final XQuery query=new XQuery("\n" + "        <result> { \n" + "            for $u in $users//user_tuple \n"+ "            let $b := $bids//bid_tuple[userid=$u/userid and bid>=100] \n"+ "            where count($b) > 1 \n"+ "            return <big_spender>{ $u/name/text() }</big_spender> \n"+ "        } </result>\n"+ "      ",ctx);
  query.bind("$users",node(file("docs/users.xml")));
  query.bind("$items",node(file("docs/items.xml")));
  query.bind("$bids",node(file("docs/bids.xml")));
  final QT3Result res=result(query);
  result=res;
  test(assertSerialization("<result><big_spender>Mary Doe</big_spender><big_spender>Dee Linquent</big_spender><big_spender>Roger Smith</big_spender></result>",false));
}
