{
  XQExpression xqe;
  XQSequence xqs;
  final Properties prop=new Properties();
  prop.setProperty("encoding","UTF-8");
  xqe=xqc.createExpression();
  xqs=xqe.executeQuery("<e>Hello world!</e>");
  xqs.close();
  try {
    xqs.writeSequence(new ByteArrayOutputStream(),prop);
    fail("A-XQS-1.2: closed sequence supports writeSequence()");
  }
 catch (  final XQException e) {
  }
  xqe.close();
  xqe=xqc.createExpression();
  xqs=xqe.executeQuery("<e>Hello world!</e>");
  xqs.next();
  xqs.getItem();
  try {
    xqs.writeSequence(new ByteArrayOutputStream(),prop);
    fail("A-XQS-21.2: SCROLLTYPE_FORWARD_ONLY sequence, getXXX() or write() method has been invoked already on the current item");
  }
 catch (  final XQException e) {
  }
  xqe.close();
  xqe=xqc.createExpression();
  xqs=xqe.executeQuery("<e a='Hello world!'/>/@*");
  try {
    xqs.writeSequence(new ByteArrayOutputStream(),prop);
    fail("A-XQS-21.1: serialization process fails when sequence contains a top-level attribute");
  }
 catch (  final XQException xq) {
  }
  xqe.close();
  xqe=xqc.createExpression();
  xqs=xqe.executeQuery("<e>Hello world!</e>");
  try {
    xqs.writeSequence((OutputStream)null,prop);
    fail("A-XQS-24.3: writeSequence accepts a null buffer as first argument");
  }
 catch (  final XQException e) {
  }
  xqe.close();
  xqe=xqc.createExpression();
  xqs=xqe.executeQuery("<e>Hello world!</e>");
  final ByteArrayOutputStream result=new ByteArrayOutputStream();
  try {
    xqs.writeSequence(result,prop);
  }
 catch (  final XQException e) {
    fail("A-XQS-24.1: writeSequence failed with message: " + e.getMessage());
  }
  assertTrue("A-XQS-24.1: Expects serialized result contains '<e>Hello world!</e>', but it is '" + result.toString("UTF-8") + '\'',result.toString("UTF-8").indexOf("<e>Hello world!</e>") != -1);
  xqe.close();
  xqe=xqc.createExpression();
  xqs=xqe.executeQuery("<e>Hello world!</e>");
  final ByteArrayOutputStream otherResult=new ByteArrayOutputStream();
  try {
    xqs.writeSequence(otherResult,prop);
  }
 catch (  final XQException e) {
    fail("A-XQS-24.2: writeSequence failed with message: " + e.getMessage());
  }
  assertEquals("A-XQS-24.2: null properties argument is equivalent to empty properties argument",result.toString("UTF-8"),otherResult.toString("UTF-8"));
  xqe.close();
}
