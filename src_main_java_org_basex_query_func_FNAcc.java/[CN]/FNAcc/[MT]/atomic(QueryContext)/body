{
  final Expr e=expr.length != 0 ? expr[0] : checkCtx(ctx);
switch (func) {
case POS:
    return Itr.get(ctx.pos);
case LAST:
  return Itr.get(ctx.size);
case STRING:
Item it=e.atomic(ctx);
return it == null ? Str.ZERO : it.str() && !it.unt() ? it : Str.get(it.atom());
case NUMBER:
final Iter ir=ctx.iter(e);
it=ir.next();
return it == null || ir.next() != null ? Dbl.NAN : number(it);
case STRLEN:
return Itr.get(len(checkEStr(e,ctx)));
case NORM:
return Str.get(norm(checkEStr(e,ctx)));
case URIQNAME:
it=e.atomic(ctx);
if (it == null) return null;
return ((QNm)checkType(it,Type.QNM)).uri;
default :
return super.atomic(ctx);
}
}
