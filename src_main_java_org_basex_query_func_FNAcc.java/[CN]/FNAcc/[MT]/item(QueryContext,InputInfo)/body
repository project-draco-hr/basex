{
  final Expr e=expr.length != 0 ? expr[0] : checkCtx(ctx);
switch (def) {
case POS:
    return Itr.get(ctx.pos);
case LAST:
  return Itr.get(ctx.size);
case STRING:
Item it=e.item(ctx,input);
if (it == null) return Str.ZERO;
if (it.func()) FNSTR.thrw(ii,this);
return it.str() && !it.unt() ? it : Str.get(it.atom(ii));
case NUMBER:
return number(ctx.iter(e),ctx);
case STRLEN:
return Itr.get(len(checkEStr(e,ctx)));
case NORMSPC:
return Str.get(norm(checkEStr(e,ctx)));
case URIQNM:
it=e.item(ctx,input);
if (it == null) return null;
final QNm qn=(QNm)checkType(it,AtomType.QNM);
return qn.hasUri() ? qn.uri() : Uri.uri(ctx.ns.uri(qn.pref(),true,ii));
default :
return super.item(ctx,ii);
}
}
