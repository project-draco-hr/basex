{
  parseArguments(args);
  final Context context=HTTPSession.context();
  final MainProp mprop=context.mprop;
  final int port=mprop.num(MainProp.SERVERPORT);
  final int eport=mprop.num(MainProp.EVENTPORT);
  final int hport=mprop.num(MainProp.HTTPPORT);
  if (service) {
    start(hport,args);
    Util.outln(HTTP + ' ' + SERVERSTART);
    Performance.sleep(1000);
    return;
  }
  if (stopped) {
    BaseXServer.stop(port,eport);
    return;
  }
  if (System.getProperty(DBUSER) != null) {
    while (System.getProperty(DBPASS) == null) {
      Util.out(SERVERPW + COLS);
      System.setProperty(DBPASS,Util.password());
    }
  }
  if (HTTPSession.client()) {
    server=new BaseXServer(context,quiet ? "-z" : "");
    Util.outln(HTTP + ' ' + SERVERSTART);
  }
 else {
    Util.outln(CONSOLE + HTTP + ' '+ SERVERSTART,SERVERMODE);
  }
  jetty=new Server(hport);
  final org.mortbay.jetty.servlet.Context jcontext=new org.mortbay.jetty.servlet.Context(jetty,"/");
  if (rest)   jcontext.addServlet(RESTServlet.class,"/rest/*");
  if (webdav)   jcontext.addServlet(WebDAVServlet.class,"/webdav/*");
  jetty.start();
  final ServerSocket socket=new ServerSocket();
  socket.setReuseAddress(true);
  socket.bind(new InetSocketAddress(hport + 1));
}
