{
  optarg=null;
  if (optindex >= args.length) {
    optopt=-1;
    return optopt;
  }
  final String arg=args[optindex];
  final int argLength=arg.length();
  if (arg.startsWith("-") && argLength > 1) {
    optopt=args[optindex].charAt(multipleOptIndex);
    final int optPos=optString.indexOf(optopt);
    if (optPos > -1) {
      if (optString.length() - 1 > optPos && optString.charAt(optPos + 1) == ':') {
        if (argLength > multipleOptIndex + 1) {
          optindex++;
          optarg=arg.substring(multipleOptIndex + 1,argLength);
        }
 else         if (args.length > optindex + 1) {
          optindex+=2;
          optarg=args[optindex - 1];
        }
 else {
          optindex+=2;
          optarg=":";
        }
      }
 else       if (argLength == multipleOptIndex + 1) {
        optindex++;
        multipleOptIndex=1;
      }
 else {
        multipleOptIndex++;
      }
      return optopt;
    }
    if (argLength == multipleOptIndex + 1) {
      optindex++;
      multipleOptIndex=1;
    }
 else {
      multipleOptIndex++;
    }
    optopt=0;
    return optopt;
  }
  if (args.length > 0 && args[optindex].length() > 0) {
    path=args[optindex];
    foundArgs.add(args[optindex]);
  }
  if (optindex + 1 == args.length) {
    optopt=-1;
    return optopt;
  }
  ++optindex;
  return getopt();
}
