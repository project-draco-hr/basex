{
  if (bpos >= bsize) {
    if (bsize == 0 || bsize == buffer.length) {
      bsize=0;
      bmark=-1;
      bpos=0;
    }
    int r;
    while ((r=in.read(buffer,bsize,buffer.length - bsize)) == 0)     ;
    if (r < 0)     return -1;
    bsize+=r;
    read+=r;
  }
  return buffer[bpos++] & 0xFF;
}
