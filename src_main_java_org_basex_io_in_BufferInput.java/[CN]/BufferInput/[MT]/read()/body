{
  if (pos >= size) {
    if (size <= 0 || size >= buffer.length) {
      size=0;
      pos=0;
    }
    int r=-1;
    while ((r=in.read(buffer,size,buffer.length - size)) <= 0)     if (r < 0)     return -1;
    size+=r;
    read+=r;
  }
  return buffer[pos++] & 0xFF;
}
