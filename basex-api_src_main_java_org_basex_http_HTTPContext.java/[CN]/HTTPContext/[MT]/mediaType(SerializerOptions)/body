{
  final String type=sopts.get(SerializerOptions.MEDIA_TYPE);
  if (!type.isEmpty())   return type;
  final SerialMethod sm=sopts.get(SerializerOptions.METHOD);
  if (sm == SerialMethod.RAW)   return APP_OCTET;
  if (sm == SerialMethod.XML)   return APP_XML;
  if (sm == SerialMethod.XHTML || sm == SerialMethod.HTML)   return TEXT_HTML;
  if (sm == SerialMethod.JSON) {
    try {
      final JsonParserOptions jprop=new JsonParserOptions(sopts.get(SerializerOptions.JSON));
      if (jprop.get(JsonOptions.FORMAT) == JsonFormat.JSONML)       return APP_JSONML;
    }
 catch (    final IOException ignore) {
    }
    return APP_JSON;
  }
  return TEXT_PLAIN;
}
