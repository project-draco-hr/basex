{
  final XQuery query=new XQuery("<books-with-prices> { \n" + "        for $b in $bib//book, $a in $reviews//entry \n" + "        where $b/title = $a/title \n"+ "        return <book-with-prices> { $b/title } <price-bstore2>{ $a/price/text() }</price-bstore2> <price-bstore1>{ $b/price/text() }</price-bstore1> </book-with-prices> } </books-with-prices>\n"+ "      ",ctx);
  query.bind("$bib",node(file("docs/bib.xml")));
  query.bind("$reviews",node(file("docs/reviews.xml")));
  final QT3Result res=result(query);
  result=res;
  test(assertSerialization("<books-with-prices><book-with-prices><title>TCP/IP Illustrated</title><price-bstore2>65.95</price-bstore2><price-bstore1>65.95</price-bstore1></book-with-prices><book-with-prices><title>Advanced Programming in the Unix environment</title><price-bstore2>65.95</price-bstore2><price-bstore1>65.95</price-bstore1></book-with-prices><book-with-prices><title>Data on the Web</title><price-bstore2>34.95</price-bstore2><price-bstore1>39.95</price-bstore1></book-with-prices></books-with-prices>",false));
}
