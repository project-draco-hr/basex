{
  if (null != await) {
    try {
      if (!await.await(WAIT,TimeUnit.MILLISECONDS))       fail("Latch timed out.");
    }
 catch (    final InterruptedException e) {
      throw new RuntimeException("Unexpectedly interrupted.");
    }
  }
  final Command cmd=new Cmd(write);
  locks.acquire(cmd,null != objectsArray ? new StringList().add(objectsArray) : null);
  if (null != countDown)   countDown.countDown();
  try {
    while (!requestRelease)     wait();
  }
 catch (  final InterruptedException e) {
    throw new RuntimeException("Unexpectedly interrupted.");
  }
  locks.release(cmd);
}
