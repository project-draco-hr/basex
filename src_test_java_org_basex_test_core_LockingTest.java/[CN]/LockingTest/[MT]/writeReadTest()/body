{
  final CountDownLatch sync=new CountDownLatch(1), test=new CountDownLatch(1);
  LockTester<Integer> thread1=new LockTester<Integer>(null,true,objects,sync);
  LockTester<Integer> thread2=new LockTester<Integer>(sync,false,objects,test);
  thread1.start();
  thread2.start();
  assertFalse("Thread 2 shouldn't be able to acquire lock yet.",test.await(WAIT,TimeUnit.MILLISECONDS));
  thread1.release();
  assertTrue("Thread 2 should be able to acquire lock now.",test.await(WAIT,TimeUnit.MILLISECONDS));
  thread2.release();
}
