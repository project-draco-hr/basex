{
  if (!selected()) {
    select(0,size());
    if (!selected())     return false;
  }
  final int s=Math.min(selectPos,selectEnd);
  final int e=Math.max(selectPos,selectEnd);
  final byte[] format=syntax.format(Arrays.copyOfRange(text,s,e));
  final boolean changed=add(format,s,e);
  selectPos=s;
  selectEnd=s + format.length;
  setCaret(selectEnd);
  checkSelect();
  return changed;
}
