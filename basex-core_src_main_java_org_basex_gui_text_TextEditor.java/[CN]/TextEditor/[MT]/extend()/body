{
  int s=Math.min(selectPos,selectEnd), e=Math.max(selectPos,selectEnd);
  final int tl=text.length;
  while (e > 0 && text[e - 1] == '\n')   e--;
  while (s > 0 && text[s - 1] != '\n')   --s;
  while (e < tl && text[e] != '\n')   ++e;
  selectPos=s;
  selectEnd=e;
}
