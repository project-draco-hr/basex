{
  int ind=0;
  for (int p=pos - 1; p >= 0; p--) {
    final byte b=text[p];
    if (b == '\n')     break;
    if (b == '\t') {
      ind+=TAB;
    }
 else     if (b == ' ') {
      ind++;
    }
 else {
      ind=0;
    }
  }
  return ind;
}
