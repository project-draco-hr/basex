{
  final BitArray decl=new BitArray(), used=new BitArray();
  for (  final Clause cl : clauses)   for (  final Var v : cl.vars())   decl.set(v.id);
  final ASTVisitor marker=new ASTVisitor(){
    @Override public boolean used(    final VarRef ref){
      final int id=ref.var.id;
      if (decl.get(id))       used.set(id);
      return true;
    }
  }
;
  ret.accept(marker);
  boolean change=false;
  for (int i=clauses.size(); --i >= 0; ) {
    final Clause curr=clauses.get(i);
    change|=curr.clean(ctx,used);
    curr.accept(marker);
  }
  return change;
}
