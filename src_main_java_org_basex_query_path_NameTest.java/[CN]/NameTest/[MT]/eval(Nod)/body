{
  if (nod.type != type)   return false;
switch (test) {
case ALL:
    return true;
case NAME:
  return eq(ln,ln(nod.nname()));
case NS:
return name.uri().eq(nod.qname(tmpq).uri());
default :
return type == NodeType.ATT && !name.ns() ? eq(ln,nod.nname()) : name.eq(nod.qname(tmpq));
}
}
