{
  if (node.type != type)   return false;
switch (test) {
case ALL:
    return true;
case NAME:
  return eq(ln,local(node.name()));
case NS:
return eq(name.uri(),node.update(tmpq).uri());
default :
return type == NodeType.ATT && !name.hasPrefix() ? eq(ln,node.name()) : name.eq(node.update(tmpq));
}
}
