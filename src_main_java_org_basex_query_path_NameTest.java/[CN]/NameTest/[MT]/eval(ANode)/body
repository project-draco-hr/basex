{
  if (node.type != type)   return false;
switch (test) {
case ALL:
    return true;
case NAME:
  return eq(ln,ln(node.nname()));
case NS:
return name.uri().eq(node.qname(tmpq).uri());
default :
return type == NodeType.ATT && !name.ns() ? eq(ln,node.nname()) : name.eq(node.qname(tmpq));
}
}
