{
  final ResettableInput bi=new ResettableInput(in);
  bi.mark(ResettableInput.MAX);
  try {
    addXML(s,n,bi);
  }
 catch (  final IOException ex) {
    if (bi.pos() >= ResettableInput.MAX)     throw ex;
    bi.reset();
    addRaw(s,n,bi);
  }
 finally {
    if (bi.pos() < ResettableInput.MAX)     bi.reset();
    bi.close();
  }
}
