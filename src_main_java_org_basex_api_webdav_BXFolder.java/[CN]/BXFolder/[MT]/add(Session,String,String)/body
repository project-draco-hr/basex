{
  final Query q=s.query("for $d in db:list($db, $path) " + "let $t := tokenize(substring($d, string-length($path) + 1), '/') " + "let $p := string-join(($trgdir, $t[position() < last()]), '/') "+ "let $n := $t[last()] "+ "return "+ "db:add($trgdb, db:open($db, $d), $n, $p)");
  q.bind("db",db);
  q.bind("path",path);
  q.bind("trgdb",trgdb);
  q.bind("trgdir",trgdir);
  q.execute();
}
