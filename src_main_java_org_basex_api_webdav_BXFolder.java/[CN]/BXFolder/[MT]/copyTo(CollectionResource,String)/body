{
  try {
    final Session s=factory.login(user,pass);
    try {
      if (target instanceof BXAllDatabasesResource) {
        s.execute(new CreateDB(name));
        add(s,name,"",path);
      }
 else       if (target instanceof BXDatabase) {
        final BXFolder trg=(BXFolder)target;
        add(s,trg.db,trg.path,path.substring(0,path.lastIndexOf(SEP)));
      }
 else       if (target instanceof BXFolder) {
        final BXFolder trg=(BXFolder)target;
        add(s,trg.db,trg.path,path.substring(0,path.lastIndexOf(SEP)));
        deleteDummy(s,trg.db,trg.path);
      }
    }
  finally {
      s.close();
    }
  }
 catch (  Exception ex) {
    handle(ex);
  }
}
