{
  if (!format) {
    print(ch);
  }
 else   if (ch < ' ' && ch != '\n' && ch != '\t' || ch > 0x7F && ch < 0xA0) {
    hex(ch);
  }
 else   if (ch == '&') {
    print(E_AMP);
  }
 else   if (ch == '>') {
    print(E_GT);
  }
 else   if (ch == '<') {
    print(E_LT);
  }
 else {
    print(ch);
  }
}
