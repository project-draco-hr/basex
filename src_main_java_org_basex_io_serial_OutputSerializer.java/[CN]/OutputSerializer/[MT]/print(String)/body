{
  if (enc == UTF8) {
    for (    final byte b : token(s))     out.write(b);
  }
 else   if (enc == UTF16BE || enc == UTF16LE) {
    final boolean l=enc == UTF16LE;
    for (int i=0; i < s.length(); ++i) {
      final char ch=s.charAt(i);
      out.write(l ? ch & 0xFF : ch >>> 8);
      out.write(l ? ch >>> 8 : ch & 0xFF);
    }
  }
 else {
    out.write(s.getBytes(enc));
  }
}
