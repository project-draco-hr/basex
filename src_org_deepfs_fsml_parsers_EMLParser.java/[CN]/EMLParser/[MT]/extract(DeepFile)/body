{
  deepFile=df;
  bfc=df.getBufferedFileChannel();
  if (!check(bfc))   return;
  if (df.fsmeta) {
    df.setFileType(FileType.MESSAGE);
    df.setFileFormat(MimeType.EML);
    mBoundary="";
    do {
      String type="";
      final Matcher m=KEYPAT.matcher(mCurrLine);
      if (m.matches()) {
        type=m.group(1).toUpperCase().replace('-','_');
        mCurrLine=m.group(2).trim();
      }
      boolean readNext=true;
      try {
        readNext=EML_Meta.valueOf(type).parse(this);
      }
 catch (      final IllegalArgumentException ex) {
        getBoundary();
        getCharset();
      }
      if (readNext && !readLine())       return;
    }
 while (!mCurrLine.isEmpty());
    if (df.fscont)     if (mCurrLine != null)     parseContent();
  }
 else   if (df.fscont) {
    do {
      String type="";
      final Matcher m=KEYPAT.matcher(mCurrLine);
      if (m.matches()) {
        type=m.group(1);
        mCurrLine=m.group(2).trim();
        if (type.equalsIgnoreCase("content-type"))         getContentType();
 else         if (type.equalsIgnoreCase("content-transfer-encoding")) {
          getEncoding();
        }
      }
 else {
        getBoundary();
        getCharset();
      }
      if (!readLine())       return;
    }
 while (!mCurrLine.isEmpty());
    parseContent();
  }
}
