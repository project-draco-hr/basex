{
  if (!file.isDir() && view.open(file) != null) {
    final TextPanel editor=view.getEditor();
    final SearchBar sb=editor.search;
    if (search != null) {
      sb.reset();
      sb.activate(search,true);
    }
 else {
      sb.deactivate(true);
    }
    SwingUtilities.invokeLater(new Runnable(){
      @Override public void run(){
        editor.requestFocusInWindow();
      }
    }
);
  }
}
