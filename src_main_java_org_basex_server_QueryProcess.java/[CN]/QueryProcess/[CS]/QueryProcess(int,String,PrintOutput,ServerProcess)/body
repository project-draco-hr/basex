{
  id=i;
  sp=s;
  out=o;
  processor=new QueryProcessor(q,sp.context);
  serializer=new XMLSerializer(out);
  updating=processor.ctx.updating;
  sp.context.sema.before(updating);
  try {
    iter=processor.iter();
    out.print(String.valueOf(id));
    send(true);
    startTimer();
  }
 catch (  final QueryException ex) {
    sp.context.sema.after(updating);
    sp.log.write(this,s,INFOERROR + ex.extended());
    out.print(String.valueOf(0));
    send(true);
    out.print(ex.extended());
    send(true);
    sp.queries.remove(this);
  }
}
