{
  final String msg=ex.getMessage();
  if (msg.contains("Exception:")) {
    Throwable e=ex;
    while (e.getCause() != null)     e=e.getCause();
    throw e instanceof SAXException ? (SAXException)e : new SAXException(msg);
  }
  final TokenBuilder report=new TokenBuilder();
  final String id=ex.getSystemId();
  if (id != null)   report.add(IO.get(id).name()).add(", ");
  report.addExt(ex.getLineNumber()).add(':').addExt(ex.getColumnNumber());
  report.add(": ").add(msg);
  throw new SAXException(report.toString());
}
