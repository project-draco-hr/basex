{
  super(ev.gui);
  view=ev;
  setLayout(new GridLayout(1,1));
  root=new DefaultMutableTreeNode();
  tree=new BaseXTree(root,gui).border(4,4,4,4);
  renderer=new EditorCellRenderer();
  tree.setExpandsSelectedPaths(true);
  tree.setCellRenderer(renderer);
  tree.addTreeWillExpandListener(this);
  tree.addKeyListener(new KeyAdapter(){
    @Override public void keyPressed(    final KeyEvent e){
      if (BaseXKeys.REFRESH.is(e)) {
        new RefreshCmd().execute(gui);
      }
 else       if (BaseXKeys.DELNEXT.is(e)) {
        new DeleteCmd().execute(gui);
      }
 else       if (BaseXKeys.NEWDIR.is(e)) {
        new NewCmd().execute(gui);
      }
    }
    @Override public void keyTyped(    final KeyEvent e){
      if (BaseXKeys.ENTER.is(e))       open();
    }
  }
);
  tree.addMouseListener(new MouseAdapter(){
    @Override public void mousePressed(    final MouseEvent e){
      if (SwingUtilities.isLeftMouseButton(e) && e.getClickCount() == 2)       open();
    }
  }
);
  tree.setCellEditor(new EditorCellEditor(tree,renderer));
  tree.setEditable(true);
  final StringList roots=roots();
  root.removeAllChildren();
  for (  final String s : roots)   root.add(new EditorDir(new IOFile(s),this));
  for (int c=0; c <= roots.size(); c++)   tree.expandRow(c);
  tree.setRootVisible(false);
  tree.setSelectionRow(0);
  final JScrollPane jsp=new JScrollPane(tree);
  jsp.setBorder(new EmptyBorder(0,0,0,0));
  add(jsp);
  new BaseXPopup(tree,gui,new DeleteCmd(),new RenameCmd(),new NewCmd(),null,new ChangeCmd(),new RefreshCmd());
}
