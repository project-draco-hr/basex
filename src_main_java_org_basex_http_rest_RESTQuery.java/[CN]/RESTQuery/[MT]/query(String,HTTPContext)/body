{
  final Session session=http.session();
  if (item != null) {
    final boolean mm=session.execute(new Get(Prop.MAINMEM)).split(COLS)[1].equals(TRUE);
    session.execute(new Set(Prop.MAINMEM,true));
    session.create(Util.name(RESTQuery.class),new ArrayInput(item));
    if (!mm)     session.execute(new Set(Prop.MAINMEM,false));
  }
 else {
    open(http);
  }
  session.execute(new Set(Prop.SERIALIZER,serial(http)));
  session.setOutputStream(http.out);
  final String path=http.context().mprop.get(MainProp.HTTPPATH);
  session.execute(new Set(Prop.QUERYPATH,new IOFile(path).path()));
  try {
    final Query qu=session.query(in);
    for (    final Entry<String,String[]> e : variables.entrySet()) {
      final String[] val=e.getValue();
      if (val.length == 2)       qu.bind(e.getKey(),val[0],val[1]);
      if (val.length == 1)       qu.bind(e.getKey(),val[0]);
    }
    http.initResponse(new SerializerProp(qu.options()));
    qu.execute();
  }
 catch (  final IOException ex) {
    final String m1=Util.message(ex);
    final String m2=m1.replaceAll(STOPPED_AT + ".*" + NL,"");
    throw m1.equals(m2) ? ex : new IOException(m2,ex.getCause());
  }
}
