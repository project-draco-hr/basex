{
  final String pattern=file.isEmpty() ? project.gui.gopts.get(GUIOptions.FILES) : file;
  if (pattern.contains("*") || pattern.contains("?")) {
    final Pattern pt=Pattern.compile(IOFile.regex(pattern));
    for (    final byte[] input : cache) {
      final int offset=offset(input,true);
      if (pt.matcher(Token.string(Token.substring(input,offset))).matches() && filterContent(input,search,results))       return true;
      if (thread != threadID)       return false;
    }
  }
  final byte[] patt=Token.token(pattern);
  final TokenSet exclude=new TokenSet();
  final boolean path=Token.indexOf(patt,'\\') != -1 || Token.indexOf(patt,'/') != -1;
  for (int i=0; i < (path ? 2 : 3); i++) {
    if (!filter(patt,search,thread,i,results,exclude,path))     return false;
  }
  return true;
}
