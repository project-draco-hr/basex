{
synchronized (mutex) {
    try {
      send(cmd);
      check(false);
      while (!state)       mutex.wait();
      if (first != 0) {
        int l;
        os.write(first);
        while ((l=bi.read()) != 0)         os.write(l);
      }
      info=bi.readString();
      if (!ok()) {
        check(false);
        throw new BaseXException(info);
      }
    }
 catch (    Exception ex) {
      throw new BaseXException(ex);
    }
    check(false);
  }
}
