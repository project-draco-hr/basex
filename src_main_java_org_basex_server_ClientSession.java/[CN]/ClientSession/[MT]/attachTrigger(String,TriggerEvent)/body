{
  try {
    sout.write(10);
    send(name);
    final BufferInput bi=new BufferInput(sin);
    if (tsocket == null) {
      this.tn=new HashMap<String,TriggerEvent>();
      tsocket=new Socket();
      tsocket.connect(new InetSocketAddress(thost,tport),5000);
      String id=bi.readString();
      PrintOutput tout=PrintOutput.get(tsocket.getOutputStream());
      tout.print(id);
      tout.write(0);
      tout.flush();
      startListener(tsocket.getInputStream());
    }
    info=bi.readString();
    if (!ok(bi))     throw new IOException(info);
    tn.put(name,notification);
  }
 catch (  IOException e) {
    throw new BaseXException(e);
  }
}
