{
  super(output);
  this.shost=host;
  this.tn=new HashMap<String,TriggerNotification>();
  socket=new Socket();
  socket.connect(new InetSocketAddress(host,port),5000);
  sin=socket.getInputStream();
  final BufferInput bi=new BufferInput(sin);
  final String ts=bi.readString();
  sout=PrintOutput.get(socket.getOutputStream());
  send(user);
  send(Token.md5(Token.md5(pw) + ts));
  sout.flush();
  if (!ok(bi))   throw new LoginException();
}
