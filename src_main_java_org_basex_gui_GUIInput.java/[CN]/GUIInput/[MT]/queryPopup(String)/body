{
  final Data data=gui.context.data();
  if (data == null)   return;
  StringList sl;
  final QueryContext qc=new QueryContext(gui.context);
  try {
    final QuerySuggest qs=new QuerySuggest(query,qc,data);
    qs.parseMain();
    sl=qs.complete();
    pre=query.substring(0,qs.im);
  }
 catch (  final QueryException ex) {
    sl=ex.suggest();
    pre=query.substring(0,ex.col() - (ex.col() == 1 ? 1 : 0));
  }
 finally {
    qc.close();
  }
  if (getCaretPosition() < pre.length())   sl=null;
  createCombo(sl);
}
