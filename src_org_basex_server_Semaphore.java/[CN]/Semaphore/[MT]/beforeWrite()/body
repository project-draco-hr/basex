{
  Object monitor=new Object();
synchronized (monitor) {
synchronized (this) {
      if (allowWriter()) {
        ++activeWriters;
        return;
      }
      waitingWriterMonitors.add(monitor);
    }
    try {
      monitor.wait();
    }
 catch (    InterruptedException ex) {
      ex.printStackTrace();
    }
  }
}
