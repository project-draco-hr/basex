{
  final Object monitor=new Object();
synchronized (monitor) {
synchronized (this) {
      if (waitingWriters.size() == 0 && activeReaders == 0 && !activeWriter) {
        activeWriter=true;
        return;
      }
      waitingWriters.add(monitor);
    }
    try {
      monitor.wait();
    }
 catch (    final InterruptedException ex) {
      ex.printStackTrace();
    }
  }
}
