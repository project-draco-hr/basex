{
  if (up) {
    activeW=false;
    if (waitingR > 0)     notifyReaders();
 else     notifyWriter();
  }
 else {
    if (--activeR == 0)     notifyWriter();
  }
}
