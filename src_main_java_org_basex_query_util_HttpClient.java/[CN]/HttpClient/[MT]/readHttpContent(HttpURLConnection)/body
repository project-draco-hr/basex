{
  final InputStream input=conn.getInputStream();
  final int len=conn.getContentLength();
  if (len != -1) {
    final byte[] content=new byte[len];
    try {
      input.read(content);
    }
  finally {
      input.close();
    }
    return content;
  }
  final ByteList tb=new ByteList();
  final BufferedInputStream bis=new BufferedInputStream(input);
  int i=0;
  try {
    while ((i=bis.read()) != -1)     tb.add((byte)i);
  }
  finally {
    bis.close();
  }
  return tb.toArray();
}
