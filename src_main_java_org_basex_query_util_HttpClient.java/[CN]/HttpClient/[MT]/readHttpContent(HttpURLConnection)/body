{
  final InputStream input=conn.getInputStream();
  final int len=conn.getContentLength();
  if (len != -1) {
    final byte[] responseContent=new byte[len];
    try {
      input.read(responseContent);
    }
  finally {
      input.close();
    }
    return responseContent;
  }
  final ByteList bl=new ByteList();
  final BufferedInputStream bis=new BufferedInputStream(input);
  int i=0;
  try {
    while ((i=bis.read()) != -1)     bl.add(i);
  }
  finally {
    bis.close();
  }
  return bl.toArray();
}
