{
  final AxisIter attrs=body.atts();
  final StringBuilder sb=new StringBuilder();
  byte[] mediaType=null;
  String src=null;
  String method=null;
  ANode attr=null;
  while ((attr=attrs.next()) != null) {
    if (eq(attr.nname(),MEDIATYPE))     mediaType=attr.atom();
 else     if (eq(attr.nname(),SRC))     src=string(attr.atom());
 else     if (eq(attr.nname(),METHOD))     method=string(attr.atom());
 else     sb.append(string(attr.nname())).append('=').append(string(attr.atom()));
  }
  conn.setRequestProperty(CONT_TYPE,string(mediaType));
  if (src == null) {
    sb.append("method=");
    if (method == null) {
      if (eq(mediaType,APPL_XHTML))       sb.append("xhtml");
 else       if (eq(mediaType,APPL_XML) || eq(mediaType,APPL_EXT_XML) || eq(mediaType,TXT_XML)|| eq(mediaType,TXT_EXT_XML)|| endsWith(mediaType,MIME_XML_SUFFIX))       sb.append("xml");
 else       if (eq(mediaType,TXT_HTML))       sb.append("html");
 else       if (startsWith(mediaType,MIME_TEXT_PREFIX))       sb.append("text");
 else       sb.append("xml");
    }
 else {
      sb.append(method);
    }
    final OutputStream out=conn.getOutputStream();
    final SerializerProp serialProp=new SerializerProp(sb.toString());
    try {
      final XMLSerializer xml=new XMLSerializer(out,serialProp);
      final AxisIter ai=body.children();
      ANode child=null;
      while ((child=ai.next()) != null)       child.serialize(xml);
    }
  finally {
      out.close();
    }
  }
 else {
  }
}
