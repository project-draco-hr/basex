{
  final String id=res.getId();
  Data tmp=null;
  try {
    if (res.getContent() instanceof Document) {
      tmp=CreateDB.xml(new DOCWrapper((Document)res.getContent()),id);
    }
 else {
      tmp=CreateDB.xml(IO.get(res.getContent().toString()),id);
    }
    ctx.data().insert(ctx.data().size,-1,tmp);
    ctx.data().flush();
    tmp.close();
    DropDB.drop(id);
  }
 catch (  final IOException ex) {
    ex.printStackTrace();
    throw new XMLDBException(ErrorCodes.INVALID_RESOURCE);
  }
}
