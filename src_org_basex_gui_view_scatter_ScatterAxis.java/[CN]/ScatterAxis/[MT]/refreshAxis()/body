{
  if (attr == null || attr.length == 0)   return;
  final Data data=GUI.context.data();
  final StatsKey key=isTag ? data.tags.stat(data.tags.id(attr)) : data.atts.stat(data.atts.id(attr));
  numeric=key.kind == Kind.INT || key.kind == Kind.DBL;
  if (numeric) {
    numType=key.kind == Kind.INT ? TYPEINT : TYPEDBL;
    min=key.min;
    max=key.max;
  }
 else {
    cats=key.cats.keys();
    final String[] tmpCats=new String[cats.length];
    for (int i=0; i < tmpCats.length; i++) {
      tmpCats[i]=Token.string(cats[i]);
    }
    Arrays.sort(tmpCats);
    for (int i=0; i < tmpCats.length; i++) {
      cats[i]=Token.token(tmpCats[i]);
    }
    nrCats=cats.length;
  }
  final int[] items=scatterData.pres;
  co=new double[items.length];
  for (int i=0; i < items.length; i++) {
    int p=items[i];
    final int limit=p + data.size(p,Data.ELEM);
    double currentValue=-1;
    p++;
    while (p < limit) {
      final int kind=data.kind(p);
      if (kind == Data.ELEM) {
        final byte[] currName=data.tag(p);
        if ((Token.eq(attr,currName)) && isTag) {
          final int attSize=data.attSize(p,kind);
          final byte[] value=data.text(p + attSize);
          currentValue=calcPosition(value);
          break;
        }
      }
 else       if (kind == Data.ATTR) {
        final byte[] currName=data.attName(p);
        if ((Token.eq(attr,currName)) && !isTag) {
          final byte[] value=data.attValue(p);
          currentValue=calcPosition(value);
          break;
        }
      }
      p++;
    }
    co[i]=currentValue;
  }
}
