{
  free.clear();
  final int sl=string.length();
  int i=0;
  while (i < sl) {
    final int k=string.indexOf('=',i);
    if (k == -1)     break;
    final String key=string.substring(i,k).trim();
    final StringBuilder val=new StringBuilder();
    i=k;
    while (++i < sl) {
      final char ch=string.charAt(i);
      if (ch == ',' && (++i == sl || string.charAt(i) != ','))       break;
      val.append(ch);
    }
    try {
      set(key,val.toString());
    }
 catch (    final IllegalArgumentException ex) {
      return new BaseXException(Text.INVALID_VALUE_X_X,key,val);
    }
  }
  return free.isEmpty() ? null : new BaseXException(error(free.keySet().iterator().next()));
}
