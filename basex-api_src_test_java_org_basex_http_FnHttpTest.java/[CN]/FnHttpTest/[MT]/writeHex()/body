{
  final HttpRequest req1=new HttpRequest();
  req1.payloadAtts.put("method",SerialMethod.BASEX.toString());
  req1.bodyContent.add(new Hex(token("test")));
  final FakeHttpConnection fakeConn1=new FakeHttpConnection(new URL("http://www.test.com"));
  HttpClient.setRequestContent(fakeConn1.getOutputStream(),req1);
  assertEquals(fakeConn1.out.toString(Strings.UTF8),"test");
  final HttpRequest req2=new HttpRequest();
  req2.payloadAtts.put("method",SerialMethod.BASEX.toString());
  final FElem e3=new FElem("a").add("test");
  req2.bodyContent.add(e3);
  final FakeHttpConnection fakeConn2=new FakeHttpConnection(new URL("http://www.test.com"));
  HttpClient.setRequestContent(fakeConn2.getOutputStream(),req2);
  assertEquals("<a>test</a>",fakeConn2.out.toString());
}
