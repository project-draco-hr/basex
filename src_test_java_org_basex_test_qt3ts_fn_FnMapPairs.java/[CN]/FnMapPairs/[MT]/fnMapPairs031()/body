{
  final XQuery query=new XQuery("( fn:map-pairs( if ( fn:current-dateTime() eq\n" + "                                 fn:dateTime( fn:current-date(),\n" + "                                              fn:current-time() ))\n"+ "                            then fn:concat#2 \n"+ "                            else (),\n"+ "                            (\"a\"), (\"b\") ),\n"+ "              fn:map-pairs( if ( fn:current-dateTime() eq\n"+ "                                fn:dateTime( fn:current-date(),\n"+ "                                             fn:current-time() ))\n"+ "                            then () \n"+ "                            else fn:concat#2,\n"+ "                            \"a\", \"b\" ) )",ctx);
  try {
    result=new QT3Result(query.value());
  }
 catch (  final Throwable trw) {
    result=new QT3Result(trw);
  }
 finally {
    query.close();
  }
  test(error("XPTY0004"));
}
