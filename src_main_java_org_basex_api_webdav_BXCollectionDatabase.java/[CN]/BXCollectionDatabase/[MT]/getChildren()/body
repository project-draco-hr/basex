{
  final List<BXResource> ch=new ArrayList<BXResource>();
  final List<String> paths=new ArrayList<String>();
  try {
    final ClientSession cs=login(user,pass);
    try {
      ClientQuery q=cs.query("collection('" + dbname + "')/doc-name()");
      while (q.more()) {
        final String next=q.next();
        final int firstSep=next.indexOf(DIRSEP);
        if (firstSep <= 0)         ch.add(new BXDocument(dbname,next,user,pass));
 else {
          final String folder=next.substring(firstSep + 1);
          final int secSep=folder.indexOf(DIRSEP);
          final String folderName=folder.substring(0,secSep);
          final String folderPath=dbname + DIRSEP + folderName;
          if (!paths.contains(folderPath))           paths.add(folderPath);
        }
      }
      for (      final String f : paths)       ch.add(new BXFolder(dbname,f,user,pass));
    }
  finally {
      cs.close();
    }
  }
 catch (  Exception e) {
    e.printStackTrace();
  }
  return ch;
}
