{
  for (int i=nodes.size() - 1; i >= 0; i--) {
    final UpdatePrimitive[] upd=op.get(nodes.get(i));
    UpdatePrimitive p;
    int j=0;
    int add=0;
    while (j < upd.length) {
      p=upd[j++];
      final PrimitiveType t=p.type();
      p.apply(add);
      if (t == INSERTBEFORE)       add=((NodeCopy)p).md.meta.size;
      if (t == REPLACENODE)       break;
    }
  }
  d.flush();
}
