{
  final Map<QNm,Integer> m=new HashMap<QNm,Integer>();
  final IntList ats=new IntList();
  for (  final int pre : pres) {
    if (d.kind(pre) == Data.ATTR) {
      ats.add(pre);
      addElementChanges(m,pre);
    }
 else {
      addElementChanges(m,pre);
      final int pl=pre + d.attSize(pre,Data.ELEM);
      for (int p=pre + 1; p < pl; p++) {
        if (!ats.contains(p))         changeAttributePool(m,true,new QNm(d.name(p,Data.ATTR)));
      }
    }
  }
  findDuplicates(m);
}
