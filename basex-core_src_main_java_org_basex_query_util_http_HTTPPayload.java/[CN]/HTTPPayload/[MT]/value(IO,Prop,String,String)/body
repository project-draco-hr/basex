{
  Value val=null;
  if (ctype != null) {
    final boolean ml=eq(ctype,APP_JSON);
    if (ml || Token.eq(ctype,APP_JSON)) {
      final String options=ml ? JsonProp.FORMAT[0] + "=" + DataText.M_JSONML : "";
      val=new DBNode(new JsonParser(in,prop,options));
    }
 else     if (TEXT_CSV.equals(ctype)) {
      val=new DBNode(new CsvParser(in,prop));
    }
 else     if (TEXT_HTML.equals(ctype)) {
      val=new DBNode(new HtmlParser(in,prop));
    }
 else     if (APP_FORM_URLENCODED.equals(ctype)) {
      final String enc=charset(ext);
      val=Str.get(URLDecoder.decode(string(in.read()),enc == null ? UTF8 : enc));
    }
 else     if (MimeTypes.isXML(ctype)) {
      val=new DBNode(in,prop);
    }
 else     if (MimeTypes.isText(ctype)) {
      val=Str.get(new TextInput(in).content());
    }
 else     if (MimeTypes.isMultipart(ctype)) {
      final HTTPPayload hp=new HTTPPayload(in.inputStream(),false,null,prop);
      hp.extractParts(concat(DASHES,hp.boundary(ext)),null);
      val=hp.payloads();
    }
  }
  return val == null ? new B64(in.read()) : val;
}
