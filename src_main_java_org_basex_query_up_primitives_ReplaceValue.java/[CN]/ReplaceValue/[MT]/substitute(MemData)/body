{
  final int k=data.kind(targetPre);
  if (rec) {
    final List<UpdatePrimitive> l=new LinkedList<UpdatePrimitive>();
    l.add(this);
    final int firstChild=targetPre + data.attSize(targetPre,k);
    final int followingNode=targetPre + data.size(targetPre,k);
    int runner=firstChild;
    while (runner < followingNode) {
      l.add(new DeleteNode(runner,data,info,true));
      runner+=data.size(runner,data.kind(runner));
    }
    if (value.length > 0) {
      final int pre=tmp.meta.size;
      tmp.text(pre,1,value,Data.TEXT);
      tmp.insert(pre);
      final ANodeList nl=new ANodeList(new DBNode(tmp,pre));
      l.add(new ReplaceContent(targetPre,data,info,nl));
    }
    return l.toArray(new UpdatePrimitive[l.size()]);
  }
  if (deleteText()) {
    return new UpdatePrimitive[]{this,new DeleteNode(targetPre,data,info,false)};
  }
  return new UpdatePrimitive[]{this};
}
