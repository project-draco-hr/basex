{
  writeNum(length);
  final int last=offset + length;
  int o=offset;
  while (o < last) {
    final Buffer bf=buffer();
    final int l=Math.min(last - o,IO.BLOCKSIZE - off);
    System.arraycopy(buf,o,bf.data,off,l);
    bf.dirty=true;
    off+=l;
    o+=l;
  }
  final long nl=bm.current().pos + off;
  if (nl > len)   length(nl);
}
