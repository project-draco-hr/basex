{
  final TokenMap nsScope=new TokenMap();
  NSNode node=current;
  do {
    for (int i=0; i < node.values.length; i+=2)     nsScope.put(prefix(node.values[i]),uri(node.values[i + 1]));
    final int pos=node.find(pre);
    if (pos < 0)     break;
    node=node.children[pos];
  }
 while (node.pr <= pre && pre < node.pr + data.size(node.pr,Data.ELEM));
  return nsScope;
}
