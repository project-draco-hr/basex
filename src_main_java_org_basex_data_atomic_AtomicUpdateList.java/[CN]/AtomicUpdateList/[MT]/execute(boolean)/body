{
  check();
  optimize();
  applyValueUpdates();
  data.cache=true;
  applyStructuralUpdates();
  updateDistances();
  if (mergeTexts)   resolveTextAdjacency();
  data.cache=false;
}
