{
  final ListIterator<Clause> iter=clauses.listIterator();
  try {
    while (iter.hasNext())     iter.next().compile(qc,scp);
  }
 catch (  final QueryException qe) {
    iter.remove();
    clauseError(qe,iter,scp);
  }
  try {
    ret=ret.compile(qc,scp);
  }
 catch (  final QueryException qe) {
    clauseError(qe,iter,scp);
  }
  return optimize(qc,scp);
}
