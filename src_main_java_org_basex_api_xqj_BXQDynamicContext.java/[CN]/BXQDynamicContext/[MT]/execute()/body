{
  opened();
  final QueryContext qctx=qp.ctx;
  qctx.sc.ns=sc.sc.ns;
  try {
    if (sc.timeout != 0) {
      new Thread(){
        @Override public void run(){
          Performance.sleep(sc.timeout * 1000l);
          qctx.stop();
        }
      }
.start();
    }
    qp.parse();
    qctx.compile();
    Iter iter=qctx.iter();
    if (sc.scrollable)     iter=iter.value().cache();
    return new BXQSequence(iter,this,(BXQConnection)par);
  }
 catch (  final QueryException ex) {
    final QNm qnm=ex.qname();
    throw new XQQueryException(ex.getMessage(),new QName(Token.string(qnm.uri()),Token.string(qnm.local())),ex.line(),ex.col(),-1);
  }
catch (  final ProgressException ex) {
    throw new XQCancelledException(TIMEOUT,null,null,-1,-1,-1,null,null,null);
  }
}
