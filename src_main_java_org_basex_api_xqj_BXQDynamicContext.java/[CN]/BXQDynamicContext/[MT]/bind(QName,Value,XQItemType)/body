{
  opened();
  valid(var,QName.class);
  final Type tt=check(v.type,t);
  Value vl=v;
  if (tt != v.type && v instanceof Item) {
    try {
      vl=tt.e((Item)v,ctx.ctx,null);
    }
 catch (    final QueryException ex) {
      throw new BXQException(ex);
    }
  }
  try {
    if (var == XQConstants.CONTEXT_ITEM) {
      qp.context(vl);
    }
 else {
      if (this instanceof BXQPreparedExpression) {
        Var vr=new Var(new QNm(Token.token(var.getLocalPart())));
        vr=qp.ctx.vars.get(vr);
        if (vr == null)         throw new BXQException(VAR,var);
        vr.bind(vl,null);
      }
 else {
        qp.bind(var.getLocalPart(),vl);
      }
    }
  }
 catch (  final QueryException ex) {
    throw new BXQException(ex);
  }
}
