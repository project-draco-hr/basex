{
  if (type == NodeType.DOC) {
    final byte[] base=data.text(pre,true);
    if (data.inMemory()) {
      final String bs=Token.string(base);
      if (bs.endsWith(IO.BASEXSUFFIX + IO.XMLSUFFIX))       return Token.EMPTY;
      final String dir=data.meta.original;
      return Token.token(dir.isEmpty() ? bs : IO.get(dir).merge(bs).url());
    }
    return new TokenBuilder(data.meta.name).add('/').add(base).finish();
  }
  final byte[] base=attribute(new QNm(BASE,XML_URI));
  return base != null ? base : Token.EMPTY;
}
