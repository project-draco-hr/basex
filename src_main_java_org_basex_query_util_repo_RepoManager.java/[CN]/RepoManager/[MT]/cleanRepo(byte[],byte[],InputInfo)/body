{
  final File pkgDesc=new File(new File(context.prop.get(Prop.REPOPATH),string(dir)),DESCRIPTOR);
  final IOFile io=new IOFile(pkgDesc);
  final Package pkg=new PkgParser(context,ii).parse(io);
  for (  final Component comp : pkg.comps) {
    final byte[] ns=comp.namespace;
    final TokenSet pkgs=context.repo.nsDict().get(ns);
    if (pkgs.size() > 1) {
      pkgs.delete(pkgName);
    }
 else {
      context.repo.nsDict().delete(ns);
    }
  }
  context.repo.pkgDict().delete(pkgName);
}
