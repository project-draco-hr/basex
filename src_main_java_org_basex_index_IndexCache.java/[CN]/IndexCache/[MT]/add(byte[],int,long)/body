{
  purge();
  final int hash=hash(key);
  final int i=indexFor(hash,bucket.length);
  BucketEntry e=bucket[i];
  BucketEntry prev=e;
  while (e != null) {
    final BucketEntry next=e.next;
    final IndexEntry ce=e.get();
    if (ce == null) {
      delete(i,e,prev,next);
    }
 else     if (e.hash == hash && eq(ce.key,key)) {
      ce.size=s;
      ce.pointer=p;
      return ce;
    }
    prev=e;
    e=next;
  }
  e=bucket[i];
  final IndexEntry ce=new IndexEntry(key,s,p);
  bucket[i]=new BucketEntry(hash,e,ce,queue);
  if (++size == bucket.length)   rehash();
  return ce;
}
