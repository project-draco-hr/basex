{
  purge();
  final int hash=hash(key);
  final int i=indexFor(hash,bucket.length);
  BucketEntry e=bucket[i];
  BucketEntry prev=e;
  while (e != null) {
    final BucketEntry next=e.next;
    final CacheEntry entry=e.get();
    if (entry == null) {
      delete(i,e,prev,next);
    }
 else     if (e.hash == hash && eq(entry.key,key)) {
      entry.size=s;
      entry.pointer=p;
      return;
    }
    prev=e;
    e=next;
  }
  e=bucket[i];
  bucket[i]=new BucketEntry(hash,e,new CacheEntry(key,s,p),queue);
  if (++size == bucket.length)   rehash();
}
