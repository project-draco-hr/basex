{
  final Data data=context.data();
  if (data instanceof MemData)   return error(NO_MAINMEM);
  final IndexType index;
  final CmdIndex ci=getOption(CmdIndex.class);
switch (ci) {
case TEXT:
    data.meta.createtext=true;
  index=IndexType.TEXT;
break;
case ATTRIBUTE:
data.meta.createattr=true;
index=IndexType.ATTRIBUTE;
break;
case FULLTEXT:
data.meta.createftxt=true;
data.meta.wildcards=prop.is(Prop.WILDCARDS);
data.meta.stemming=prop.is(Prop.STEMMING);
data.meta.casesens=prop.is(Prop.CASESENS);
data.meta.diacritics=prop.is(Prop.DIACRITICS);
data.meta.scoring=prop.num(Prop.SCORING);
data.meta.language=Language.get(prop);
index=IndexType.FULLTEXT;
break;
default :
return error(UNKNOWN_CMD_X,this);
}
if (!data.startUpdate()) return error(DB_PINNED_X,data.meta.name);
try {
create(index,data,this);
return info(INDEX_CREATED_X_X,index,perf);
}
 catch (final IOException ex) {
Util.debug(ex);
return error(ex.getMessage());
}
 finally {
data.finishUpdate();
}
}
