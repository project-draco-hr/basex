{
  final String src=general.input();
  final String trg=target.getText().trim();
  if (comp == add) {
    general.setOptions();
    final Runnable run=new Runnable(){
      @Override public void run(){
        dialog.resources.refreshNewFolder(trg);
      }
    }
;
    DialogProgress.execute(dialog,run,new Add(trg,src));
  }
 else   if (comp == optimize) {
    DialogProgress.execute(dialog,new Optimize());
  }
 else {
    boolean ok=general.action(comp,false);
    if (comp == general.browse || comp == general.input)     target.setText(general.dbname);
    String inf=!ok ? RES_NOT_FOUND : !ok ? ENTER_DB_NAME : null;
    final Msg icon=Msg.ERROR;
    if (ok) {
      ok=MetaData.normPath(trg) != null;
      if (!ok)       inf=Util.info(INVALID_X,TARGET_PATH);
    }
    general.info.setText(inf,icon);
    add.setEnabled(ok);
    optimize.setEnabled(!dialog.gui.context.data().meta.uptodate);
  }
}
