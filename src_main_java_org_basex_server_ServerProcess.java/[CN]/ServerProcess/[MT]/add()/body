{
  final Performance perf=new Performance();
  final String name=in.readString();
  final String path=in.readString();
  final StringBuilder sb=new StringBuilder(ServerCmd.ADD + " ");
  if (!name.isEmpty())   sb.append(AS + ' ' + name+ ' ');
  if (!path.isEmpty())   sb.append(TO + ' ' + path+ ' ');
  final String str=sb.append("[...]").toString();
  log.write(this,str);
  try {
    final WrapInputStream is=new WrapInputStream(in);
    final String info=Add.add(name,path,is,context,null);
    out.writeString(info);
    out.write(0);
    log.write(this,OK,perf);
  }
 catch (  final BaseXException ex) {
    out.writeString(ex.getMessage());
    out.write(1);
    log.write(this,INFOERROR + ex.getMessage(),perf);
  }
  out.flush();
}
