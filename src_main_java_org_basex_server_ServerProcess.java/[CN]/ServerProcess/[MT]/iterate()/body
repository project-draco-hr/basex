{
  String input=in.readString();
  QueryProcessor processor=new QueryProcessor(input,context);
  try {
    Iter iter=processor.iter();
    XMLSerializer serializer=new XMLSerializer(out);
    send(true);
    Item item;
    while (in.read() == 0) {
      if ((item=iter.next()) != null) {
        send(true);
        item.serialize(serializer);
        send(true);
      }
 else {
        send(false);
      }
    }
    serializer.close();
    processor.close();
  }
 catch (  QueryException ex) {
    log.write(this,input,INFOERROR + ex.extended());
    send(false);
    out.print(ex.extended());
    send(true);
  }
}
