{
  final Path source=checkPath(0,ctx);
  if (!Files.exists(source))   throw FILE_NOT_FOUND.get(info,source);
  final Path src=absolute(source);
  Path trg=absolute(checkPath(1,ctx));
  if (Files.isDirectory(trg)) {
    trg=trg.resolve(src.getFileName());
    if (Files.isDirectory(trg))     throw FILE_IS_DIR.get(info,trg);
  }
 else   if (!Files.exists(trg)) {
    if (!Files.isDirectory(trg.getParent()))     throw FILE_NO_DIR.get(info,trg);
  }
 else   if (Files.isDirectory(src)) {
    throw FILE_IS_DIR.get(info,src);
  }
  if (copy) {
    copy(src,trg);
  }
 else {
    Files.move(src,trg,StandardCopyOption.REPLACE_EXISTING);
  }
  return null;
}
