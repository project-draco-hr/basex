{
  builder=build;
  if (doc)   builder.startDoc(token(io.name()));
  scanner.more();
  while (true) {
    if (scanner.type == Type.TEXT) {
      builder.text(scanner.token);
    }
 else     if (scanner.type == Type.COMMENT) {
      builder.comment(scanner.token);
    }
 else     if (scanner.type == Type.PI) {
      builder.pi(scanner.token);
    }
 else     if (scanner.type == Type.EOF) {
      break;
    }
 else     if (scanner.type != Type.DTD) {
      if (!parseTag())       break;
      continue;
    }
    if (!scanner.more())     break;
  }
  scanner.finish();
  builder.encoding(scanner.encoding);
  if (doc)   builder.endDoc();
}
