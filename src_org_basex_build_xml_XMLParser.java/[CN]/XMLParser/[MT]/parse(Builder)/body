{
  builder=build;
  builder.encoding(scanner.encoding);
  scanner.more();
  while (true) {
    if (scanner.type == Type.TEXT) {
      builder.text(scanner.token.finish(),scanner.ws);
      if (!scanner.more())       break;
    }
 else     if (scanner.type == Type.COMMENT) {
      builder.comment(scanner.token.finish());
      if (!scanner.more())       break;
    }
 else     if (scanner.type == Type.DTD) {
      if (!scanner.more())       break;
    }
 else     if (scanner.type == Type.PI) {
      builder.pi(scanner.token.finish());
      if (!scanner.more())       break;
    }
 else {
      if (!parseTag())       break;
    }
  }
  scanner.finish();
}
