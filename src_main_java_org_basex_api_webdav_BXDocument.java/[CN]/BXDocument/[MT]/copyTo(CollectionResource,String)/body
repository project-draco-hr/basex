{
  try {
    Session s=factory.login(user,pass);
    try {
      if (target instanceof BXAllDatabasesResource) {
        createDb(s,name);
      }
 else       if (target instanceof BXDatabase) {
        addToDb(s,((BXDatabase)target).db,name);
      }
 else       if (target instanceof BXFolder) {
        addToFolder(s,((BXFolder)target).db,name,((BXFolder)target).path);
        if (factory.resource(s,((BXFolder)target).db,((BXFolder)target).path + SEP + EMPTYXML,user,pass) != null) {
          s.execute(new Open(((BXFolder)target).db));
          s.execute(new Delete(((BXFolder)target).path + SEP + "EMPTY.xml"));
        }
      }
    }
  finally {
      s.close();
    }
  }
 catch (  Exception ex) {
    ex.printStackTrace();
  }
}
