{
  final int st=path.steps.size();
  if (text) {
    if (st == 1 || !data.tags.uptodate)     return null;
    final Step step=path.steps.get(st - 2);
    if (!(step.test instanceof TestName))     return null;
    return data.tags.stat(((TestName)step.test).id);
  }
  final int id=path.steps.last().simpleName(Axis.ATTR,true);
  if (id == Integer.MIN_VALUE || !data.atts.uptodate)   return null;
  return data.atts.stat(id);
}
