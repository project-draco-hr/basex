{
  final int st=path.steps.size();
  if (text) {
    if (st == 1)     return;
    final Step step=path.steps.get(st - 2);
    if (!(step.test instanceof TestName))     return;
    key=data.tags.stat(((TestName)step.test).id);
  }
 else {
    final int id=path.steps.last().simpleName(Axis.ATTR,true);
    if (id == Integer.MIN_VALUE)     return;
    key=data.atts.stat(id);
  }
}
