{
  expr=checkUp(expr,ctx).comp(ctx);
  type=expr.type();
  var.ret=ctx.grouping ? SeqType.get(type.type,SeqType.Occ.ZM) : type.type.seq();
  ctx.vars.add(var);
  if (pos != null)   ctx.vars.add(pos);
  if (score != null)   ctx.vars.add(score);
  size=expr.size();
  return this;
}
