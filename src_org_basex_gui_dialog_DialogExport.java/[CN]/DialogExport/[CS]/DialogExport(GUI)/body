{
  super(main,GUIEXPORT);
  final BaseXBack pp=new BaseXBack();
  pp.setLayout(new TableLayout(3,1,0,4));
  BaseXBack p=new BaseXBack();
  p.setLayout(new TableLayout(2,2,6,0));
  out=new BaseXLabel("",false,true);
  p.add(out);
  p.add(new BaseXLabel(""));
  final Data data=gui.context.data;
  file=data.doc().length == 1;
  IO io=gui.context.data.meta.file;
  final String fn=file ? io.path() : io.getDir();
  path=new BaseXTextField(fn,this);
  path.addKeyListener(new KeyAdapter(){
    @Override public void keyReleased(    final KeyEvent e){
      action(null);
    }
  }
);
  BaseXLayout.setWidth(path,240);
  p.add(path);
  final BaseXButton browse=new BaseXButton(BUTTONBROWSE,this);
  browse.addActionListener(new ActionListener(){
    public void actionPerformed(    final ActionEvent e){
      choose();
    }
  }
);
  p.add(browse);
  pp.add(p);
  p=new BaseXBack();
  p.setLayout(new TableLayout(2,1));
  p.add(new BaseXLabel(INFOENCODING + COL,false,true));
  final Prop prop=gui.context.prop;
  final SortedMap<String,Charset> cs=Charset.availableCharsets();
  final String[] encodings=cs.keySet().toArray(new String[cs.size()]);
  encoding=new BaseXCombo(encodings,this);
  encoding.setSelectedItem(prop.get(Prop.XMLENCODING));
  encoding.addKeyListener(new KeyAdapter(){
    @Override public void keyReleased(    final KeyEvent e){
      action(null);
    }
  }
);
  BaseXLayout.setWidth(encoding,240);
  p.add(encoding);
  pp.add(p);
  format=new BaseXCheckBox(INDENT,prop.is(Prop.XMLFORMAT),0,this);
  pp.add(format);
  set(pp,BorderLayout.CENTER);
  p=new BaseXBack();
  p.setLayout(new BorderLayout());
  info=new BaseXLabel(" ");
  info.setBorder(18,0,0,0);
  p.add(info,BorderLayout.WEST);
  buttons=okCancel(this);
  p.add(buttons,BorderLayout.EAST);
  set(p,BorderLayout.SOUTH);
  action(null);
  finish(null);
}
