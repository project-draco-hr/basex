{
  final XQuery query=new XQuery("\n" + "        <result> { \n" + "            for $u in $users//user_tuple \n"+ "            for $i in $items//item_tuple \n"+ "            where $u/rating > \"C\" and $i/reserve_price > 1000 and $i/offered_by = $u/userid \n"+ "            return <warning> { $u/name } { $u/rating } { $i/description } { $i/reserve_price } </warning> } \n"+ "        </result>\n"+ "     ",ctx);
  try {
    query.bind("$users",node(file("docs/users.xml")));
    query.bind("$items",node(file("docs/items.xml")));
    query.bind("$bids",node(file("docs/bids.xml")));
    result=new QT3Result(query.value());
  }
 catch (  final Throwable trw) {
    result=new QT3Result(trw);
  }
 finally {
    query.close();
  }
  test(assertSerialization("<result><warning><name>Dee Linquent</name><rating>D</rating><description>Helicopter</description><reserve_price>50000</reserve_price></warning></result>",false));
}
