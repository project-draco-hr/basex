{
  final String doc="<n1>" + "<n2>T3</n2>T4<n5/>T6<n7/>" + "</n1>";
  final AtomicUpdateList l=atomics(doc);
  l.addInsert(8,1,data(l.data,"Tx3"),false);
  l.addInsert(8,7,data(l.data,"Tx2"),false);
  l.addInsert(8,7,data(l.data,"Tx1"),false);
  l.addReplace(6,data(l.data,"T6new"));
  l.addDelete(5);
  l.addInsert(4,2,data(l.data,"Tx01"),false);
  l.addDelete(3);
  l.addInsert(3,2,data(l.data,"Tx0"),false);
  l.execute();
  checkTextAdjacency(l.data,new byte[][]{token("Tx0Tx01"),token("T4T6new"),token("Tx1Tx2"),token("Tx3")});
}
