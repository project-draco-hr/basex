{
  Runtime.getRuntime().addShutdownHook(new Thread(){
    @Override public void run(){
      Prop.write();
      context.close();
    }
  }
);
  if (allInfo || info)   process(new Set(SET.INFO,allInfo ? ALL : ON),false);
  try {
    if (query != null) {
      query=content();
      if (query == null)       return;
    }
    if (query != null) {
      if (xpath)       process(new XPath(query),info);
 else       process(new XQuery(query),info);
    }
 else     if (commands != null) {
      process(commands);
      quit(true);
    }
 else {
      console();
    }
  }
 catch (  final Exception ex) {
    error(ex,ex.getMessage());
  }
}
