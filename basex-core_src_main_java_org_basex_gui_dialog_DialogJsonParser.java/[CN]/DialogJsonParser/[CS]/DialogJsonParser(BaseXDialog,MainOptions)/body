{
  try {
    jopts=new JsonOptions(opts.get(MainOptions.JSONPARSER));
  }
 catch (  final IOException ex) {
    jopts=new JsonOptions();
  }
  encoding=DialogExport.encoding(d,jopts.get(JsonOptions.ENCODING));
  final StringList sl=new StringList();
  final JsonFormat[] formats=JsonFormat.values();
  final int fl=formats.length - 1;
  for (int f=0; f < fl; f++)   sl.add(formats[f].toString());
  format=new BaseXCombo(d,sl.toArray());
  format.setSelectedItem(jopts.get(JsonOptions.FORMAT));
  sl.reset();
  for (  final JsonSpec cs : JsonSpec.values())   sl.add(cs.toString());
  spec=new BaseXCombo(d,sl.toArray());
  spec.setSelectedItem(jopts.get(JsonOptions.SPEC));
  unescape=new BaseXCheckBox(UNESCAPE_CHARS,jopts.get(JsonOptions.UNESCAPE),0,d);
  lax=new BaseXCheckBox(LAX_NAME_CONVERSION,jopts.get(JsonOptions.LAX),0,d);
  root=new BaseXCheckBox(STORE_TYPES_ROOT,jopts.get(JsonOptions.ROOT_TYPES),0,d);
  BaseXBack pp=new BaseXBack(new TableLayout(2,1,0,8));
  BaseXBack p=new BaseXBack(new TableLayout(3,2,8,4));
  p.add(new BaseXLabel(ENCODING + COL,true,true));
  p.add(encoding);
  p.add(new BaseXLabel(FORMAT + COL,true,true));
  p.add(format);
  p.add(new BaseXLabel(SPECIFICATION + COL,true,true));
  p.add(spec);
  pp.add(p);
  p=new BaseXBack(new TableLayout(3,1));
  p.add(unescape);
  p.add(lax);
  p.add(root);
  pp.add(p);
  add(pp,BorderLayout.WEST);
  example=new Editor(false,d);
  BaseXLayout.setWidth(example,300);
  add(example,BorderLayout.CENTER);
  action(true);
}
