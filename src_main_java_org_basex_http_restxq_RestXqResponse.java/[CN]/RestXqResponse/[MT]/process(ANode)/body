{
  SerializerProp sp=null;
  String cType=null;
  for (  final ANode n : response.children()) {
    if (HTTP_RESPONSE.eq(n)) {
      final byte[] sta=n.attribute(new QNm(STATUS));
      if (sta != null) {
        final byte[] msg=n.attribute(new QNm(REASON));
        http.status(toInt(sta),msg != null ? string(msg) : null);
      }
      for (      final ANode c : n.children()) {
        if (HTTP_HEADER.eq(c)) {
          final byte[] nam=c.attribute(new QNm(NAME));
          final byte[] val=c.attribute(new QNm(VALUE));
          if (nam != null && val != null) {
            final String key=string(nam);
            if (key.equals(MimeTypes.CONTENT_TYPE)) {
              cType=string(val);
            }
 else {
              http.res.setHeader(key,string(val));
            }
          }
        }
      }
    }
    if (FNGen.OUTPUT_SERIAL.eq(n)) {
      sp=new SerializerProp(FNGen.parameters(n,null));
    }
  }
  if (cType != null) {
    if (sp == null)     sp=new SerializerProp(function.output.toString());
    sp.set(SerializerProp.S_MEDIA_TYPE,cType);
  }
  return sp;
}
