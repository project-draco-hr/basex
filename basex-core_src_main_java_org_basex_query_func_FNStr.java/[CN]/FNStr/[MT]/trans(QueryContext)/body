{
  final int[] tok=cps(checkEStr(expr[0],ctx));
  final int[] srch=cps(checkStr(expr[1],ctx));
  final int[] rep=cps(checkStr(expr[2],ctx));
  final TokenBuilder tmp=new TokenBuilder(tok.length);
  for (  final int t : tok) {
    int j=-1;
    while (++j < srch.length && t != srch[j])     ;
    if (j < srch.length) {
      if (j >= rep.length)       continue;
      tmp.add(rep[j]);
    }
 else {
      tmp.add(t);
    }
  }
  return Str.get(tmp.finish());
}
