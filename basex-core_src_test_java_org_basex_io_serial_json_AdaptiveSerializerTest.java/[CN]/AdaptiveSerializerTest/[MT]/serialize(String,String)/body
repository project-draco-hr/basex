{
  final ArrayOutput ao=new ArrayOutput();
  try (final QueryProcessor qp=new QueryProcessor(query,context)){
    final SerializerOptions sopts=new SerializerOptions();
    sopts.set(SerializerOptions.METHOD,SerialMethod.ADAPTIVE);
    sopts.set(SerializerOptions.INDENT,YesNo.NO);
    try (final Serializer ser=Serializer.get(ao,sopts)){
      for (      final Item it : qp.value())       ser.serialize(it);
    }
     final String actual=normNL(ao.toString().replace("\"","'"));
    assertEquals("\n[E] " + expected + "\n[F] "+ actual+ '\n',expected,actual);
  }
 catch (  final Exception ex) {
    fail(ex.toString());
  }
}
