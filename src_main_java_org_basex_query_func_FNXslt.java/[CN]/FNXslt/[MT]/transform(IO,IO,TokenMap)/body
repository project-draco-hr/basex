{
  final TransformerFactory tc=TransformerFactory.newInstance();
  final Transformer tr=tc.newTransformer(new StreamSource(new ByteArrayInputStream(xsl.read())));
  for (  final byte[] key : par)   tr.setParameter(string(key),string(par.get(key)));
  final ArrayOutput ao=new ArrayOutput();
  tr.transform(new StreamSource(new ByteArrayInputStream(in.read())),new StreamResult(ao));
  return ao.toArray();
}
