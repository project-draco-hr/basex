{
  if (!user.has(Perm.ADMIN))   pr.startTimeout(mprop.num(MainProp.TIMEOUT) * 1000L);
  LockResult lr=new LockResult();
  pr.databases(lr);
  if (lr.readAll)   lr.read=null;
 else   prepareLock(lr.read);
  if (lr.writeAll)   lr.write=null;
 else   prepareLock(lr.write);
  locks.acquire(pr,lr.read,lr.write);
}
