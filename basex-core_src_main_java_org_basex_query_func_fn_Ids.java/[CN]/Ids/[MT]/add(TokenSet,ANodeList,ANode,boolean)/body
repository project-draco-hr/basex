{
  for (  final ANode item : node.attributes()) {
    final byte[] name=lc(item.name());
    if (idref ? contains(name,IDREF) : contains(name,ID) && !contains(name,IDREF)) {
      for (      final byte[] val : split(normalize(item.string()),' ')) {
        if (ids.contains(val)) {
          list.add(idref ? item.finish() : node);
          break;
        }
      }
    }
  }
  for (  final ANode item : node.children()) {
    add(ids,list,item.finish(),idref);
  }
}
