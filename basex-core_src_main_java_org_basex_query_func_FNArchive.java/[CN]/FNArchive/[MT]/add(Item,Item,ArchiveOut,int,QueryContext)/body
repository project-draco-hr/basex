{
  String name=string(entry.string(info));
  if (name.isEmpty())   throw ARCH_EMPTY.get(info);
  if (Prop.WIN)   name=name.replace('\\','/');
  final ZipEntry ze=new ZipEntry(name);
  String enc=null;
  byte[] lvl=null;
  if (entry instanceof ANode) {
    final ANode el=(ANode)entry;
    lvl=el.attribute(LEVEL);
    final byte[] mod=el.attribute(LAST_MOD);
    if (mod != null) {
      try {
        ze.setTime(dateTimeToMs(new Dtm(mod,info),ctx));
      }
 catch (      final QueryException qe) {
        throw ARCH_DATETIME.get(info,mod);
      }
    }
    final byte[] ea=el.attribute(ENCODING);
    if (ea != null) {
      enc=string(ea);
      if (!Charset.isSupported(enc))       throw ARCH_ENCODING.get(info,ea);
    }
  }
  byte[] val=checkStrBin(cont);
  if (cont instanceof AStr && enc != null && enc != UTF8)   val=encode(val,enc,ctx);
  try {
    out.level(lvl == null ? level : toInt(lvl));
  }
 catch (  final IllegalArgumentException ex) {
    throw ARCH_LEVEL.get(info,lvl);
  }
  out.write(ze,val);
}
