{
  if (t == null)   return;
  if (declType != null) {
    if (declType.occ.intersect(t.occ) == null)     throw INVCAST.get(ii,t,declType);
    if (!t.convertibleTo(declType))     return;
  }
  if (!inType.eq(t) && !inType.instanceOf(t)) {
    final SeqType is=inType.intersect(t);
    if (is != null) {
      inType=is;
      if (declType != null && inType.instanceOf(declType)) {
        ctx.compInfo(QueryText.OPTCAST,this);
        declType=null;
      }
    }
  }
}
