{
  if (val instanceof EditorFile) {
    final IOFile file=((EditorFile)val).file;
    if (file != null) {
      final String mime=MimeTypes.get(file.path());
      return MimeTypes.isXML(mime) || MimeTypes.isXQuery(mime) ? XML : MimeTypes.isText(mime) ? TEXT : UNKNOWN;
    }
  }
  return expanded ? DIR2 : DIR1;
}
