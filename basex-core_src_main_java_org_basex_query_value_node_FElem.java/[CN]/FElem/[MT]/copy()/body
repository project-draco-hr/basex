{
  final ANodeList ch=children != null ? new ANodeList(children.size()) : null;
  final ANodeList at=atts != null ? new ANodeList(atts.size()) : null;
  final Atts as=ns != null ? new Atts() : null;
  final FElem node=new FElem(name,as,ch,at);
  if (ns != null)   for (int n=0; n < ns.size(); ++n)   as.add(ns.name(n),ns.value(n));
  if (atts != null)   for (  final ANode n : atts)   at.add(n.copy());
  if (children != null)   for (  final ANode n : children)   ch.add(n.copy());
  node.parent(parent);
  return node.optimize();
}
