{
  final String ct=mtype == null || error ? contentType(ctype) : mtype;
  final FElem body;
  if (isMultipart(ct)) {
    final byte[] boundary=boundary(ctype);
    if (boundary == null)     throw HC_REQ_X.get(info,"No separation boundary specified");
    body=new FElem(Q_MULTIPART).add(SerializerOptions.MEDIA_TYPE.name(),ct);
    body.add(BOUNDARY,boundary);
    final ANodeList parts=new ANodeList();
    extractParts(concat(DASHES,boundary),parts);
    for (    final ANode node : parts)     body.add(node);
  }
 else {
    body=new FElem(Q_BODY).add(SerializerOptions.MEDIA_TYPE.name(),ct);
    if (payloads != null) {
      final byte[] pl=extract(ct,charset(ctype));
      payloads.add(parse(pl,ct));
    }
  }
  return body;
}
