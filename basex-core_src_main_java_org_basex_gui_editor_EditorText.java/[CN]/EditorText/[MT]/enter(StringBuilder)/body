{
  final boolean opening=ps > 0 && OPENING.indexOf(text[ps - 1]) != -1;
  final boolean closing=ps < text.length && CLOSING.indexOf(text[ps]) != -1;
  int ind=open(), move=0;
  if (opening) {
    if (closing) {
      for (int p=0; p < ind + TAB; p++)       sb.append(' ');
      move=ind + TAB + 1;
      sb.append('\n');
    }
 else {
      ind+=TAB;
    }
  }
 else   if (closing) {
    ind-=TAB;
  }
  for (int p=0; p < ind; p++)   sb.append(' ');
  add(sb);
  return move;
}
