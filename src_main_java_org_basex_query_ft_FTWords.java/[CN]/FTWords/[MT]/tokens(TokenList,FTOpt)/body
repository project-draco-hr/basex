{
  final TokenSet ts=new TokenSet();
switch (mode) {
case ALL:
case ANY:
    for (    final byte[] t : list)     ts.add(t);
  break;
case ALL_WORDS:
case ANY_WORD:
final FTLexer l=new FTLexer(ftopt);
for (final byte[] t : list) {
l.init(t);
while (l.hasNext()) ts.add(l.nextToken());
}
break;
case PHRASE:
final TokenBuilder tb=new TokenBuilder();
for (final byte[] t : list) tb.add(t).add(' ');
ts.add(tb.trim().finish());
}
return ts;
}
