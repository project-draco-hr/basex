{
  final Value val=var != null && v != null ? var.checkType(v,qc,info,true) : null;
  try {
    super.compile(qc,scp);
    if (val != null) {
      final Expr inlined=expr.inline(qc,scp,var,val);
      if (inlined != null)       expr=inlined;
    }
  }
 catch (  final QueryException ex) {
    expr=FnError.get(ex,expr.seqType());
  }
  return optimize(qc,scp);
}
