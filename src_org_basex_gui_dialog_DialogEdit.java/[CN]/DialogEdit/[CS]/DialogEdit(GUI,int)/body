{
  super(main,EDITTITLE);
  pre=p;
  final BaseXBack pp=new BaseXBack();
  pp.setLayout(new BorderLayout());
  final Context context=gui.context;
  final Data data=context.data();
  kind=data.kind(pre);
  final String title=Main.info(EDITTEXT,EDITKIND[kind]);
  final BaseXLabel label=new BaseXLabel(title,true,true);
  pp.add(label,BorderLayout.NORTH);
  if (kind == Data.ELEM || kind == Data.DOC) {
    final byte[] txt=kind == Data.ELEM ? data.tag(pre) : data.text(pre);
    input=new BaseXTextField(string(txt),null,this);
    old1=input.getText();
    pp.add(input,BorderLayout.CENTER);
  }
 else   if (kind == Data.TEXT || kind == Data.COMM) {
    setResizable(true);
    input3=new BaseXText(null,true,this);
    input3.setText(data.text(pre));
    input3.setPreferredSize(new Dimension(320,200));
    old1=string(input3.getText());
    pp.add(input3,BorderLayout.CENTER);
  }
 else {
    if (kind == Data.ATTR) {
      old1=string(data.attName(pre));
      old2=string(data.attValue(pre));
    }
 else {
      old1=string(data.text(pre));
      old2="";
      final int i=old1.indexOf(' ');
      if (i != -1) {
        old2=old1.substring(i + 1);
        old1=old1.substring(0,i);
      }
    }
    final BaseXBack b=new BaseXBack();
    b.setLayout(new TableLayout(2,1,0,8));
    input=new BaseXTextField(old1,null,this);
    b.add(input);
    if (kind == Data.ATTR) {
      input2=new BaseXTextField(old2,null,this);
      b.add(input2);
    }
 else {
      input3=new BaseXText(null,true,this);
      input3.setText(token(old2));
      input3.setPreferredSize(new Dimension(400,200));
      b.add(input3);
    }
    pp.add(b,BorderLayout.CENTER);
  }
  if (input != null)   input.selectAll();
 else   input3.selectAll();
  set(pp,BorderLayout.CENTER);
  buttons=okCancel(this);
  set(buttons,BorderLayout.SOUTH);
  finish(null);
}
