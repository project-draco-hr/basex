{
  super(gui,EDITTITLE);
  pre=p;
  final BaseXBack pp=new BaseXBack();
  pp.setLayout(new BorderLayout());
  final Context context=GUI.context;
  final Data data=context.data();
  kind=data.kind(pre);
  final String title=BaseX.info(EDITTEXT,EDITKIND[kind]);
  final BaseXLabel label=new BaseXLabel(title,true,true);
  pp.add(label,BorderLayout.NORTH);
  if (kind == Data.ELEM || kind == Data.DOC) {
    final byte[] txt=kind == Data.ELEM ? data.tag(pre) : data.text(pre);
    input=new BaseXTextField(Token.string(txt),null,this);
    old1=input.getText();
    pp.add(input,BorderLayout.CENTER);
  }
 else   if (kind == Data.TEXT || kind == Data.COMM) {
    setResizable(true);
    input3=new BaseXText(null,true,this);
    input3.setText(data.text(pre));
    input3.setPreferredSize(new Dimension(400,200));
    old1=Token.string(input3.getText());
    pp.add(input3,BorderLayout.CENTER);
  }
 else {
    byte[][] atts=new byte[2][];
    if (kind == Data.ATTR) {
      atts[0]=data.attName(pre);
      atts[1]=data.attValue(pre);
    }
 else {
      atts[0]=data.text(pre);
      atts[1]=Token.EMPTY;
      if (Token.contains(atts[0],' '))       atts=Token.split(atts[0],' ');
    }
    final BaseXBack b=new BaseXBack();
    b.setLayout(new TableLayout(2,1,0,8));
    input=new BaseXTextField(Token.string(atts[0]),null,this);
    old1=input.getText();
    b.add(input);
    input2=new BaseXText(null);
    input2.setText(atts[1]);
    old2=Token.string(atts[1]);
    b.add(input2);
    pp.add(b,BorderLayout.CENTER);
  }
  if (input != null)   input.selectAll();
 else   input3.selectAll();
  set(pp,BorderLayout.CENTER);
  buttons=BaseXLayout.okCancel(this);
  set(buttons,BorderLayout.SOUTH);
  finish(gui);
}
