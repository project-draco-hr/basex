{
  final QueryProcessor proc=name.equals(XPATH) ? new XPathProcessor(query) : new XQueryProcessor(query);
  try {
    return new BXResourceSet(proc.query(new Nodes(((BXXMLResource)coll.getResource(id)).getData())),coll);
  }
 catch (  final QueryException ex) {
    throw new XMLDBException(ErrorCodes.VENDOR_ERROR,ex.getMessage());
  }
catch (  final Exception ex) {
    BaseX.notexpected();
    return null;
  }
}
