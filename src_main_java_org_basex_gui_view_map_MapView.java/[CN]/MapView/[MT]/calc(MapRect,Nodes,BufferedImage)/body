{
  gui.cursor(CURSORWAIT);
  initLen();
  layout=new MapLayout(nodes.data,textLen,gui.gprop);
  layout.makeMap(rect,new MapList(nodes.list.clone()),0,(int)nodes.size() - 1);
  mainRects=layout.rectangles.copy();
  painter.init(mainRects);
  drawMap(map,mainRects,1f);
  focus();
  gui.cursor(CURSORARROW,true);
}
